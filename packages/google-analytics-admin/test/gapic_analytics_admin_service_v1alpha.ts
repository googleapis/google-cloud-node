// Copyright 2025 Google LLC
//
// Licensed under the Apache License, Version 2.0 (the "License");
// you may not use this file except in compliance with the License.
// You may obtain a copy of the License at
//
//     https://www.apache.org/licenses/LICENSE-2.0
//
// Unless required by applicable law or agreed to in writing, software
// distributed under the License is distributed on an "AS IS" BASIS,
// WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
// See the License for the specific language governing permissions and
// limitations under the License.
//
// ** This file is automatically generated by gapic-generator-typescript. **
// ** https://github.com/googleapis/gapic-generator-typescript **
// ** All changes to this file may be overwritten. **

import * as protos from '../protos/protos';
import * as assert from 'assert';
import * as sinon from 'sinon';
import {SinonStub} from 'sinon';
import {describe, it} from 'mocha';
import * as analyticsadminserviceModule from '../src';

import {PassThrough} from 'stream';

import {protobuf} from 'google-gax';

// Dynamically loaded proto JSON is needed to get the type information
// to fill in default values for request objects
const root = protobuf.Root.fromJSON(
  require('../protos/protos.json')
).resolveAll();

// eslint-disable-next-line @typescript-eslint/no-unused-vars
function getTypeDefaultValue(typeName: string, fields: string[]) {
  let type = root.lookupType(typeName) as protobuf.Type;
  for (const field of fields.slice(0, -1)) {
    type = type.fields[field]?.resolvedType as protobuf.Type;
  }
  return type.fields[fields[fields.length - 1]]?.defaultValue;
}

function generateSampleMessage<T extends object>(instance: T) {
  const filledObject = (
    instance.constructor as typeof protobuf.Message
  ).toObject(instance as protobuf.Message<T>, {defaults: true});
  return (instance.constructor as typeof protobuf.Message).fromObject(
    filledObject
  ) as T;
}

function stubSimpleCall<ResponseType>(response?: ResponseType, error?: Error) {
  return error
    ? sinon.stub().rejects(error)
    : sinon.stub().resolves([response]);
}

function stubSimpleCallWithCallback<ResponseType>(
  response?: ResponseType,
  error?: Error
) {
  return error
    ? sinon.stub().callsArgWith(2, error)
    : sinon.stub().callsArgWith(2, null, response);
}

function stubPageStreamingCall<ResponseType>(
  responses?: ResponseType[],
  error?: Error
) {
  const pagingStub = sinon.stub();
  if (responses) {
    for (let i = 0; i < responses.length; ++i) {
      pagingStub.onCall(i).callsArgWith(2, null, responses[i]);
    }
  }
  const transformStub = error
    ? sinon.stub().callsArgWith(2, error)
    : pagingStub;
  const mockStream = new PassThrough({
    objectMode: true,
    transform: transformStub,
  });
  // trigger as many responses as needed
  if (responses) {
    for (let i = 0; i < responses.length; ++i) {
      setImmediate(() => {
        mockStream.write({});
      });
    }
    setImmediate(() => {
      mockStream.end();
    });
  } else {
    setImmediate(() => {
      mockStream.write({});
    });
    setImmediate(() => {
      mockStream.end();
    });
  }
  return sinon.stub().returns(mockStream);
}

function stubAsyncIterationCall<ResponseType>(
  responses?: ResponseType[],
  error?: Error
) {
  let counter = 0;
  const asyncIterable = {
    [Symbol.asyncIterator]() {
      return {
        async next() {
          if (error) {
            return Promise.reject(error);
          }
          if (counter >= responses!.length) {
            return Promise.resolve({done: true, value: undefined});
          }
          return Promise.resolve({done: false, value: responses![counter++]});
        },
      };
    },
  };
  return sinon.stub().returns(asyncIterable);
}

describe('v1alpha.AnalyticsAdminServiceClient', () => {
  describe('Common methods', () => {
    it('has apiEndpoint', () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient();
      const apiEndpoint = client.apiEndpoint;
      assert.strictEqual(apiEndpoint, 'analyticsadmin.googleapis.com');
    });

    it('has universeDomain', () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient();
      const universeDomain = client.universeDomain;
      assert.strictEqual(universeDomain, 'googleapis.com');
    });

    if (
      typeof process === 'object' &&
      typeof process.emitWarning === 'function'
    ) {
      it('throws DeprecationWarning if static servicePath is used', () => {
        const stub = sinon.stub(process, 'emitWarning');
        const servicePath =
          analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient
            .servicePath;
        assert.strictEqual(servicePath, 'analyticsadmin.googleapis.com');
        assert(stub.called);
        stub.restore();
      });

      it('throws DeprecationWarning if static apiEndpoint is used', () => {
        const stub = sinon.stub(process, 'emitWarning');
        const apiEndpoint =
          analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient
            .apiEndpoint;
        assert.strictEqual(apiEndpoint, 'analyticsadmin.googleapis.com');
        assert(stub.called);
        stub.restore();
      });
    }
    it('sets apiEndpoint according to universe domain camelCase', () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          universeDomain: 'example.com',
        });
      const servicePath = client.apiEndpoint;
      assert.strictEqual(servicePath, 'analyticsadmin.example.com');
    });

    it('sets apiEndpoint according to universe domain snakeCase', () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          universe_domain: 'example.com',
        });
      const servicePath = client.apiEndpoint;
      assert.strictEqual(servicePath, 'analyticsadmin.example.com');
    });

    if (typeof process === 'object' && 'env' in process) {
      describe('GOOGLE_CLOUD_UNIVERSE_DOMAIN environment variable', () => {
        it('sets apiEndpoint from environment variable', () => {
          const saved = process.env['GOOGLE_CLOUD_UNIVERSE_DOMAIN'];
          process.env['GOOGLE_CLOUD_UNIVERSE_DOMAIN'] = 'example.com';
          const client =
            new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient();
          const servicePath = client.apiEndpoint;
          assert.strictEqual(servicePath, 'analyticsadmin.example.com');
          if (saved) {
            process.env['GOOGLE_CLOUD_UNIVERSE_DOMAIN'] = saved;
          } else {
            delete process.env['GOOGLE_CLOUD_UNIVERSE_DOMAIN'];
          }
        });

        it('value configured in code has priority over environment variable', () => {
          const saved = process.env['GOOGLE_CLOUD_UNIVERSE_DOMAIN'];
          process.env['GOOGLE_CLOUD_UNIVERSE_DOMAIN'] = 'example.com';
          const client =
            new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient(
              {universeDomain: 'configured.example.com'}
            );
          const servicePath = client.apiEndpoint;
          assert.strictEqual(
            servicePath,
            'analyticsadmin.configured.example.com'
          );
          if (saved) {
            process.env['GOOGLE_CLOUD_UNIVERSE_DOMAIN'] = saved;
          } else {
            delete process.env['GOOGLE_CLOUD_UNIVERSE_DOMAIN'];
          }
        });
      });
    }
    it('does not allow setting both universeDomain and universe_domain', () => {
      assert.throws(() => {
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          universe_domain: 'example.com',
          universeDomain: 'example.net',
        });
      });
    });

    it('has port', () => {
      const port =
        analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient.port;
      assert(port);
      assert(typeof port === 'number');
    });

    it('should create a client with no option', () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient();
      assert(client);
    });

    it('should create a client with gRPC fallback', () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          fallback: true,
        });
      assert(client);
    });

    it('has initialize method and supports deferred initialization', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      assert.strictEqual(client.analyticsAdminServiceStub, undefined);
      await client.initialize();
      assert(client.analyticsAdminServiceStub);
    });

    it('has close method for the initialized client', done => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      client.initialize().catch(err => {
        throw err;
      });
      assert(client.analyticsAdminServiceStub);
      client
        .close()
        .then(() => {
          done();
        })
        .catch(err => {
          throw err;
        });
    });

    it('has close method for the non-initialized client', done => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      assert.strictEqual(client.analyticsAdminServiceStub, undefined);
      client
        .close()
        .then(() => {
          done();
        })
        .catch(err => {
          throw err;
        });
    });

    it('has getProjectId method', async () => {
      const fakeProjectId = 'fake-project-id';
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      client.auth.getProjectId = sinon.stub().resolves(fakeProjectId);
      const result = await client.getProjectId();
      assert.strictEqual(result, fakeProjectId);
      assert((client.auth.getProjectId as SinonStub).calledWithExactly());
    });

    it('has getProjectId method with callback', async () => {
      const fakeProjectId = 'fake-project-id';
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      client.auth.getProjectId = sinon
        .stub()
        .callsArgWith(0, null, fakeProjectId);
      const promise = new Promise((resolve, reject) => {
        client.getProjectId((err?: Error | null, projectId?: string | null) => {
          if (err) {
            reject(err);
          } else {
            resolve(projectId);
          }
        });
      });
      const result = await promise;
      assert.strictEqual(result, fakeProjectId);
    });
  });

  describe('getAccount', () => {
    it('invokes getAccount without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAccountRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAccountRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Account()
      );
      client.innerApiCalls.getAccount = stubSimpleCall(expectedResponse);
      const [response] = await client.getAccount(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getAccount as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAccount as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAccount without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAccountRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAccountRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Account()
      );
      client.innerApiCalls.getAccount =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getAccount(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAccount | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getAccount as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAccount as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAccount with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAccountRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAccountRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getAccount = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getAccount(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getAccount as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAccount as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAccount with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAccountRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAccountRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getAccount(request), expectedError);
    });
  });

  describe('deleteAccount', () => {
    it('invokes deleteAccount without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteAccountRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteAccountRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteAccount = stubSimpleCall(expectedResponse);
      const [response] = await client.deleteAccount(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteAccount as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteAccount as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteAccount without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteAccountRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteAccountRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteAccount =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteAccount(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteAccount as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteAccount as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteAccount with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteAccountRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteAccountRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteAccount = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.deleteAccount(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.deleteAccount as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteAccount as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteAccount with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteAccountRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteAccountRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.deleteAccount(request), expectedError);
    });
  });

  describe('updateAccount', () => {
    it('invokes updateAccount without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAccountRequest()
      );
      request.account ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAccountRequest',
        ['account', 'name']
      );
      request.account.name = defaultValue1;
      const expectedHeaderRequestParams = `account.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Account()
      );
      client.innerApiCalls.updateAccount = stubSimpleCall(expectedResponse);
      const [response] = await client.updateAccount(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateAccount as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateAccount as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateAccount without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAccountRequest()
      );
      request.account ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAccountRequest',
        ['account', 'name']
      );
      request.account.name = defaultValue1;
      const expectedHeaderRequestParams = `account.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Account()
      );
      client.innerApiCalls.updateAccount =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateAccount(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAccount | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateAccount as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateAccount as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateAccount with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAccountRequest()
      );
      request.account ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAccountRequest',
        ['account', 'name']
      );
      request.account.name = defaultValue1;
      const expectedHeaderRequestParams = `account.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateAccount = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.updateAccount(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.updateAccount as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateAccount as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateAccount with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAccountRequest()
      );
      request.account ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAccountRequest',
        ['account', 'name']
      );
      request.account.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.updateAccount(request), expectedError);
    });
  });

  describe('provisionAccountTicket', () => {
    it('invokes provisionAccountTicket without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ProvisionAccountTicketRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ProvisionAccountTicketResponse()
      );
      client.innerApiCalls.provisionAccountTicket =
        stubSimpleCall(expectedResponse);
      const [response] = await client.provisionAccountTicket(request);
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes provisionAccountTicket without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ProvisionAccountTicketRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ProvisionAccountTicketResponse()
      );
      client.innerApiCalls.provisionAccountTicket =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.provisionAccountTicket(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IProvisionAccountTicketResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes provisionAccountTicket with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ProvisionAccountTicketRequest()
      );
      const expectedError = new Error('expected');
      client.innerApiCalls.provisionAccountTicket = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.provisionAccountTicket(request),
        expectedError
      );
    });

    it('invokes provisionAccountTicket with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ProvisionAccountTicketRequest()
      );
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.provisionAccountTicket(request),
        expectedError
      );
    });
  });

  describe('getProperty', () => {
    it('invokes getProperty without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetPropertyRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetPropertyRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Property()
      );
      client.innerApiCalls.getProperty = stubSimpleCall(expectedResponse);
      const [response] = await client.getProperty(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getProperty as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getProperty as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getProperty without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetPropertyRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetPropertyRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Property()
      );
      client.innerApiCalls.getProperty =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getProperty(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IProperty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getProperty as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getProperty as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getProperty with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetPropertyRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetPropertyRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getProperty = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getProperty(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getProperty as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getProperty as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getProperty with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetPropertyRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetPropertyRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getProperty(request), expectedError);
    });
  });

  describe('createProperty', () => {
    it('invokes createProperty without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreatePropertyRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Property()
      );
      client.innerApiCalls.createProperty = stubSimpleCall(expectedResponse);
      const [response] = await client.createProperty(request);
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes createProperty without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreatePropertyRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Property()
      );
      client.innerApiCalls.createProperty =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createProperty(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IProperty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes createProperty with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreatePropertyRequest()
      );
      const expectedError = new Error('expected');
      client.innerApiCalls.createProperty = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.createProperty(request), expectedError);
    });

    it('invokes createProperty with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreatePropertyRequest()
      );
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.createProperty(request), expectedError);
    });
  });

  describe('deleteProperty', () => {
    it('invokes deleteProperty without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeletePropertyRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeletePropertyRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Property()
      );
      client.innerApiCalls.deleteProperty = stubSimpleCall(expectedResponse);
      const [response] = await client.deleteProperty(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteProperty as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteProperty as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteProperty without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeletePropertyRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeletePropertyRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Property()
      );
      client.innerApiCalls.deleteProperty =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteProperty(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IProperty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteProperty as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteProperty as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteProperty with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeletePropertyRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeletePropertyRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteProperty = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.deleteProperty(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.deleteProperty as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteProperty as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteProperty with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeletePropertyRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeletePropertyRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.deleteProperty(request), expectedError);
    });
  });

  describe('updateProperty', () => {
    it('invokes updateProperty without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdatePropertyRequest()
      );
      request.property ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdatePropertyRequest',
        ['property', 'name']
      );
      request.property.name = defaultValue1;
      const expectedHeaderRequestParams = `property.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Property()
      );
      client.innerApiCalls.updateProperty = stubSimpleCall(expectedResponse);
      const [response] = await client.updateProperty(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateProperty as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateProperty as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateProperty without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdatePropertyRequest()
      );
      request.property ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdatePropertyRequest',
        ['property', 'name']
      );
      request.property.name = defaultValue1;
      const expectedHeaderRequestParams = `property.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Property()
      );
      client.innerApiCalls.updateProperty =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateProperty(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IProperty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateProperty as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateProperty as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateProperty with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdatePropertyRequest()
      );
      request.property ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdatePropertyRequest',
        ['property', 'name']
      );
      request.property.name = defaultValue1;
      const expectedHeaderRequestParams = `property.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateProperty = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.updateProperty(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.updateProperty as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateProperty as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateProperty with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdatePropertyRequest()
      );
      request.property ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdatePropertyRequest',
        ['property', 'name']
      );
      request.property.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.updateProperty(request), expectedError);
    });
  });

  describe('createFirebaseLink', () => {
    it('invokes createFirebaseLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateFirebaseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateFirebaseLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.FirebaseLink()
      );
      client.innerApiCalls.createFirebaseLink =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createFirebaseLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createFirebaseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createFirebaseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createFirebaseLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateFirebaseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateFirebaseLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.FirebaseLink()
      );
      client.innerApiCalls.createFirebaseLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createFirebaseLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IFirebaseLink | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createFirebaseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createFirebaseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createFirebaseLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateFirebaseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateFirebaseLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createFirebaseLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.createFirebaseLink(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.createFirebaseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createFirebaseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createFirebaseLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateFirebaseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateFirebaseLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.createFirebaseLink(request), expectedError);
    });
  });

  describe('deleteFirebaseLink', () => {
    it('invokes deleteFirebaseLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteFirebaseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteFirebaseLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteFirebaseLink =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteFirebaseLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteFirebaseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteFirebaseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteFirebaseLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteFirebaseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteFirebaseLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteFirebaseLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteFirebaseLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteFirebaseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteFirebaseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteFirebaseLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteFirebaseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteFirebaseLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteFirebaseLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.deleteFirebaseLink(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.deleteFirebaseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteFirebaseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteFirebaseLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteFirebaseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteFirebaseLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.deleteFirebaseLink(request), expectedError);
    });
  });

  describe('getGlobalSiteTag', () => {
    it('invokes getGlobalSiteTag without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetGlobalSiteTagRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetGlobalSiteTagRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GlobalSiteTag()
      );
      client.innerApiCalls.getGlobalSiteTag = stubSimpleCall(expectedResponse);
      const [response] = await client.getGlobalSiteTag(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getGlobalSiteTag as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getGlobalSiteTag as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getGlobalSiteTag without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetGlobalSiteTagRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetGlobalSiteTagRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GlobalSiteTag()
      );
      client.innerApiCalls.getGlobalSiteTag =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getGlobalSiteTag(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IGlobalSiteTag | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getGlobalSiteTag as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getGlobalSiteTag as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getGlobalSiteTag with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetGlobalSiteTagRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetGlobalSiteTagRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getGlobalSiteTag = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getGlobalSiteTag(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getGlobalSiteTag as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getGlobalSiteTag as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getGlobalSiteTag with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetGlobalSiteTagRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetGlobalSiteTagRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getGlobalSiteTag(request), expectedError);
    });
  });

  describe('createGoogleAdsLink', () => {
    it('invokes createGoogleAdsLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateGoogleAdsLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateGoogleAdsLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
      );
      client.innerApiCalls.createGoogleAdsLink =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createGoogleAdsLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createGoogleAdsLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createGoogleAdsLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createGoogleAdsLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateGoogleAdsLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateGoogleAdsLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
      );
      client.innerApiCalls.createGoogleAdsLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createGoogleAdsLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IGoogleAdsLink | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createGoogleAdsLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createGoogleAdsLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createGoogleAdsLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateGoogleAdsLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateGoogleAdsLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createGoogleAdsLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.createGoogleAdsLink(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.createGoogleAdsLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createGoogleAdsLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createGoogleAdsLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateGoogleAdsLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateGoogleAdsLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.createGoogleAdsLink(request), expectedError);
    });
  });

  describe('updateGoogleAdsLink', () => {
    it('invokes updateGoogleAdsLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateGoogleAdsLinkRequest()
      );
      request.googleAdsLink ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateGoogleAdsLinkRequest',
        ['googleAdsLink', 'name']
      );
      request.googleAdsLink.name = defaultValue1;
      const expectedHeaderRequestParams = `google_ads_link.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
      );
      client.innerApiCalls.updateGoogleAdsLink =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateGoogleAdsLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateGoogleAdsLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateGoogleAdsLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateGoogleAdsLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateGoogleAdsLinkRequest()
      );
      request.googleAdsLink ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateGoogleAdsLinkRequest',
        ['googleAdsLink', 'name']
      );
      request.googleAdsLink.name = defaultValue1;
      const expectedHeaderRequestParams = `google_ads_link.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
      );
      client.innerApiCalls.updateGoogleAdsLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateGoogleAdsLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IGoogleAdsLink | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateGoogleAdsLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateGoogleAdsLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateGoogleAdsLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateGoogleAdsLinkRequest()
      );
      request.googleAdsLink ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateGoogleAdsLinkRequest',
        ['googleAdsLink', 'name']
      );
      request.googleAdsLink.name = defaultValue1;
      const expectedHeaderRequestParams = `google_ads_link.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateGoogleAdsLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.updateGoogleAdsLink(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.updateGoogleAdsLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateGoogleAdsLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateGoogleAdsLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateGoogleAdsLinkRequest()
      );
      request.googleAdsLink ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateGoogleAdsLinkRequest',
        ['googleAdsLink', 'name']
      );
      request.googleAdsLink.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.updateGoogleAdsLink(request), expectedError);
    });
  });

  describe('deleteGoogleAdsLink', () => {
    it('invokes deleteGoogleAdsLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteGoogleAdsLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteGoogleAdsLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteGoogleAdsLink =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteGoogleAdsLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteGoogleAdsLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteGoogleAdsLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteGoogleAdsLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteGoogleAdsLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteGoogleAdsLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteGoogleAdsLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteGoogleAdsLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteGoogleAdsLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteGoogleAdsLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteGoogleAdsLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteGoogleAdsLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteGoogleAdsLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteGoogleAdsLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.deleteGoogleAdsLink(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.deleteGoogleAdsLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteGoogleAdsLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteGoogleAdsLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteGoogleAdsLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteGoogleAdsLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.deleteGoogleAdsLink(request), expectedError);
    });
  });

  describe('getDataSharingSettings', () => {
    it('invokes getDataSharingSettings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataSharingSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataSharingSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataSharingSettings()
      );
      client.innerApiCalls.getDataSharingSettings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getDataSharingSettings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getDataSharingSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDataSharingSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDataSharingSettings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataSharingSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataSharingSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataSharingSettings()
      );
      client.innerApiCalls.getDataSharingSettings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getDataSharingSettings(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDataSharingSettings | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getDataSharingSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDataSharingSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDataSharingSettings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataSharingSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataSharingSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getDataSharingSettings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.getDataSharingSettings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.getDataSharingSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDataSharingSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDataSharingSettings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataSharingSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataSharingSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.getDataSharingSettings(request),
        expectedError
      );
    });
  });

  describe('getMeasurementProtocolSecret', () => {
    it('invokes getMeasurementProtocolSecret without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetMeasurementProtocolSecretRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetMeasurementProtocolSecretRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
      );
      client.innerApiCalls.getMeasurementProtocolSecret =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getMeasurementProtocolSecret(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getMeasurementProtocolSecret without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetMeasurementProtocolSecretRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetMeasurementProtocolSecretRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
      );
      client.innerApiCalls.getMeasurementProtocolSecret =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getMeasurementProtocolSecret(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IMeasurementProtocolSecret | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getMeasurementProtocolSecret with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetMeasurementProtocolSecretRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetMeasurementProtocolSecretRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getMeasurementProtocolSecret = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.getMeasurementProtocolSecret(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.getMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getMeasurementProtocolSecret with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetMeasurementProtocolSecretRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetMeasurementProtocolSecretRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.getMeasurementProtocolSecret(request),
        expectedError
      );
    });
  });

  describe('createMeasurementProtocolSecret', () => {
    it('invokes createMeasurementProtocolSecret without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateMeasurementProtocolSecretRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateMeasurementProtocolSecretRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
      );
      client.innerApiCalls.createMeasurementProtocolSecret =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createMeasurementProtocolSecret(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createMeasurementProtocolSecret without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateMeasurementProtocolSecretRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateMeasurementProtocolSecretRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
      );
      client.innerApiCalls.createMeasurementProtocolSecret =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createMeasurementProtocolSecret(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IMeasurementProtocolSecret | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createMeasurementProtocolSecret with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateMeasurementProtocolSecretRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateMeasurementProtocolSecretRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createMeasurementProtocolSecret = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.createMeasurementProtocolSecret(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.createMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createMeasurementProtocolSecret with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateMeasurementProtocolSecretRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateMeasurementProtocolSecretRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.createMeasurementProtocolSecret(request),
        expectedError
      );
    });
  });

  describe('deleteMeasurementProtocolSecret', () => {
    it('invokes deleteMeasurementProtocolSecret without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteMeasurementProtocolSecretRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteMeasurementProtocolSecretRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteMeasurementProtocolSecret =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteMeasurementProtocolSecret(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteMeasurementProtocolSecret without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteMeasurementProtocolSecretRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteMeasurementProtocolSecretRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteMeasurementProtocolSecret =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteMeasurementProtocolSecret(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteMeasurementProtocolSecret with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteMeasurementProtocolSecretRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteMeasurementProtocolSecretRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteMeasurementProtocolSecret = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.deleteMeasurementProtocolSecret(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.deleteMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteMeasurementProtocolSecret with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteMeasurementProtocolSecretRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteMeasurementProtocolSecretRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.deleteMeasurementProtocolSecret(request),
        expectedError
      );
    });
  });

  describe('updateMeasurementProtocolSecret', () => {
    it('invokes updateMeasurementProtocolSecret without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateMeasurementProtocolSecretRequest()
      );
      request.measurementProtocolSecret ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateMeasurementProtocolSecretRequest',
        ['measurementProtocolSecret', 'name']
      );
      request.measurementProtocolSecret.name = defaultValue1;
      const expectedHeaderRequestParams = `measurement_protocol_secret.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
      );
      client.innerApiCalls.updateMeasurementProtocolSecret =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateMeasurementProtocolSecret(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateMeasurementProtocolSecret without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateMeasurementProtocolSecretRequest()
      );
      request.measurementProtocolSecret ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateMeasurementProtocolSecretRequest',
        ['measurementProtocolSecret', 'name']
      );
      request.measurementProtocolSecret.name = defaultValue1;
      const expectedHeaderRequestParams = `measurement_protocol_secret.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
      );
      client.innerApiCalls.updateMeasurementProtocolSecret =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateMeasurementProtocolSecret(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IMeasurementProtocolSecret | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateMeasurementProtocolSecret with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateMeasurementProtocolSecretRequest()
      );
      request.measurementProtocolSecret ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateMeasurementProtocolSecretRequest',
        ['measurementProtocolSecret', 'name']
      );
      request.measurementProtocolSecret.name = defaultValue1;
      const expectedHeaderRequestParams = `measurement_protocol_secret.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateMeasurementProtocolSecret = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateMeasurementProtocolSecret(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateMeasurementProtocolSecret as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateMeasurementProtocolSecret with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateMeasurementProtocolSecretRequest()
      );
      request.measurementProtocolSecret ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateMeasurementProtocolSecretRequest',
        ['measurementProtocolSecret', 'name']
      );
      request.measurementProtocolSecret.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateMeasurementProtocolSecret(request),
        expectedError
      );
    });
  });

  describe('acknowledgeUserDataCollection', () => {
    it('invokes acknowledgeUserDataCollection without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AcknowledgeUserDataCollectionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.AcknowledgeUserDataCollectionRequest',
        ['property']
      );
      request.property = defaultValue1;
      const expectedHeaderRequestParams = `property=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AcknowledgeUserDataCollectionResponse()
      );
      client.innerApiCalls.acknowledgeUserDataCollection =
        stubSimpleCall(expectedResponse);
      const [response] = await client.acknowledgeUserDataCollection(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.acknowledgeUserDataCollection as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.acknowledgeUserDataCollection as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes acknowledgeUserDataCollection without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AcknowledgeUserDataCollectionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.AcknowledgeUserDataCollectionRequest',
        ['property']
      );
      request.property = defaultValue1;
      const expectedHeaderRequestParams = `property=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AcknowledgeUserDataCollectionResponse()
      );
      client.innerApiCalls.acknowledgeUserDataCollection =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.acknowledgeUserDataCollection(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAcknowledgeUserDataCollectionResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.acknowledgeUserDataCollection as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.acknowledgeUserDataCollection as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes acknowledgeUserDataCollection with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AcknowledgeUserDataCollectionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.AcknowledgeUserDataCollectionRequest',
        ['property']
      );
      request.property = defaultValue1;
      const expectedHeaderRequestParams = `property=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.acknowledgeUserDataCollection = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.acknowledgeUserDataCollection(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.acknowledgeUserDataCollection as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.acknowledgeUserDataCollection as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes acknowledgeUserDataCollection with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AcknowledgeUserDataCollectionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.AcknowledgeUserDataCollectionRequest',
        ['property']
      );
      request.property = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.acknowledgeUserDataCollection(request),
        expectedError
      );
    });
  });

  describe('getSKAdNetworkConversionValueSchema', () => {
    it('invokes getSKAdNetworkConversionValueSchema without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetSKAdNetworkConversionValueSchemaRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetSKAdNetworkConversionValueSchemaRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
      );
      client.innerApiCalls.getSkAdNetworkConversionValueSchema =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.getSKAdNetworkConversionValueSchema(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getSKAdNetworkConversionValueSchema without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetSKAdNetworkConversionValueSchemaRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetSKAdNetworkConversionValueSchemaRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
      );
      client.innerApiCalls.getSkAdNetworkConversionValueSchema =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getSKAdNetworkConversionValueSchema(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ISKAdNetworkConversionValueSchema | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getSKAdNetworkConversionValueSchema with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetSKAdNetworkConversionValueSchemaRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetSKAdNetworkConversionValueSchemaRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getSkAdNetworkConversionValueSchema = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.getSKAdNetworkConversionValueSchema(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.getSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getSKAdNetworkConversionValueSchema with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetSKAdNetworkConversionValueSchemaRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetSKAdNetworkConversionValueSchemaRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.getSKAdNetworkConversionValueSchema(request),
        expectedError
      );
    });
  });

  describe('createSKAdNetworkConversionValueSchema', () => {
    it('invokes createSKAdNetworkConversionValueSchema without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateSKAdNetworkConversionValueSchemaRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateSKAdNetworkConversionValueSchemaRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
      );
      client.innerApiCalls.createSkAdNetworkConversionValueSchema =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.createSKAdNetworkConversionValueSchema(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createSKAdNetworkConversionValueSchema without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateSKAdNetworkConversionValueSchemaRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateSKAdNetworkConversionValueSchemaRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
      );
      client.innerApiCalls.createSkAdNetworkConversionValueSchema =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createSKAdNetworkConversionValueSchema(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ISKAdNetworkConversionValueSchema | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createSKAdNetworkConversionValueSchema with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateSKAdNetworkConversionValueSchemaRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateSKAdNetworkConversionValueSchemaRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createSkAdNetworkConversionValueSchema =
        stubSimpleCall(undefined, expectedError);
      await assert.rejects(
        client.createSKAdNetworkConversionValueSchema(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.createSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createSKAdNetworkConversionValueSchema with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateSKAdNetworkConversionValueSchemaRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateSKAdNetworkConversionValueSchemaRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.createSKAdNetworkConversionValueSchema(request),
        expectedError
      );
    });
  });

  describe('deleteSKAdNetworkConversionValueSchema', () => {
    it('invokes deleteSKAdNetworkConversionValueSchema without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteSKAdNetworkConversionValueSchemaRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteSKAdNetworkConversionValueSchemaRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteSkAdNetworkConversionValueSchema =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.deleteSKAdNetworkConversionValueSchema(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteSKAdNetworkConversionValueSchema without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteSKAdNetworkConversionValueSchemaRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteSKAdNetworkConversionValueSchemaRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteSkAdNetworkConversionValueSchema =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteSKAdNetworkConversionValueSchema(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteSKAdNetworkConversionValueSchema with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteSKAdNetworkConversionValueSchemaRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteSKAdNetworkConversionValueSchemaRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteSkAdNetworkConversionValueSchema =
        stubSimpleCall(undefined, expectedError);
      await assert.rejects(
        client.deleteSKAdNetworkConversionValueSchema(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.deleteSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteSKAdNetworkConversionValueSchema with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteSKAdNetworkConversionValueSchemaRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteSKAdNetworkConversionValueSchemaRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.deleteSKAdNetworkConversionValueSchema(request),
        expectedError
      );
    });
  });

  describe('updateSKAdNetworkConversionValueSchema', () => {
    it('invokes updateSKAdNetworkConversionValueSchema without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateSKAdNetworkConversionValueSchemaRequest()
      );
      request.skadnetworkConversionValueSchema ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateSKAdNetworkConversionValueSchemaRequest',
        ['skadnetworkConversionValueSchema', 'name']
      );
      request.skadnetworkConversionValueSchema.name = defaultValue1;
      const expectedHeaderRequestParams = `skadnetwork_conversion_value_schema.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
      );
      client.innerApiCalls.updateSkAdNetworkConversionValueSchema =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.updateSKAdNetworkConversionValueSchema(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateSKAdNetworkConversionValueSchema without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateSKAdNetworkConversionValueSchemaRequest()
      );
      request.skadnetworkConversionValueSchema ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateSKAdNetworkConversionValueSchemaRequest',
        ['skadnetworkConversionValueSchema', 'name']
      );
      request.skadnetworkConversionValueSchema.name = defaultValue1;
      const expectedHeaderRequestParams = `skadnetwork_conversion_value_schema.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
      );
      client.innerApiCalls.updateSkAdNetworkConversionValueSchema =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateSKAdNetworkConversionValueSchema(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ISKAdNetworkConversionValueSchema | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateSKAdNetworkConversionValueSchema with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateSKAdNetworkConversionValueSchemaRequest()
      );
      request.skadnetworkConversionValueSchema ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateSKAdNetworkConversionValueSchemaRequest',
        ['skadnetworkConversionValueSchema', 'name']
      );
      request.skadnetworkConversionValueSchema.name = defaultValue1;
      const expectedHeaderRequestParams = `skadnetwork_conversion_value_schema.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateSkAdNetworkConversionValueSchema =
        stubSimpleCall(undefined, expectedError);
      await assert.rejects(
        client.updateSKAdNetworkConversionValueSchema(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateSkAdNetworkConversionValueSchema as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateSKAdNetworkConversionValueSchema with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateSKAdNetworkConversionValueSchemaRequest()
      );
      request.skadnetworkConversionValueSchema ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateSKAdNetworkConversionValueSchemaRequest',
        ['skadnetworkConversionValueSchema', 'name']
      );
      request.skadnetworkConversionValueSchema.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateSKAdNetworkConversionValueSchema(request),
        expectedError
      );
    });
  });

  describe('getGoogleSignalsSettings', () => {
    it('invokes getGoogleSignalsSettings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetGoogleSignalsSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetGoogleSignalsSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GoogleSignalsSettings()
      );
      client.innerApiCalls.getGoogleSignalsSettings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getGoogleSignalsSettings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getGoogleSignalsSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getGoogleSignalsSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getGoogleSignalsSettings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetGoogleSignalsSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetGoogleSignalsSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GoogleSignalsSettings()
      );
      client.innerApiCalls.getGoogleSignalsSettings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getGoogleSignalsSettings(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IGoogleSignalsSettings | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getGoogleSignalsSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getGoogleSignalsSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getGoogleSignalsSettings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetGoogleSignalsSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetGoogleSignalsSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getGoogleSignalsSettings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.getGoogleSignalsSettings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.getGoogleSignalsSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getGoogleSignalsSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getGoogleSignalsSettings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetGoogleSignalsSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetGoogleSignalsSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.getGoogleSignalsSettings(request),
        expectedError
      );
    });
  });

  describe('updateGoogleSignalsSettings', () => {
    it('invokes updateGoogleSignalsSettings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateGoogleSignalsSettingsRequest()
      );
      request.googleSignalsSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateGoogleSignalsSettingsRequest',
        ['googleSignalsSettings', 'name']
      );
      request.googleSignalsSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `google_signals_settings.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GoogleSignalsSettings()
      );
      client.innerApiCalls.updateGoogleSignalsSettings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateGoogleSignalsSettings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateGoogleSignalsSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateGoogleSignalsSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateGoogleSignalsSettings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateGoogleSignalsSettingsRequest()
      );
      request.googleSignalsSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateGoogleSignalsSettingsRequest',
        ['googleSignalsSettings', 'name']
      );
      request.googleSignalsSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `google_signals_settings.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GoogleSignalsSettings()
      );
      client.innerApiCalls.updateGoogleSignalsSettings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateGoogleSignalsSettings(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IGoogleSignalsSettings | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateGoogleSignalsSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateGoogleSignalsSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateGoogleSignalsSettings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateGoogleSignalsSettingsRequest()
      );
      request.googleSignalsSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateGoogleSignalsSettingsRequest',
        ['googleSignalsSettings', 'name']
      );
      request.googleSignalsSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `google_signals_settings.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateGoogleSignalsSettings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateGoogleSignalsSettings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateGoogleSignalsSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateGoogleSignalsSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateGoogleSignalsSettings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateGoogleSignalsSettingsRequest()
      );
      request.googleSignalsSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateGoogleSignalsSettingsRequest',
        ['googleSignalsSettings', 'name']
      );
      request.googleSignalsSettings.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateGoogleSignalsSettings(request),
        expectedError
      );
    });
  });

  describe('createConversionEvent', () => {
    it('invokes createConversionEvent without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateConversionEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateConversionEventRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ConversionEvent()
      );
      client.innerApiCalls.createConversionEvent =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createConversionEvent(request);
      assert(stub.calledOnce);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createConversionEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createConversionEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createConversionEvent without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateConversionEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateConversionEventRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ConversionEvent()
      );
      client.innerApiCalls.createConversionEvent =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createConversionEvent(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IConversionEvent | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert(stub.calledOnce);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createConversionEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createConversionEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createConversionEvent with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateConversionEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateConversionEventRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createConversionEvent = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.createConversionEvent(request),
        expectedError
      );
      assert(stub.calledOnce);
      const actualRequest = (
        client.innerApiCalls.createConversionEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createConversionEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createConversionEvent with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateConversionEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateConversionEventRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.createConversionEvent(request),
        expectedError
      );
      assert(stub.calledOnce);
    });
  });

  describe('updateConversionEvent', () => {
    it('invokes updateConversionEvent without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateConversionEventRequest()
      );
      request.conversionEvent ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateConversionEventRequest',
        ['conversionEvent', 'name']
      );
      request.conversionEvent.name = defaultValue1;
      const expectedHeaderRequestParams = `conversion_event.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ConversionEvent()
      );
      client.innerApiCalls.updateConversionEvent =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateConversionEvent(request);
      assert(stub.calledOnce);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateConversionEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateConversionEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateConversionEvent without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateConversionEventRequest()
      );
      request.conversionEvent ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateConversionEventRequest',
        ['conversionEvent', 'name']
      );
      request.conversionEvent.name = defaultValue1;
      const expectedHeaderRequestParams = `conversion_event.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ConversionEvent()
      );
      client.innerApiCalls.updateConversionEvent =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateConversionEvent(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IConversionEvent | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert(stub.calledOnce);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateConversionEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateConversionEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateConversionEvent with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateConversionEventRequest()
      );
      request.conversionEvent ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateConversionEventRequest',
        ['conversionEvent', 'name']
      );
      request.conversionEvent.name = defaultValue1;
      const expectedHeaderRequestParams = `conversion_event.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateConversionEvent = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateConversionEvent(request),
        expectedError
      );
      assert(stub.calledOnce);
      const actualRequest = (
        client.innerApiCalls.updateConversionEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateConversionEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateConversionEvent with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateConversionEventRequest()
      );
      request.conversionEvent ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateConversionEventRequest',
        ['conversionEvent', 'name']
      );
      request.conversionEvent.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateConversionEvent(request),
        expectedError
      );
      assert(stub.calledOnce);
    });
  });

  describe('getConversionEvent', () => {
    it('invokes getConversionEvent without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetConversionEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetConversionEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ConversionEvent()
      );
      client.innerApiCalls.getConversionEvent =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getConversionEvent(request);
      assert(stub.calledOnce);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getConversionEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getConversionEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getConversionEvent without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetConversionEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetConversionEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ConversionEvent()
      );
      client.innerApiCalls.getConversionEvent =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getConversionEvent(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IConversionEvent | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert(stub.calledOnce);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getConversionEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getConversionEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getConversionEvent with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetConversionEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetConversionEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getConversionEvent = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getConversionEvent(request), expectedError);
      assert(stub.calledOnce);
      const actualRequest = (
        client.innerApiCalls.getConversionEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getConversionEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getConversionEvent with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetConversionEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetConversionEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getConversionEvent(request), expectedError);
      assert(stub.calledOnce);
    });
  });

  describe('deleteConversionEvent', () => {
    it('invokes deleteConversionEvent without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteConversionEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteConversionEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteConversionEvent =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteConversionEvent(request);
      assert(stub.calledOnce);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteConversionEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteConversionEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteConversionEvent without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteConversionEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteConversionEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteConversionEvent =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteConversionEvent(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert(stub.calledOnce);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteConversionEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteConversionEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteConversionEvent with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteConversionEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteConversionEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteConversionEvent = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.deleteConversionEvent(request),
        expectedError
      );
      assert(stub.calledOnce);
      const actualRequest = (
        client.innerApiCalls.deleteConversionEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteConversionEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteConversionEvent with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteConversionEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteConversionEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.deleteConversionEvent(request),
        expectedError
      );
      assert(stub.calledOnce);
    });
  });

  describe('createKeyEvent', () => {
    it('invokes createKeyEvent without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateKeyEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateKeyEventRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.KeyEvent()
      );
      client.innerApiCalls.createKeyEvent = stubSimpleCall(expectedResponse);
      const [response] = await client.createKeyEvent(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createKeyEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createKeyEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createKeyEvent without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateKeyEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateKeyEventRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.KeyEvent()
      );
      client.innerApiCalls.createKeyEvent =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createKeyEvent(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IKeyEvent | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createKeyEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createKeyEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createKeyEvent with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateKeyEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateKeyEventRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createKeyEvent = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.createKeyEvent(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.createKeyEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createKeyEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createKeyEvent with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateKeyEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateKeyEventRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.createKeyEvent(request), expectedError);
    });
  });

  describe('updateKeyEvent', () => {
    it('invokes updateKeyEvent without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateKeyEventRequest()
      );
      request.keyEvent ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateKeyEventRequest',
        ['keyEvent', 'name']
      );
      request.keyEvent.name = defaultValue1;
      const expectedHeaderRequestParams = `key_event.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.KeyEvent()
      );
      client.innerApiCalls.updateKeyEvent = stubSimpleCall(expectedResponse);
      const [response] = await client.updateKeyEvent(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateKeyEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateKeyEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateKeyEvent without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateKeyEventRequest()
      );
      request.keyEvent ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateKeyEventRequest',
        ['keyEvent', 'name']
      );
      request.keyEvent.name = defaultValue1;
      const expectedHeaderRequestParams = `key_event.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.KeyEvent()
      );
      client.innerApiCalls.updateKeyEvent =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateKeyEvent(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IKeyEvent | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateKeyEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateKeyEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateKeyEvent with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateKeyEventRequest()
      );
      request.keyEvent ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateKeyEventRequest',
        ['keyEvent', 'name']
      );
      request.keyEvent.name = defaultValue1;
      const expectedHeaderRequestParams = `key_event.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateKeyEvent = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.updateKeyEvent(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.updateKeyEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateKeyEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateKeyEvent with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateKeyEventRequest()
      );
      request.keyEvent ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateKeyEventRequest',
        ['keyEvent', 'name']
      );
      request.keyEvent.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.updateKeyEvent(request), expectedError);
    });
  });

  describe('getKeyEvent', () => {
    it('invokes getKeyEvent without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetKeyEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetKeyEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.KeyEvent()
      );
      client.innerApiCalls.getKeyEvent = stubSimpleCall(expectedResponse);
      const [response] = await client.getKeyEvent(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getKeyEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getKeyEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getKeyEvent without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetKeyEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetKeyEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.KeyEvent()
      );
      client.innerApiCalls.getKeyEvent =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getKeyEvent(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IKeyEvent | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getKeyEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getKeyEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getKeyEvent with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetKeyEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetKeyEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getKeyEvent = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getKeyEvent(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getKeyEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getKeyEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getKeyEvent with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetKeyEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetKeyEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getKeyEvent(request), expectedError);
    });
  });

  describe('deleteKeyEvent', () => {
    it('invokes deleteKeyEvent without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteKeyEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteKeyEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteKeyEvent = stubSimpleCall(expectedResponse);
      const [response] = await client.deleteKeyEvent(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteKeyEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteKeyEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteKeyEvent without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteKeyEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteKeyEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteKeyEvent =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteKeyEvent(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteKeyEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteKeyEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteKeyEvent with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteKeyEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteKeyEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteKeyEvent = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.deleteKeyEvent(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.deleteKeyEvent as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteKeyEvent as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteKeyEvent with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteKeyEventRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteKeyEventRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.deleteKeyEvent(request), expectedError);
    });
  });

  describe('getDisplayVideo360AdvertiserLink', () => {
    it('invokes getDisplayVideo360AdvertiserLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
      );
      client.innerApiCalls.getDisplayVideo360AdvertiserLink =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getDisplayVideo360AdvertiserLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDisplayVideo360AdvertiserLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
      );
      client.innerApiCalls.getDisplayVideo360AdvertiserLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getDisplayVideo360AdvertiserLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDisplayVideo360AdvertiserLink | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDisplayVideo360AdvertiserLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getDisplayVideo360AdvertiserLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.getDisplayVideo360AdvertiserLink(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.getDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDisplayVideo360AdvertiserLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.getDisplayVideo360AdvertiserLink(request),
        expectedError
      );
    });
  });

  describe('createDisplayVideo360AdvertiserLink', () => {
    it('invokes createDisplayVideo360AdvertiserLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
      );
      client.innerApiCalls.createDisplayVideo360AdvertiserLink =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.createDisplayVideo360AdvertiserLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createDisplayVideo360AdvertiserLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
      );
      client.innerApiCalls.createDisplayVideo360AdvertiserLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createDisplayVideo360AdvertiserLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDisplayVideo360AdvertiserLink | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createDisplayVideo360AdvertiserLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createDisplayVideo360AdvertiserLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.createDisplayVideo360AdvertiserLink(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.createDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createDisplayVideo360AdvertiserLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.createDisplayVideo360AdvertiserLink(request),
        expectedError
      );
    });
  });

  describe('deleteDisplayVideo360AdvertiserLink', () => {
    it('invokes deleteDisplayVideo360AdvertiserLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteDisplayVideo360AdvertiserLink =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.deleteDisplayVideo360AdvertiserLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteDisplayVideo360AdvertiserLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteDisplayVideo360AdvertiserLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteDisplayVideo360AdvertiserLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteDisplayVideo360AdvertiserLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteDisplayVideo360AdvertiserLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.deleteDisplayVideo360AdvertiserLink(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.deleteDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteDisplayVideo360AdvertiserLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.deleteDisplayVideo360AdvertiserLink(request),
        expectedError
      );
    });
  });

  describe('updateDisplayVideo360AdvertiserLink', () => {
    it('invokes updateDisplayVideo360AdvertiserLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDisplayVideo360AdvertiserLinkRequest()
      );
      request.displayVideo_360AdvertiserLink ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDisplayVideo360AdvertiserLinkRequest',
        ['displayVideo_360AdvertiserLink', 'name']
      );
      request.displayVideo_360AdvertiserLink.name = defaultValue1;
      const expectedHeaderRequestParams = `display_video_360_advertiser_link.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
      );
      client.innerApiCalls.updateDisplayVideo360AdvertiserLink =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.updateDisplayVideo360AdvertiserLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateDisplayVideo360AdvertiserLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDisplayVideo360AdvertiserLinkRequest()
      );
      request.displayVideo_360AdvertiserLink ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDisplayVideo360AdvertiserLinkRequest',
        ['displayVideo_360AdvertiserLink', 'name']
      );
      request.displayVideo_360AdvertiserLink.name = defaultValue1;
      const expectedHeaderRequestParams = `display_video_360_advertiser_link.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
      );
      client.innerApiCalls.updateDisplayVideo360AdvertiserLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateDisplayVideo360AdvertiserLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDisplayVideo360AdvertiserLink | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateDisplayVideo360AdvertiserLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDisplayVideo360AdvertiserLinkRequest()
      );
      request.displayVideo_360AdvertiserLink ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDisplayVideo360AdvertiserLinkRequest',
        ['displayVideo_360AdvertiserLink', 'name']
      );
      request.displayVideo_360AdvertiserLink.name = defaultValue1;
      const expectedHeaderRequestParams = `display_video_360_advertiser_link.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateDisplayVideo360AdvertiserLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateDisplayVideo360AdvertiserLink(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateDisplayVideo360AdvertiserLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateDisplayVideo360AdvertiserLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDisplayVideo360AdvertiserLinkRequest()
      );
      request.displayVideo_360AdvertiserLink ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDisplayVideo360AdvertiserLinkRequest',
        ['displayVideo_360AdvertiserLink', 'name']
      );
      request.displayVideo_360AdvertiserLink.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateDisplayVideo360AdvertiserLink(request),
        expectedError
      );
    });
  });

  describe('getDisplayVideo360AdvertiserLinkProposal', () => {
    it('invokes getDisplayVideo360AdvertiserLinkProposal without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
      );
      client.innerApiCalls.getDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.getDisplayVideo360AdvertiserLinkProposal(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls
          .getDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .getDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDisplayVideo360AdvertiserLinkProposal without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
      );
      client.innerApiCalls.getDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getDisplayVideo360AdvertiserLinkProposal(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDisplayVideo360AdvertiserLinkProposal | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls
          .getDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .getDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDisplayVideo360AdvertiserLinkProposal with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCall(undefined, expectedError);
      await assert.rejects(
        client.getDisplayVideo360AdvertiserLinkProposal(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls
          .getDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .getDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDisplayVideo360AdvertiserLinkProposal with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.getDisplayVideo360AdvertiserLinkProposal(request),
        expectedError
      );
    });
  });

  describe('createDisplayVideo360AdvertiserLinkProposal', () => {
    it('invokes createDisplayVideo360AdvertiserLinkProposal without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkProposalRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
      );
      client.innerApiCalls.createDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.createDisplayVideo360AdvertiserLinkProposal(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls
          .createDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .createDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createDisplayVideo360AdvertiserLinkProposal without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkProposalRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
      );
      client.innerApiCalls.createDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createDisplayVideo360AdvertiserLinkProposal(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDisplayVideo360AdvertiserLinkProposal | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls
          .createDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .createDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createDisplayVideo360AdvertiserLinkProposal with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkProposalRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCall(undefined, expectedError);
      await assert.rejects(
        client.createDisplayVideo360AdvertiserLinkProposal(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls
          .createDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .createDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createDisplayVideo360AdvertiserLinkProposal with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateDisplayVideo360AdvertiserLinkProposalRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.createDisplayVideo360AdvertiserLinkProposal(request),
        expectedError
      );
    });
  });

  describe('deleteDisplayVideo360AdvertiserLinkProposal', () => {
    it('invokes deleteDisplayVideo360AdvertiserLinkProposal without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.deleteDisplayVideo360AdvertiserLinkProposal(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls
          .deleteDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .deleteDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteDisplayVideo360AdvertiserLinkProposal without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteDisplayVideo360AdvertiserLinkProposal(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls
          .deleteDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .deleteDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteDisplayVideo360AdvertiserLinkProposal with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCall(undefined, expectedError);
      await assert.rejects(
        client.deleteDisplayVideo360AdvertiserLinkProposal(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls
          .deleteDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .deleteDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteDisplayVideo360AdvertiserLinkProposal with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.deleteDisplayVideo360AdvertiserLinkProposal(request),
        expectedError
      );
    });
  });

  describe('approveDisplayVideo360AdvertiserLinkProposal', () => {
    it('invokes approveDisplayVideo360AdvertiserLinkProposal without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ApproveDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ApproveDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ApproveDisplayVideo360AdvertiserLinkProposalResponse()
      );
      client.innerApiCalls.approveDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.approveDisplayVideo360AdvertiserLinkProposal(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls
          .approveDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .approveDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes approveDisplayVideo360AdvertiserLinkProposal without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ApproveDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ApproveDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ApproveDisplayVideo360AdvertiserLinkProposalResponse()
      );
      client.innerApiCalls.approveDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.approveDisplayVideo360AdvertiserLinkProposal(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IApproveDisplayVideo360AdvertiserLinkProposalResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls
          .approveDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .approveDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes approveDisplayVideo360AdvertiserLinkProposal with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ApproveDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ApproveDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.approveDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCall(undefined, expectedError);
      await assert.rejects(
        client.approveDisplayVideo360AdvertiserLinkProposal(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls
          .approveDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .approveDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes approveDisplayVideo360AdvertiserLinkProposal with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ApproveDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ApproveDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.approveDisplayVideo360AdvertiserLinkProposal(request),
        expectedError
      );
    });
  });

  describe('cancelDisplayVideo360AdvertiserLinkProposal', () => {
    it('invokes cancelDisplayVideo360AdvertiserLinkProposal without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CancelDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CancelDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
      );
      client.innerApiCalls.cancelDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.cancelDisplayVideo360AdvertiserLinkProposal(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls
          .cancelDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .cancelDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes cancelDisplayVideo360AdvertiserLinkProposal without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CancelDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CancelDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
      );
      client.innerApiCalls.cancelDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.cancelDisplayVideo360AdvertiserLinkProposal(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDisplayVideo360AdvertiserLinkProposal | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls
          .cancelDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .cancelDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes cancelDisplayVideo360AdvertiserLinkProposal with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CancelDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CancelDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.cancelDisplayVideo360AdvertiserLinkProposal =
        stubSimpleCall(undefined, expectedError);
      await assert.rejects(
        client.cancelDisplayVideo360AdvertiserLinkProposal(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls
          .cancelDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .cancelDisplayVideo360AdvertiserLinkProposal as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes cancelDisplayVideo360AdvertiserLinkProposal with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CancelDisplayVideo360AdvertiserLinkProposalRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CancelDisplayVideo360AdvertiserLinkProposalRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.cancelDisplayVideo360AdvertiserLinkProposal(request),
        expectedError
      );
    });
  });

  describe('createCustomDimension', () => {
    it('invokes createCustomDimension without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateCustomDimensionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateCustomDimensionRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CustomDimension()
      );
      client.innerApiCalls.createCustomDimension =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createCustomDimension(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createCustomDimension as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createCustomDimension as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createCustomDimension without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateCustomDimensionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateCustomDimensionRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CustomDimension()
      );
      client.innerApiCalls.createCustomDimension =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createCustomDimension(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ICustomDimension | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createCustomDimension as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createCustomDimension as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createCustomDimension with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateCustomDimensionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateCustomDimensionRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createCustomDimension = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.createCustomDimension(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.createCustomDimension as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createCustomDimension as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createCustomDimension with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateCustomDimensionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateCustomDimensionRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.createCustomDimension(request),
        expectedError
      );
    });
  });

  describe('updateCustomDimension', () => {
    it('invokes updateCustomDimension without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateCustomDimensionRequest()
      );
      request.customDimension ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateCustomDimensionRequest',
        ['customDimension', 'name']
      );
      request.customDimension.name = defaultValue1;
      const expectedHeaderRequestParams = `custom_dimension.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CustomDimension()
      );
      client.innerApiCalls.updateCustomDimension =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateCustomDimension(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateCustomDimension as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateCustomDimension as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateCustomDimension without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateCustomDimensionRequest()
      );
      request.customDimension ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateCustomDimensionRequest',
        ['customDimension', 'name']
      );
      request.customDimension.name = defaultValue1;
      const expectedHeaderRequestParams = `custom_dimension.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CustomDimension()
      );
      client.innerApiCalls.updateCustomDimension =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateCustomDimension(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ICustomDimension | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateCustomDimension as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateCustomDimension as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateCustomDimension with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateCustomDimensionRequest()
      );
      request.customDimension ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateCustomDimensionRequest',
        ['customDimension', 'name']
      );
      request.customDimension.name = defaultValue1;
      const expectedHeaderRequestParams = `custom_dimension.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateCustomDimension = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateCustomDimension(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateCustomDimension as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateCustomDimension as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateCustomDimension with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateCustomDimensionRequest()
      );
      request.customDimension ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateCustomDimensionRequest',
        ['customDimension', 'name']
      );
      request.customDimension.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateCustomDimension(request),
        expectedError
      );
    });
  });

  describe('archiveCustomDimension', () => {
    it('invokes archiveCustomDimension without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ArchiveCustomDimensionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ArchiveCustomDimensionRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.archiveCustomDimension =
        stubSimpleCall(expectedResponse);
      const [response] = await client.archiveCustomDimension(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.archiveCustomDimension as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.archiveCustomDimension as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes archiveCustomDimension without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ArchiveCustomDimensionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ArchiveCustomDimensionRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.archiveCustomDimension =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.archiveCustomDimension(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.archiveCustomDimension as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.archiveCustomDimension as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes archiveCustomDimension with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ArchiveCustomDimensionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ArchiveCustomDimensionRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.archiveCustomDimension = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.archiveCustomDimension(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.archiveCustomDimension as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.archiveCustomDimension as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes archiveCustomDimension with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ArchiveCustomDimensionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ArchiveCustomDimensionRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.archiveCustomDimension(request),
        expectedError
      );
    });
  });

  describe('getCustomDimension', () => {
    it('invokes getCustomDimension without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetCustomDimensionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetCustomDimensionRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CustomDimension()
      );
      client.innerApiCalls.getCustomDimension =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getCustomDimension(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getCustomDimension as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getCustomDimension as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getCustomDimension without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetCustomDimensionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetCustomDimensionRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CustomDimension()
      );
      client.innerApiCalls.getCustomDimension =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getCustomDimension(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ICustomDimension | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getCustomDimension as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getCustomDimension as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getCustomDimension with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetCustomDimensionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetCustomDimensionRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getCustomDimension = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getCustomDimension(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getCustomDimension as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getCustomDimension as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getCustomDimension with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetCustomDimensionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetCustomDimensionRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getCustomDimension(request), expectedError);
    });
  });

  describe('createCustomMetric', () => {
    it('invokes createCustomMetric without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateCustomMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateCustomMetricRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CustomMetric()
      );
      client.innerApiCalls.createCustomMetric =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createCustomMetric(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createCustomMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createCustomMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createCustomMetric without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateCustomMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateCustomMetricRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CustomMetric()
      );
      client.innerApiCalls.createCustomMetric =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createCustomMetric(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ICustomMetric | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createCustomMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createCustomMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createCustomMetric with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateCustomMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateCustomMetricRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createCustomMetric = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.createCustomMetric(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.createCustomMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createCustomMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createCustomMetric with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateCustomMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateCustomMetricRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.createCustomMetric(request), expectedError);
    });
  });

  describe('updateCustomMetric', () => {
    it('invokes updateCustomMetric without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateCustomMetricRequest()
      );
      request.customMetric ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateCustomMetricRequest',
        ['customMetric', 'name']
      );
      request.customMetric.name = defaultValue1;
      const expectedHeaderRequestParams = `custom_metric.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CustomMetric()
      );
      client.innerApiCalls.updateCustomMetric =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateCustomMetric(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateCustomMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateCustomMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateCustomMetric without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateCustomMetricRequest()
      );
      request.customMetric ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateCustomMetricRequest',
        ['customMetric', 'name']
      );
      request.customMetric.name = defaultValue1;
      const expectedHeaderRequestParams = `custom_metric.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CustomMetric()
      );
      client.innerApiCalls.updateCustomMetric =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateCustomMetric(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ICustomMetric | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateCustomMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateCustomMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateCustomMetric with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateCustomMetricRequest()
      );
      request.customMetric ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateCustomMetricRequest',
        ['customMetric', 'name']
      );
      request.customMetric.name = defaultValue1;
      const expectedHeaderRequestParams = `custom_metric.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateCustomMetric = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.updateCustomMetric(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.updateCustomMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateCustomMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateCustomMetric with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateCustomMetricRequest()
      );
      request.customMetric ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateCustomMetricRequest',
        ['customMetric', 'name']
      );
      request.customMetric.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.updateCustomMetric(request), expectedError);
    });
  });

  describe('archiveCustomMetric', () => {
    it('invokes archiveCustomMetric without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ArchiveCustomMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ArchiveCustomMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.archiveCustomMetric =
        stubSimpleCall(expectedResponse);
      const [response] = await client.archiveCustomMetric(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.archiveCustomMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.archiveCustomMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes archiveCustomMetric without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ArchiveCustomMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ArchiveCustomMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.archiveCustomMetric =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.archiveCustomMetric(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.archiveCustomMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.archiveCustomMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes archiveCustomMetric with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ArchiveCustomMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ArchiveCustomMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.archiveCustomMetric = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.archiveCustomMetric(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.archiveCustomMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.archiveCustomMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes archiveCustomMetric with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ArchiveCustomMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ArchiveCustomMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.archiveCustomMetric(request), expectedError);
    });
  });

  describe('getCustomMetric', () => {
    it('invokes getCustomMetric without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetCustomMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetCustomMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CustomMetric()
      );
      client.innerApiCalls.getCustomMetric = stubSimpleCall(expectedResponse);
      const [response] = await client.getCustomMetric(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getCustomMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getCustomMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getCustomMetric without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetCustomMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetCustomMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CustomMetric()
      );
      client.innerApiCalls.getCustomMetric =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getCustomMetric(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ICustomMetric | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getCustomMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getCustomMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getCustomMetric with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetCustomMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetCustomMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getCustomMetric = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getCustomMetric(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getCustomMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getCustomMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getCustomMetric with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetCustomMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetCustomMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getCustomMetric(request), expectedError);
    });
  });

  describe('getDataRetentionSettings', () => {
    it('invokes getDataRetentionSettings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataRetentionSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataRetentionSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataRetentionSettings()
      );
      client.innerApiCalls.getDataRetentionSettings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getDataRetentionSettings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getDataRetentionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDataRetentionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDataRetentionSettings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataRetentionSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataRetentionSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataRetentionSettings()
      );
      client.innerApiCalls.getDataRetentionSettings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getDataRetentionSettings(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDataRetentionSettings | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getDataRetentionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDataRetentionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDataRetentionSettings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataRetentionSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataRetentionSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getDataRetentionSettings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.getDataRetentionSettings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.getDataRetentionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDataRetentionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDataRetentionSettings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataRetentionSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataRetentionSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.getDataRetentionSettings(request),
        expectedError
      );
    });
  });

  describe('updateDataRetentionSettings', () => {
    it('invokes updateDataRetentionSettings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDataRetentionSettingsRequest()
      );
      request.dataRetentionSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDataRetentionSettingsRequest',
        ['dataRetentionSettings', 'name']
      );
      request.dataRetentionSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `data_retention_settings.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataRetentionSettings()
      );
      client.innerApiCalls.updateDataRetentionSettings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateDataRetentionSettings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateDataRetentionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateDataRetentionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateDataRetentionSettings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDataRetentionSettingsRequest()
      );
      request.dataRetentionSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDataRetentionSettingsRequest',
        ['dataRetentionSettings', 'name']
      );
      request.dataRetentionSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `data_retention_settings.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataRetentionSettings()
      );
      client.innerApiCalls.updateDataRetentionSettings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateDataRetentionSettings(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDataRetentionSettings | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateDataRetentionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateDataRetentionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateDataRetentionSettings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDataRetentionSettingsRequest()
      );
      request.dataRetentionSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDataRetentionSettingsRequest',
        ['dataRetentionSettings', 'name']
      );
      request.dataRetentionSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `data_retention_settings.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateDataRetentionSettings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateDataRetentionSettings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateDataRetentionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateDataRetentionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateDataRetentionSettings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDataRetentionSettingsRequest()
      );
      request.dataRetentionSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDataRetentionSettingsRequest',
        ['dataRetentionSettings', 'name']
      );
      request.dataRetentionSettings.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateDataRetentionSettings(request),
        expectedError
      );
    });
  });

  describe('createDataStream', () => {
    it('invokes createDataStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateDataStreamRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateDataStreamRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataStream()
      );
      client.innerApiCalls.createDataStream = stubSimpleCall(expectedResponse);
      const [response] = await client.createDataStream(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createDataStream as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createDataStream as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createDataStream without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateDataStreamRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateDataStreamRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataStream()
      );
      client.innerApiCalls.createDataStream =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createDataStream(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDataStream | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createDataStream as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createDataStream as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createDataStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateDataStreamRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateDataStreamRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createDataStream = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.createDataStream(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.createDataStream as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createDataStream as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createDataStream with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateDataStreamRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateDataStreamRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.createDataStream(request), expectedError);
    });
  });

  describe('deleteDataStream', () => {
    it('invokes deleteDataStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteDataStreamRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteDataStreamRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteDataStream = stubSimpleCall(expectedResponse);
      const [response] = await client.deleteDataStream(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteDataStream as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteDataStream as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteDataStream without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteDataStreamRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteDataStreamRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteDataStream =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteDataStream(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteDataStream as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteDataStream as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteDataStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteDataStreamRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteDataStreamRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteDataStream = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.deleteDataStream(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.deleteDataStream as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteDataStream as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteDataStream with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteDataStreamRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteDataStreamRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.deleteDataStream(request), expectedError);
    });
  });

  describe('updateDataStream', () => {
    it('invokes updateDataStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDataStreamRequest()
      );
      request.dataStream ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDataStreamRequest',
        ['dataStream', 'name']
      );
      request.dataStream.name = defaultValue1;
      const expectedHeaderRequestParams = `data_stream.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataStream()
      );
      client.innerApiCalls.updateDataStream = stubSimpleCall(expectedResponse);
      const [response] = await client.updateDataStream(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateDataStream as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateDataStream as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateDataStream without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDataStreamRequest()
      );
      request.dataStream ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDataStreamRequest',
        ['dataStream', 'name']
      );
      request.dataStream.name = defaultValue1;
      const expectedHeaderRequestParams = `data_stream.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataStream()
      );
      client.innerApiCalls.updateDataStream =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateDataStream(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDataStream | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateDataStream as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateDataStream as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateDataStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDataStreamRequest()
      );
      request.dataStream ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDataStreamRequest',
        ['dataStream', 'name']
      );
      request.dataStream.name = defaultValue1;
      const expectedHeaderRequestParams = `data_stream.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateDataStream = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.updateDataStream(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.updateDataStream as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateDataStream as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateDataStream with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDataStreamRequest()
      );
      request.dataStream ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDataStreamRequest',
        ['dataStream', 'name']
      );
      request.dataStream.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.updateDataStream(request), expectedError);
    });
  });

  describe('getDataStream', () => {
    it('invokes getDataStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataStreamRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataStreamRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataStream()
      );
      client.innerApiCalls.getDataStream = stubSimpleCall(expectedResponse);
      const [response] = await client.getDataStream(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getDataStream as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDataStream as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDataStream without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataStreamRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataStreamRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataStream()
      );
      client.innerApiCalls.getDataStream =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getDataStream(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDataStream | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getDataStream as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDataStream as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDataStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataStreamRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataStreamRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getDataStream = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getDataStream(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getDataStream as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDataStream as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDataStream with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataStreamRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataStreamRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getDataStream(request), expectedError);
    });
  });

  describe('getAudience', () => {
    it('invokes getAudience without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAudienceRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAudienceRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Audience()
      );
      client.innerApiCalls.getAudience = stubSimpleCall(expectedResponse);
      const [response] = await client.getAudience(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getAudience as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAudience as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAudience without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAudienceRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAudienceRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Audience()
      );
      client.innerApiCalls.getAudience =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getAudience(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAudience | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getAudience as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAudience as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAudience with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAudienceRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAudienceRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getAudience = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getAudience(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getAudience as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAudience as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAudience with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAudienceRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAudienceRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getAudience(request), expectedError);
    });
  });

  describe('createAudience', () => {
    it('invokes createAudience without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateAudienceRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateAudienceRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Audience()
      );
      client.innerApiCalls.createAudience = stubSimpleCall(expectedResponse);
      const [response] = await client.createAudience(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createAudience as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createAudience as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createAudience without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateAudienceRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateAudienceRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Audience()
      );
      client.innerApiCalls.createAudience =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createAudience(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAudience | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createAudience as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createAudience as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createAudience with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateAudienceRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateAudienceRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createAudience = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.createAudience(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.createAudience as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createAudience as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createAudience with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateAudienceRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateAudienceRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.createAudience(request), expectedError);
    });
  });

  describe('updateAudience', () => {
    it('invokes updateAudience without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAudienceRequest()
      );
      request.audience ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAudienceRequest',
        ['audience', 'name']
      );
      request.audience.name = defaultValue1;
      const expectedHeaderRequestParams = `audience.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Audience()
      );
      client.innerApiCalls.updateAudience = stubSimpleCall(expectedResponse);
      const [response] = await client.updateAudience(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateAudience as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateAudience as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateAudience without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAudienceRequest()
      );
      request.audience ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAudienceRequest',
        ['audience', 'name']
      );
      request.audience.name = defaultValue1;
      const expectedHeaderRequestParams = `audience.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.Audience()
      );
      client.innerApiCalls.updateAudience =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateAudience(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAudience | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateAudience as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateAudience as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateAudience with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAudienceRequest()
      );
      request.audience ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAudienceRequest',
        ['audience', 'name']
      );
      request.audience.name = defaultValue1;
      const expectedHeaderRequestParams = `audience.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateAudience = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.updateAudience(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.updateAudience as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateAudience as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateAudience with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAudienceRequest()
      );
      request.audience ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAudienceRequest',
        ['audience', 'name']
      );
      request.audience.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.updateAudience(request), expectedError);
    });
  });

  describe('archiveAudience', () => {
    it('invokes archiveAudience without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ArchiveAudienceRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ArchiveAudienceRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.archiveAudience = stubSimpleCall(expectedResponse);
      const [response] = await client.archiveAudience(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.archiveAudience as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.archiveAudience as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes archiveAudience without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ArchiveAudienceRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ArchiveAudienceRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.archiveAudience =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.archiveAudience(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.archiveAudience as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.archiveAudience as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes archiveAudience with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ArchiveAudienceRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ArchiveAudienceRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.archiveAudience = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.archiveAudience(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.archiveAudience as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.archiveAudience as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes archiveAudience with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ArchiveAudienceRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ArchiveAudienceRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.archiveAudience(request), expectedError);
    });
  });

  describe('getSearchAds360Link', () => {
    it('invokes getSearchAds360Link without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetSearchAds360LinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetSearchAds360LinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SearchAds360Link()
      );
      client.innerApiCalls.getSearchAds360Link =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getSearchAds360Link(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getSearchAds360Link as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getSearchAds360Link as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getSearchAds360Link without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetSearchAds360LinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetSearchAds360LinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SearchAds360Link()
      );
      client.innerApiCalls.getSearchAds360Link =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getSearchAds360Link(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ISearchAds360Link | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getSearchAds360Link as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getSearchAds360Link as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getSearchAds360Link with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetSearchAds360LinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetSearchAds360LinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getSearchAds360Link = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getSearchAds360Link(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getSearchAds360Link as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getSearchAds360Link as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getSearchAds360Link with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetSearchAds360LinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetSearchAds360LinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getSearchAds360Link(request), expectedError);
    });
  });

  describe('createSearchAds360Link', () => {
    it('invokes createSearchAds360Link without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateSearchAds360LinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateSearchAds360LinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SearchAds360Link()
      );
      client.innerApiCalls.createSearchAds360Link =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createSearchAds360Link(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createSearchAds360Link as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createSearchAds360Link as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createSearchAds360Link without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateSearchAds360LinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateSearchAds360LinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SearchAds360Link()
      );
      client.innerApiCalls.createSearchAds360Link =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createSearchAds360Link(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ISearchAds360Link | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createSearchAds360Link as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createSearchAds360Link as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createSearchAds360Link with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateSearchAds360LinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateSearchAds360LinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createSearchAds360Link = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.createSearchAds360Link(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.createSearchAds360Link as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createSearchAds360Link as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createSearchAds360Link with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateSearchAds360LinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateSearchAds360LinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.createSearchAds360Link(request),
        expectedError
      );
    });
  });

  describe('deleteSearchAds360Link', () => {
    it('invokes deleteSearchAds360Link without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteSearchAds360LinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteSearchAds360LinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteSearchAds360Link =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteSearchAds360Link(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteSearchAds360Link as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteSearchAds360Link as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteSearchAds360Link without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteSearchAds360LinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteSearchAds360LinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteSearchAds360Link =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteSearchAds360Link(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteSearchAds360Link as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteSearchAds360Link as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteSearchAds360Link with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteSearchAds360LinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteSearchAds360LinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteSearchAds360Link = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.deleteSearchAds360Link(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.deleteSearchAds360Link as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteSearchAds360Link as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteSearchAds360Link with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteSearchAds360LinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteSearchAds360LinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.deleteSearchAds360Link(request),
        expectedError
      );
    });
  });

  describe('updateSearchAds360Link', () => {
    it('invokes updateSearchAds360Link without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateSearchAds360LinkRequest()
      );
      request.searchAds_360Link ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateSearchAds360LinkRequest',
        ['searchAds_360Link', 'name']
      );
      request.searchAds_360Link.name = defaultValue1;
      const expectedHeaderRequestParams = `search_ads_360_link.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SearchAds360Link()
      );
      client.innerApiCalls.updateSearchAds360Link =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateSearchAds360Link(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateSearchAds360Link as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateSearchAds360Link as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateSearchAds360Link without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateSearchAds360LinkRequest()
      );
      request.searchAds_360Link ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateSearchAds360LinkRequest',
        ['searchAds_360Link', 'name']
      );
      request.searchAds_360Link.name = defaultValue1;
      const expectedHeaderRequestParams = `search_ads_360_link.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SearchAds360Link()
      );
      client.innerApiCalls.updateSearchAds360Link =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateSearchAds360Link(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ISearchAds360Link | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateSearchAds360Link as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateSearchAds360Link as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateSearchAds360Link with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateSearchAds360LinkRequest()
      );
      request.searchAds_360Link ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateSearchAds360LinkRequest',
        ['searchAds_360Link', 'name']
      );
      request.searchAds_360Link.name = defaultValue1;
      const expectedHeaderRequestParams = `search_ads_360_link.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateSearchAds360Link = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateSearchAds360Link(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateSearchAds360Link as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateSearchAds360Link as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateSearchAds360Link with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateSearchAds360LinkRequest()
      );
      request.searchAds_360Link ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateSearchAds360LinkRequest',
        ['searchAds_360Link', 'name']
      );
      request.searchAds_360Link.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateSearchAds360Link(request),
        expectedError
      );
    });
  });

  describe('getAttributionSettings', () => {
    it('invokes getAttributionSettings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAttributionSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAttributionSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AttributionSettings()
      );
      client.innerApiCalls.getAttributionSettings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getAttributionSettings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getAttributionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAttributionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAttributionSettings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAttributionSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAttributionSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AttributionSettings()
      );
      client.innerApiCalls.getAttributionSettings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getAttributionSettings(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAttributionSettings | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getAttributionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAttributionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAttributionSettings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAttributionSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAttributionSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getAttributionSettings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.getAttributionSettings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.getAttributionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAttributionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAttributionSettings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAttributionSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAttributionSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.getAttributionSettings(request),
        expectedError
      );
    });
  });

  describe('updateAttributionSettings', () => {
    it('invokes updateAttributionSettings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAttributionSettingsRequest()
      );
      request.attributionSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAttributionSettingsRequest',
        ['attributionSettings', 'name']
      );
      request.attributionSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `attribution_settings.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AttributionSettings()
      );
      client.innerApiCalls.updateAttributionSettings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateAttributionSettings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateAttributionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateAttributionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateAttributionSettings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAttributionSettingsRequest()
      );
      request.attributionSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAttributionSettingsRequest',
        ['attributionSettings', 'name']
      );
      request.attributionSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `attribution_settings.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AttributionSettings()
      );
      client.innerApiCalls.updateAttributionSettings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateAttributionSettings(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAttributionSettings | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateAttributionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateAttributionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateAttributionSettings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAttributionSettingsRequest()
      );
      request.attributionSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAttributionSettingsRequest',
        ['attributionSettings', 'name']
      );
      request.attributionSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `attribution_settings.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateAttributionSettings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateAttributionSettings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateAttributionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateAttributionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateAttributionSettings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAttributionSettingsRequest()
      );
      request.attributionSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAttributionSettingsRequest',
        ['attributionSettings', 'name']
      );
      request.attributionSettings.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateAttributionSettings(request),
        expectedError
      );
    });
  });

  describe('runAccessReport', () => {
    it('invokes runAccessReport without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.RunAccessReportRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.RunAccessReportRequest',
        ['entity']
      );
      request.entity = defaultValue1;
      const expectedHeaderRequestParams = `entity=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.RunAccessReportResponse()
      );
      client.innerApiCalls.runAccessReport = stubSimpleCall(expectedResponse);
      const [response] = await client.runAccessReport(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.runAccessReport as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.runAccessReport as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes runAccessReport without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.RunAccessReportRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.RunAccessReportRequest',
        ['entity']
      );
      request.entity = defaultValue1;
      const expectedHeaderRequestParams = `entity=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.RunAccessReportResponse()
      );
      client.innerApiCalls.runAccessReport =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.runAccessReport(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IRunAccessReportResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.runAccessReport as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.runAccessReport as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes runAccessReport with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.RunAccessReportRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.RunAccessReportRequest',
        ['entity']
      );
      request.entity = defaultValue1;
      const expectedHeaderRequestParams = `entity=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.runAccessReport = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.runAccessReport(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.runAccessReport as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.runAccessReport as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes runAccessReport with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.RunAccessReportRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.RunAccessReportRequest',
        ['entity']
      );
      request.entity = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.runAccessReport(request), expectedError);
    });
  });

  describe('createAccessBinding', () => {
    it('invokes createAccessBinding without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateAccessBindingRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateAccessBindingRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AccessBinding()
      );
      client.innerApiCalls.createAccessBinding =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createAccessBinding(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createAccessBinding as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createAccessBinding as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createAccessBinding without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateAccessBindingRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateAccessBindingRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AccessBinding()
      );
      client.innerApiCalls.createAccessBinding =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createAccessBinding(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAccessBinding | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createAccessBinding as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createAccessBinding as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createAccessBinding with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateAccessBindingRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateAccessBindingRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createAccessBinding = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.createAccessBinding(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.createAccessBinding as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createAccessBinding as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createAccessBinding with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateAccessBindingRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateAccessBindingRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.createAccessBinding(request), expectedError);
    });
  });

  describe('getAccessBinding', () => {
    it('invokes getAccessBinding without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAccessBindingRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAccessBindingRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AccessBinding()
      );
      client.innerApiCalls.getAccessBinding = stubSimpleCall(expectedResponse);
      const [response] = await client.getAccessBinding(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getAccessBinding as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAccessBinding as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAccessBinding without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAccessBindingRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAccessBindingRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AccessBinding()
      );
      client.innerApiCalls.getAccessBinding =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getAccessBinding(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAccessBinding | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getAccessBinding as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAccessBinding as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAccessBinding with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAccessBindingRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAccessBindingRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getAccessBinding = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getAccessBinding(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getAccessBinding as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAccessBinding as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAccessBinding with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAccessBindingRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAccessBindingRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getAccessBinding(request), expectedError);
    });
  });

  describe('updateAccessBinding', () => {
    it('invokes updateAccessBinding without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAccessBindingRequest()
      );
      request.accessBinding ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAccessBindingRequest',
        ['accessBinding', 'name']
      );
      request.accessBinding.name = defaultValue1;
      const expectedHeaderRequestParams = `access_binding.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AccessBinding()
      );
      client.innerApiCalls.updateAccessBinding =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateAccessBinding(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateAccessBinding as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateAccessBinding as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateAccessBinding without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAccessBindingRequest()
      );
      request.accessBinding ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAccessBindingRequest',
        ['accessBinding', 'name']
      );
      request.accessBinding.name = defaultValue1;
      const expectedHeaderRequestParams = `access_binding.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AccessBinding()
      );
      client.innerApiCalls.updateAccessBinding =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateAccessBinding(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAccessBinding | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateAccessBinding as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateAccessBinding as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateAccessBinding with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAccessBindingRequest()
      );
      request.accessBinding ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAccessBindingRequest',
        ['accessBinding', 'name']
      );
      request.accessBinding.name = defaultValue1;
      const expectedHeaderRequestParams = `access_binding.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateAccessBinding = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.updateAccessBinding(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.updateAccessBinding as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateAccessBinding as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateAccessBinding with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateAccessBindingRequest()
      );
      request.accessBinding ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateAccessBindingRequest',
        ['accessBinding', 'name']
      );
      request.accessBinding.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.updateAccessBinding(request), expectedError);
    });
  });

  describe('deleteAccessBinding', () => {
    it('invokes deleteAccessBinding without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteAccessBindingRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteAccessBindingRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteAccessBinding =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteAccessBinding(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteAccessBinding as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteAccessBinding as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteAccessBinding without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteAccessBindingRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteAccessBindingRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteAccessBinding =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteAccessBinding(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteAccessBinding as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteAccessBinding as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteAccessBinding with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteAccessBindingRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteAccessBindingRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteAccessBinding = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.deleteAccessBinding(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.deleteAccessBinding as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteAccessBinding as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteAccessBinding with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteAccessBindingRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteAccessBindingRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.deleteAccessBinding(request), expectedError);
    });
  });

  describe('batchCreateAccessBindings', () => {
    it('invokes batchCreateAccessBindings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchCreateAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchCreateAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchCreateAccessBindingsResponse()
      );
      client.innerApiCalls.batchCreateAccessBindings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.batchCreateAccessBindings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.batchCreateAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.batchCreateAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes batchCreateAccessBindings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchCreateAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchCreateAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchCreateAccessBindingsResponse()
      );
      client.innerApiCalls.batchCreateAccessBindings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.batchCreateAccessBindings(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IBatchCreateAccessBindingsResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.batchCreateAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.batchCreateAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes batchCreateAccessBindings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchCreateAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchCreateAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.batchCreateAccessBindings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.batchCreateAccessBindings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.batchCreateAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.batchCreateAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes batchCreateAccessBindings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchCreateAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchCreateAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.batchCreateAccessBindings(request),
        expectedError
      );
    });
  });

  describe('batchGetAccessBindings', () => {
    it('invokes batchGetAccessBindings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchGetAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchGetAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchGetAccessBindingsResponse()
      );
      client.innerApiCalls.batchGetAccessBindings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.batchGetAccessBindings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.batchGetAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.batchGetAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes batchGetAccessBindings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchGetAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchGetAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchGetAccessBindingsResponse()
      );
      client.innerApiCalls.batchGetAccessBindings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.batchGetAccessBindings(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IBatchGetAccessBindingsResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.batchGetAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.batchGetAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes batchGetAccessBindings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchGetAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchGetAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.batchGetAccessBindings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.batchGetAccessBindings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.batchGetAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.batchGetAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes batchGetAccessBindings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchGetAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchGetAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.batchGetAccessBindings(request),
        expectedError
      );
    });
  });

  describe('batchUpdateAccessBindings', () => {
    it('invokes batchUpdateAccessBindings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchUpdateAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchUpdateAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchUpdateAccessBindingsResponse()
      );
      client.innerApiCalls.batchUpdateAccessBindings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.batchUpdateAccessBindings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.batchUpdateAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.batchUpdateAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes batchUpdateAccessBindings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchUpdateAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchUpdateAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchUpdateAccessBindingsResponse()
      );
      client.innerApiCalls.batchUpdateAccessBindings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.batchUpdateAccessBindings(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IBatchUpdateAccessBindingsResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.batchUpdateAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.batchUpdateAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes batchUpdateAccessBindings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchUpdateAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchUpdateAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.batchUpdateAccessBindings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.batchUpdateAccessBindings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.batchUpdateAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.batchUpdateAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes batchUpdateAccessBindings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchUpdateAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchUpdateAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.batchUpdateAccessBindings(request),
        expectedError
      );
    });
  });

  describe('batchDeleteAccessBindings', () => {
    it('invokes batchDeleteAccessBindings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchDeleteAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchDeleteAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.batchDeleteAccessBindings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.batchDeleteAccessBindings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.batchDeleteAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.batchDeleteAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes batchDeleteAccessBindings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchDeleteAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchDeleteAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.batchDeleteAccessBindings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.batchDeleteAccessBindings(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.batchDeleteAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.batchDeleteAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes batchDeleteAccessBindings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchDeleteAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchDeleteAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.batchDeleteAccessBindings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.batchDeleteAccessBindings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.batchDeleteAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.batchDeleteAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes batchDeleteAccessBindings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BatchDeleteAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.BatchDeleteAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.batchDeleteAccessBindings(request),
        expectedError
      );
    });
  });

  describe('getExpandedDataSet', () => {
    it('invokes getExpandedDataSet without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetExpandedDataSetRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetExpandedDataSetRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
      );
      client.innerApiCalls.getExpandedDataSet =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getExpandedDataSet(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getExpandedDataSet as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getExpandedDataSet as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getExpandedDataSet without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetExpandedDataSetRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetExpandedDataSetRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
      );
      client.innerApiCalls.getExpandedDataSet =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getExpandedDataSet(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IExpandedDataSet | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getExpandedDataSet as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getExpandedDataSet as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getExpandedDataSet with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetExpandedDataSetRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetExpandedDataSetRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getExpandedDataSet = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getExpandedDataSet(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getExpandedDataSet as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getExpandedDataSet as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getExpandedDataSet with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetExpandedDataSetRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetExpandedDataSetRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getExpandedDataSet(request), expectedError);
    });
  });

  describe('createExpandedDataSet', () => {
    it('invokes createExpandedDataSet without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateExpandedDataSetRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateExpandedDataSetRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
      );
      client.innerApiCalls.createExpandedDataSet =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createExpandedDataSet(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createExpandedDataSet as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createExpandedDataSet as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createExpandedDataSet without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateExpandedDataSetRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateExpandedDataSetRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
      );
      client.innerApiCalls.createExpandedDataSet =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createExpandedDataSet(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IExpandedDataSet | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createExpandedDataSet as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createExpandedDataSet as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createExpandedDataSet with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateExpandedDataSetRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateExpandedDataSetRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createExpandedDataSet = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.createExpandedDataSet(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.createExpandedDataSet as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createExpandedDataSet as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createExpandedDataSet with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateExpandedDataSetRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateExpandedDataSetRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.createExpandedDataSet(request),
        expectedError
      );
    });
  });

  describe('updateExpandedDataSet', () => {
    it('invokes updateExpandedDataSet without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateExpandedDataSetRequest()
      );
      request.expandedDataSet ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateExpandedDataSetRequest',
        ['expandedDataSet', 'name']
      );
      request.expandedDataSet.name = defaultValue1;
      const expectedHeaderRequestParams = `expanded_data_set.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
      );
      client.innerApiCalls.updateExpandedDataSet =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateExpandedDataSet(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateExpandedDataSet as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateExpandedDataSet as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateExpandedDataSet without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateExpandedDataSetRequest()
      );
      request.expandedDataSet ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateExpandedDataSetRequest',
        ['expandedDataSet', 'name']
      );
      request.expandedDataSet.name = defaultValue1;
      const expectedHeaderRequestParams = `expanded_data_set.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
      );
      client.innerApiCalls.updateExpandedDataSet =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateExpandedDataSet(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IExpandedDataSet | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateExpandedDataSet as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateExpandedDataSet as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateExpandedDataSet with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateExpandedDataSetRequest()
      );
      request.expandedDataSet ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateExpandedDataSetRequest',
        ['expandedDataSet', 'name']
      );
      request.expandedDataSet.name = defaultValue1;
      const expectedHeaderRequestParams = `expanded_data_set.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateExpandedDataSet = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateExpandedDataSet(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateExpandedDataSet as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateExpandedDataSet as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateExpandedDataSet with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateExpandedDataSetRequest()
      );
      request.expandedDataSet ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateExpandedDataSetRequest',
        ['expandedDataSet', 'name']
      );
      request.expandedDataSet.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateExpandedDataSet(request),
        expectedError
      );
    });
  });

  describe('deleteExpandedDataSet', () => {
    it('invokes deleteExpandedDataSet without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteExpandedDataSetRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteExpandedDataSetRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteExpandedDataSet =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteExpandedDataSet(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteExpandedDataSet as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteExpandedDataSet as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteExpandedDataSet without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteExpandedDataSetRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteExpandedDataSetRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteExpandedDataSet =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteExpandedDataSet(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteExpandedDataSet as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteExpandedDataSet as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteExpandedDataSet with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteExpandedDataSetRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteExpandedDataSetRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteExpandedDataSet = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.deleteExpandedDataSet(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.deleteExpandedDataSet as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteExpandedDataSet as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteExpandedDataSet with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteExpandedDataSetRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteExpandedDataSetRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.deleteExpandedDataSet(request),
        expectedError
      );
    });
  });

  describe('getChannelGroup', () => {
    it('invokes getChannelGroup without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetChannelGroupRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetChannelGroupRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ChannelGroup()
      );
      client.innerApiCalls.getChannelGroup = stubSimpleCall(expectedResponse);
      const [response] = await client.getChannelGroup(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getChannelGroup as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getChannelGroup as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getChannelGroup without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetChannelGroupRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetChannelGroupRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ChannelGroup()
      );
      client.innerApiCalls.getChannelGroup =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getChannelGroup(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IChannelGroup | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getChannelGroup as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getChannelGroup as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getChannelGroup with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetChannelGroupRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetChannelGroupRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getChannelGroup = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getChannelGroup(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getChannelGroup as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getChannelGroup as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getChannelGroup with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetChannelGroupRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetChannelGroupRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getChannelGroup(request), expectedError);
    });
  });

  describe('createChannelGroup', () => {
    it('invokes createChannelGroup without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateChannelGroupRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateChannelGroupRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ChannelGroup()
      );
      client.innerApiCalls.createChannelGroup =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createChannelGroup(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createChannelGroup as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createChannelGroup as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createChannelGroup without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateChannelGroupRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateChannelGroupRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ChannelGroup()
      );
      client.innerApiCalls.createChannelGroup =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createChannelGroup(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IChannelGroup | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createChannelGroup as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createChannelGroup as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createChannelGroup with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateChannelGroupRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateChannelGroupRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createChannelGroup = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.createChannelGroup(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.createChannelGroup as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createChannelGroup as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createChannelGroup with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateChannelGroupRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateChannelGroupRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.createChannelGroup(request), expectedError);
    });
  });

  describe('updateChannelGroup', () => {
    it('invokes updateChannelGroup without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateChannelGroupRequest()
      );
      request.channelGroup ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateChannelGroupRequest',
        ['channelGroup', 'name']
      );
      request.channelGroup.name = defaultValue1;
      const expectedHeaderRequestParams = `channel_group.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ChannelGroup()
      );
      client.innerApiCalls.updateChannelGroup =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateChannelGroup(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateChannelGroup as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateChannelGroup as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateChannelGroup without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateChannelGroupRequest()
      );
      request.channelGroup ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateChannelGroupRequest',
        ['channelGroup', 'name']
      );
      request.channelGroup.name = defaultValue1;
      const expectedHeaderRequestParams = `channel_group.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ChannelGroup()
      );
      client.innerApiCalls.updateChannelGroup =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateChannelGroup(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IChannelGroup | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateChannelGroup as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateChannelGroup as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateChannelGroup with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateChannelGroupRequest()
      );
      request.channelGroup ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateChannelGroupRequest',
        ['channelGroup', 'name']
      );
      request.channelGroup.name = defaultValue1;
      const expectedHeaderRequestParams = `channel_group.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateChannelGroup = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.updateChannelGroup(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.updateChannelGroup as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateChannelGroup as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateChannelGroup with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateChannelGroupRequest()
      );
      request.channelGroup ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateChannelGroupRequest',
        ['channelGroup', 'name']
      );
      request.channelGroup.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.updateChannelGroup(request), expectedError);
    });
  });

  describe('deleteChannelGroup', () => {
    it('invokes deleteChannelGroup without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteChannelGroupRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteChannelGroupRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteChannelGroup =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteChannelGroup(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteChannelGroup as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteChannelGroup as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteChannelGroup without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteChannelGroupRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteChannelGroupRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteChannelGroup =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteChannelGroup(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteChannelGroup as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteChannelGroup as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteChannelGroup with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteChannelGroupRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteChannelGroupRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteChannelGroup = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.deleteChannelGroup(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.deleteChannelGroup as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteChannelGroup as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteChannelGroup with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteChannelGroupRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteChannelGroupRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.deleteChannelGroup(request), expectedError);
    });
  });

  describe('setAutomatedGa4ConfigurationOptOut', () => {
    it('invokes setAutomatedGa4ConfigurationOptOut without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SetAutomatedGa4ConfigurationOptOutRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SetAutomatedGa4ConfigurationOptOutResponse()
      );
      client.innerApiCalls.setAutomatedGa4ConfigurationOptOut =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.setAutomatedGa4ConfigurationOptOut(request);
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes setAutomatedGa4ConfigurationOptOut without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SetAutomatedGa4ConfigurationOptOutRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SetAutomatedGa4ConfigurationOptOutResponse()
      );
      client.innerApiCalls.setAutomatedGa4ConfigurationOptOut =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.setAutomatedGa4ConfigurationOptOut(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ISetAutomatedGa4ConfigurationOptOutResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes setAutomatedGa4ConfigurationOptOut with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SetAutomatedGa4ConfigurationOptOutRequest()
      );
      const expectedError = new Error('expected');
      client.innerApiCalls.setAutomatedGa4ConfigurationOptOut = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.setAutomatedGa4ConfigurationOptOut(request),
        expectedError
      );
    });

    it('invokes setAutomatedGa4ConfigurationOptOut with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SetAutomatedGa4ConfigurationOptOutRequest()
      );
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.setAutomatedGa4ConfigurationOptOut(request),
        expectedError
      );
    });
  });

  describe('fetchAutomatedGa4ConfigurationOptOut', () => {
    it('invokes fetchAutomatedGa4ConfigurationOptOut without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.FetchAutomatedGa4ConfigurationOptOutRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.FetchAutomatedGa4ConfigurationOptOutResponse()
      );
      client.innerApiCalls.fetchAutomatedGa4ConfigurationOptOut =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.fetchAutomatedGa4ConfigurationOptOut(request);
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes fetchAutomatedGa4ConfigurationOptOut without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.FetchAutomatedGa4ConfigurationOptOutRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.FetchAutomatedGa4ConfigurationOptOutResponse()
      );
      client.innerApiCalls.fetchAutomatedGa4ConfigurationOptOut =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.fetchAutomatedGa4ConfigurationOptOut(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IFetchAutomatedGa4ConfigurationOptOutResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes fetchAutomatedGa4ConfigurationOptOut with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.FetchAutomatedGa4ConfigurationOptOutRequest()
      );
      const expectedError = new Error('expected');
      client.innerApiCalls.fetchAutomatedGa4ConfigurationOptOut =
        stubSimpleCall(undefined, expectedError);
      await assert.rejects(
        client.fetchAutomatedGa4ConfigurationOptOut(request),
        expectedError
      );
    });

    it('invokes fetchAutomatedGa4ConfigurationOptOut with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.FetchAutomatedGa4ConfigurationOptOutRequest()
      );
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.fetchAutomatedGa4ConfigurationOptOut(request),
        expectedError
      );
    });
  });

  describe('createBigQueryLink', () => {
    it('invokes createBigQueryLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateBigQueryLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateBigQueryLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BigQueryLink()
      );
      client.innerApiCalls.createBigQueryLink =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createBigQueryLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createBigQueryLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createBigQueryLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createBigQueryLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateBigQueryLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateBigQueryLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BigQueryLink()
      );
      client.innerApiCalls.createBigQueryLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createBigQueryLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IBigQueryLink | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createBigQueryLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createBigQueryLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createBigQueryLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateBigQueryLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateBigQueryLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createBigQueryLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.createBigQueryLink(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.createBigQueryLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createBigQueryLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createBigQueryLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateBigQueryLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateBigQueryLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.createBigQueryLink(request), expectedError);
    });
  });

  describe('getBigQueryLink', () => {
    it('invokes getBigQueryLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetBigQueryLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetBigQueryLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BigQueryLink()
      );
      client.innerApiCalls.getBigQueryLink = stubSimpleCall(expectedResponse);
      const [response] = await client.getBigQueryLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getBigQueryLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getBigQueryLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getBigQueryLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetBigQueryLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetBigQueryLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BigQueryLink()
      );
      client.innerApiCalls.getBigQueryLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getBigQueryLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IBigQueryLink | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getBigQueryLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getBigQueryLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getBigQueryLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetBigQueryLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetBigQueryLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getBigQueryLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getBigQueryLink(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getBigQueryLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getBigQueryLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getBigQueryLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetBigQueryLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetBigQueryLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getBigQueryLink(request), expectedError);
    });
  });

  describe('deleteBigQueryLink', () => {
    it('invokes deleteBigQueryLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteBigQueryLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteBigQueryLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteBigQueryLink =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteBigQueryLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteBigQueryLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteBigQueryLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteBigQueryLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteBigQueryLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteBigQueryLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteBigQueryLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteBigQueryLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteBigQueryLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteBigQueryLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteBigQueryLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteBigQueryLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteBigQueryLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteBigQueryLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.deleteBigQueryLink(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.deleteBigQueryLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteBigQueryLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteBigQueryLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteBigQueryLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteBigQueryLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.deleteBigQueryLink(request), expectedError);
    });
  });

  describe('updateBigQueryLink', () => {
    it('invokes updateBigQueryLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateBigQueryLinkRequest()
      );
      request.bigqueryLink ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateBigQueryLinkRequest',
        ['bigqueryLink', 'name']
      );
      request.bigqueryLink.name = defaultValue1;
      const expectedHeaderRequestParams = `bigquery_link.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BigQueryLink()
      );
      client.innerApiCalls.updateBigQueryLink =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateBigQueryLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateBigQueryLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateBigQueryLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateBigQueryLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateBigQueryLinkRequest()
      );
      request.bigqueryLink ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateBigQueryLinkRequest',
        ['bigqueryLink', 'name']
      );
      request.bigqueryLink.name = defaultValue1;
      const expectedHeaderRequestParams = `bigquery_link.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.BigQueryLink()
      );
      client.innerApiCalls.updateBigQueryLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateBigQueryLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IBigQueryLink | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateBigQueryLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateBigQueryLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateBigQueryLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateBigQueryLinkRequest()
      );
      request.bigqueryLink ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateBigQueryLinkRequest',
        ['bigqueryLink', 'name']
      );
      request.bigqueryLink.name = defaultValue1;
      const expectedHeaderRequestParams = `bigquery_link.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateBigQueryLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.updateBigQueryLink(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.updateBigQueryLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateBigQueryLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateBigQueryLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateBigQueryLinkRequest()
      );
      request.bigqueryLink ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateBigQueryLinkRequest',
        ['bigqueryLink', 'name']
      );
      request.bigqueryLink.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.updateBigQueryLink(request), expectedError);
    });
  });

  describe('getEnhancedMeasurementSettings', () => {
    it('invokes getEnhancedMeasurementSettings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetEnhancedMeasurementSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetEnhancedMeasurementSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EnhancedMeasurementSettings()
      );
      client.innerApiCalls.getEnhancedMeasurementSettings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getEnhancedMeasurementSettings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getEnhancedMeasurementSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getEnhancedMeasurementSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getEnhancedMeasurementSettings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetEnhancedMeasurementSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetEnhancedMeasurementSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EnhancedMeasurementSettings()
      );
      client.innerApiCalls.getEnhancedMeasurementSettings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getEnhancedMeasurementSettings(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IEnhancedMeasurementSettings | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getEnhancedMeasurementSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getEnhancedMeasurementSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getEnhancedMeasurementSettings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetEnhancedMeasurementSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetEnhancedMeasurementSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getEnhancedMeasurementSettings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.getEnhancedMeasurementSettings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.getEnhancedMeasurementSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getEnhancedMeasurementSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getEnhancedMeasurementSettings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetEnhancedMeasurementSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetEnhancedMeasurementSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.getEnhancedMeasurementSettings(request),
        expectedError
      );
    });
  });

  describe('updateEnhancedMeasurementSettings', () => {
    it('invokes updateEnhancedMeasurementSettings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateEnhancedMeasurementSettingsRequest()
      );
      request.enhancedMeasurementSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateEnhancedMeasurementSettingsRequest',
        ['enhancedMeasurementSettings', 'name']
      );
      request.enhancedMeasurementSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `enhanced_measurement_settings.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EnhancedMeasurementSettings()
      );
      client.innerApiCalls.updateEnhancedMeasurementSettings =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.updateEnhancedMeasurementSettings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateEnhancedMeasurementSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateEnhancedMeasurementSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateEnhancedMeasurementSettings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateEnhancedMeasurementSettingsRequest()
      );
      request.enhancedMeasurementSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateEnhancedMeasurementSettingsRequest',
        ['enhancedMeasurementSettings', 'name']
      );
      request.enhancedMeasurementSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `enhanced_measurement_settings.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EnhancedMeasurementSettings()
      );
      client.innerApiCalls.updateEnhancedMeasurementSettings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateEnhancedMeasurementSettings(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IEnhancedMeasurementSettings | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateEnhancedMeasurementSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateEnhancedMeasurementSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateEnhancedMeasurementSettings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateEnhancedMeasurementSettingsRequest()
      );
      request.enhancedMeasurementSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateEnhancedMeasurementSettingsRequest',
        ['enhancedMeasurementSettings', 'name']
      );
      request.enhancedMeasurementSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `enhanced_measurement_settings.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateEnhancedMeasurementSettings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateEnhancedMeasurementSettings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateEnhancedMeasurementSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateEnhancedMeasurementSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateEnhancedMeasurementSettings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateEnhancedMeasurementSettingsRequest()
      );
      request.enhancedMeasurementSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateEnhancedMeasurementSettingsRequest',
        ['enhancedMeasurementSettings', 'name']
      );
      request.enhancedMeasurementSettings.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateEnhancedMeasurementSettings(request),
        expectedError
      );
    });
  });

  describe('createConnectedSiteTag', () => {
    it('invokes createConnectedSiteTag without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateConnectedSiteTagRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateConnectedSiteTagResponse()
      );
      client.innerApiCalls.createConnectedSiteTag =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createConnectedSiteTag(request);
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes createConnectedSiteTag without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateConnectedSiteTagRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateConnectedSiteTagResponse()
      );
      client.innerApiCalls.createConnectedSiteTag =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createConnectedSiteTag(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ICreateConnectedSiteTagResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes createConnectedSiteTag with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateConnectedSiteTagRequest()
      );
      const expectedError = new Error('expected');
      client.innerApiCalls.createConnectedSiteTag = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.createConnectedSiteTag(request),
        expectedError
      );
    });

    it('invokes createConnectedSiteTag with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateConnectedSiteTagRequest()
      );
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.createConnectedSiteTag(request),
        expectedError
      );
    });
  });

  describe('deleteConnectedSiteTag', () => {
    it('invokes deleteConnectedSiteTag without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteConnectedSiteTagRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteConnectedSiteTag =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteConnectedSiteTag(request);
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes deleteConnectedSiteTag without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteConnectedSiteTagRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteConnectedSiteTag =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteConnectedSiteTag(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes deleteConnectedSiteTag with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteConnectedSiteTagRequest()
      );
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteConnectedSiteTag = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.deleteConnectedSiteTag(request),
        expectedError
      );
    });

    it('invokes deleteConnectedSiteTag with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteConnectedSiteTagRequest()
      );
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.deleteConnectedSiteTag(request),
        expectedError
      );
    });
  });

  describe('listConnectedSiteTags', () => {
    it('invokes listConnectedSiteTags without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListConnectedSiteTagsRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListConnectedSiteTagsResponse()
      );
      client.innerApiCalls.listConnectedSiteTags =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listConnectedSiteTags(request);
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes listConnectedSiteTags without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListConnectedSiteTagsRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListConnectedSiteTagsResponse()
      );
      client.innerApiCalls.listConnectedSiteTags =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listConnectedSiteTags(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IListConnectedSiteTagsResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes listConnectedSiteTags with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListConnectedSiteTagsRequest()
      );
      const expectedError = new Error('expected');
      client.innerApiCalls.listConnectedSiteTags = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.listConnectedSiteTags(request),
        expectedError
      );
    });

    it('invokes listConnectedSiteTags with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListConnectedSiteTagsRequest()
      );
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.listConnectedSiteTags(request),
        expectedError
      );
    });
  });

  describe('fetchConnectedGa4Property', () => {
    it('invokes fetchConnectedGa4Property without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.FetchConnectedGa4PropertyRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.FetchConnectedGa4PropertyResponse()
      );
      client.innerApiCalls.fetchConnectedGa4Property =
        stubSimpleCall(expectedResponse);
      const [response] = await client.fetchConnectedGa4Property(request);
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes fetchConnectedGa4Property without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.FetchConnectedGa4PropertyRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.FetchConnectedGa4PropertyResponse()
      );
      client.innerApiCalls.fetchConnectedGa4Property =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.fetchConnectedGa4Property(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IFetchConnectedGa4PropertyResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes fetchConnectedGa4Property with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.FetchConnectedGa4PropertyRequest()
      );
      const expectedError = new Error('expected');
      client.innerApiCalls.fetchConnectedGa4Property = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.fetchConnectedGa4Property(request),
        expectedError
      );
    });

    it('invokes fetchConnectedGa4Property with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.FetchConnectedGa4PropertyRequest()
      );
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.fetchConnectedGa4Property(request),
        expectedError
      );
    });
  });

  describe('getAdSenseLink', () => {
    it('invokes getAdSenseLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAdSenseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAdSenseLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AdSenseLink()
      );
      client.innerApiCalls.getAdSenseLink = stubSimpleCall(expectedResponse);
      const [response] = await client.getAdSenseLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getAdSenseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAdSenseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAdSenseLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAdSenseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAdSenseLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AdSenseLink()
      );
      client.innerApiCalls.getAdSenseLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getAdSenseLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAdSenseLink | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getAdSenseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAdSenseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAdSenseLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAdSenseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAdSenseLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getAdSenseLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getAdSenseLink(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getAdSenseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getAdSenseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getAdSenseLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetAdSenseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetAdSenseLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getAdSenseLink(request), expectedError);
    });
  });

  describe('createAdSenseLink', () => {
    it('invokes createAdSenseLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateAdSenseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateAdSenseLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AdSenseLink()
      );
      client.innerApiCalls.createAdSenseLink = stubSimpleCall(expectedResponse);
      const [response] = await client.createAdSenseLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createAdSenseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createAdSenseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createAdSenseLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateAdSenseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateAdSenseLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.AdSenseLink()
      );
      client.innerApiCalls.createAdSenseLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createAdSenseLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAdSenseLink | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createAdSenseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createAdSenseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createAdSenseLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateAdSenseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateAdSenseLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createAdSenseLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.createAdSenseLink(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.createAdSenseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createAdSenseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createAdSenseLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateAdSenseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateAdSenseLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.createAdSenseLink(request), expectedError);
    });
  });

  describe('deleteAdSenseLink', () => {
    it('invokes deleteAdSenseLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteAdSenseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteAdSenseLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteAdSenseLink = stubSimpleCall(expectedResponse);
      const [response] = await client.deleteAdSenseLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteAdSenseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteAdSenseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteAdSenseLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteAdSenseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteAdSenseLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteAdSenseLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteAdSenseLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteAdSenseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteAdSenseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteAdSenseLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteAdSenseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteAdSenseLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteAdSenseLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.deleteAdSenseLink(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.deleteAdSenseLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteAdSenseLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteAdSenseLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteAdSenseLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteAdSenseLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.deleteAdSenseLink(request), expectedError);
    });
  });

  describe('getEventCreateRule', () => {
    it('invokes getEventCreateRule without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetEventCreateRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetEventCreateRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EventCreateRule()
      );
      client.innerApiCalls.getEventCreateRule =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getEventCreateRule(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getEventCreateRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getEventCreateRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getEventCreateRule without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetEventCreateRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetEventCreateRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EventCreateRule()
      );
      client.innerApiCalls.getEventCreateRule =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getEventCreateRule(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IEventCreateRule | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getEventCreateRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getEventCreateRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getEventCreateRule with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetEventCreateRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetEventCreateRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getEventCreateRule = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getEventCreateRule(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getEventCreateRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getEventCreateRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getEventCreateRule with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetEventCreateRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetEventCreateRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getEventCreateRule(request), expectedError);
    });
  });

  describe('createEventCreateRule', () => {
    it('invokes createEventCreateRule without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateEventCreateRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateEventCreateRuleRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EventCreateRule()
      );
      client.innerApiCalls.createEventCreateRule =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createEventCreateRule(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createEventCreateRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createEventCreateRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createEventCreateRule without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateEventCreateRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateEventCreateRuleRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EventCreateRule()
      );
      client.innerApiCalls.createEventCreateRule =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createEventCreateRule(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IEventCreateRule | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createEventCreateRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createEventCreateRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createEventCreateRule with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateEventCreateRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateEventCreateRuleRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createEventCreateRule = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.createEventCreateRule(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.createEventCreateRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createEventCreateRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createEventCreateRule with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateEventCreateRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateEventCreateRuleRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.createEventCreateRule(request),
        expectedError
      );
    });
  });

  describe('updateEventCreateRule', () => {
    it('invokes updateEventCreateRule without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateEventCreateRuleRequest()
      );
      request.eventCreateRule ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateEventCreateRuleRequest',
        ['eventCreateRule', 'name']
      );
      request.eventCreateRule.name = defaultValue1;
      const expectedHeaderRequestParams = `event_create_rule.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EventCreateRule()
      );
      client.innerApiCalls.updateEventCreateRule =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateEventCreateRule(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateEventCreateRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateEventCreateRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateEventCreateRule without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateEventCreateRuleRequest()
      );
      request.eventCreateRule ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateEventCreateRuleRequest',
        ['eventCreateRule', 'name']
      );
      request.eventCreateRule.name = defaultValue1;
      const expectedHeaderRequestParams = `event_create_rule.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EventCreateRule()
      );
      client.innerApiCalls.updateEventCreateRule =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateEventCreateRule(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IEventCreateRule | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateEventCreateRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateEventCreateRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateEventCreateRule with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateEventCreateRuleRequest()
      );
      request.eventCreateRule ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateEventCreateRuleRequest',
        ['eventCreateRule', 'name']
      );
      request.eventCreateRule.name = defaultValue1;
      const expectedHeaderRequestParams = `event_create_rule.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateEventCreateRule = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateEventCreateRule(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateEventCreateRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateEventCreateRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateEventCreateRule with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateEventCreateRuleRequest()
      );
      request.eventCreateRule ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateEventCreateRuleRequest',
        ['eventCreateRule', 'name']
      );
      request.eventCreateRule.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateEventCreateRule(request),
        expectedError
      );
    });
  });

  describe('deleteEventCreateRule', () => {
    it('invokes deleteEventCreateRule without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteEventCreateRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteEventCreateRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteEventCreateRule =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteEventCreateRule(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteEventCreateRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteEventCreateRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteEventCreateRule without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteEventCreateRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteEventCreateRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteEventCreateRule =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteEventCreateRule(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteEventCreateRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteEventCreateRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteEventCreateRule with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteEventCreateRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteEventCreateRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteEventCreateRule = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.deleteEventCreateRule(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.deleteEventCreateRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteEventCreateRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteEventCreateRule with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteEventCreateRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteEventCreateRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.deleteEventCreateRule(request),
        expectedError
      );
    });
  });

  describe('getEventEditRule', () => {
    it('invokes getEventEditRule without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetEventEditRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetEventEditRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EventEditRule()
      );
      client.innerApiCalls.getEventEditRule = stubSimpleCall(expectedResponse);
      const [response] = await client.getEventEditRule(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getEventEditRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getEventEditRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getEventEditRule without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetEventEditRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetEventEditRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EventEditRule()
      );
      client.innerApiCalls.getEventEditRule =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getEventEditRule(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IEventEditRule | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getEventEditRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getEventEditRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getEventEditRule with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetEventEditRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetEventEditRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getEventEditRule = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getEventEditRule(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getEventEditRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getEventEditRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getEventEditRule with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetEventEditRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetEventEditRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getEventEditRule(request), expectedError);
    });
  });

  describe('createEventEditRule', () => {
    it('invokes createEventEditRule without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateEventEditRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateEventEditRuleRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EventEditRule()
      );
      client.innerApiCalls.createEventEditRule =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createEventEditRule(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createEventEditRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createEventEditRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createEventEditRule without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateEventEditRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateEventEditRuleRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EventEditRule()
      );
      client.innerApiCalls.createEventEditRule =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createEventEditRule(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IEventEditRule | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createEventEditRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createEventEditRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createEventEditRule with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateEventEditRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateEventEditRuleRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createEventEditRule = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.createEventEditRule(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.createEventEditRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createEventEditRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createEventEditRule with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateEventEditRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateEventEditRuleRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.createEventEditRule(request), expectedError);
    });
  });

  describe('updateEventEditRule', () => {
    it('invokes updateEventEditRule without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateEventEditRuleRequest()
      );
      request.eventEditRule ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateEventEditRuleRequest',
        ['eventEditRule', 'name']
      );
      request.eventEditRule.name = defaultValue1;
      const expectedHeaderRequestParams = `event_edit_rule.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EventEditRule()
      );
      client.innerApiCalls.updateEventEditRule =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateEventEditRule(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateEventEditRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateEventEditRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateEventEditRule without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateEventEditRuleRequest()
      );
      request.eventEditRule ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateEventEditRuleRequest',
        ['eventEditRule', 'name']
      );
      request.eventEditRule.name = defaultValue1;
      const expectedHeaderRequestParams = `event_edit_rule.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.EventEditRule()
      );
      client.innerApiCalls.updateEventEditRule =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateEventEditRule(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IEventEditRule | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateEventEditRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateEventEditRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateEventEditRule with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateEventEditRuleRequest()
      );
      request.eventEditRule ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateEventEditRuleRequest',
        ['eventEditRule', 'name']
      );
      request.eventEditRule.name = defaultValue1;
      const expectedHeaderRequestParams = `event_edit_rule.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateEventEditRule = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.updateEventEditRule(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.updateEventEditRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateEventEditRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateEventEditRule with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateEventEditRuleRequest()
      );
      request.eventEditRule ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateEventEditRuleRequest',
        ['eventEditRule', 'name']
      );
      request.eventEditRule.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.updateEventEditRule(request), expectedError);
    });
  });

  describe('deleteEventEditRule', () => {
    it('invokes deleteEventEditRule without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteEventEditRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteEventEditRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteEventEditRule =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteEventEditRule(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteEventEditRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteEventEditRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteEventEditRule without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteEventEditRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteEventEditRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteEventEditRule =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteEventEditRule(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteEventEditRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteEventEditRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteEventEditRule with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteEventEditRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteEventEditRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteEventEditRule = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.deleteEventEditRule(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.deleteEventEditRule as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteEventEditRule as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteEventEditRule with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteEventEditRuleRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteEventEditRuleRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.deleteEventEditRule(request), expectedError);
    });
  });

  describe('reorderEventEditRules', () => {
    it('invokes reorderEventEditRules without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ReorderEventEditRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ReorderEventEditRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.reorderEventEditRules =
        stubSimpleCall(expectedResponse);
      const [response] = await client.reorderEventEditRules(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.reorderEventEditRules as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.reorderEventEditRules as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes reorderEventEditRules without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ReorderEventEditRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ReorderEventEditRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.reorderEventEditRules =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.reorderEventEditRules(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.reorderEventEditRules as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.reorderEventEditRules as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes reorderEventEditRules with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ReorderEventEditRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ReorderEventEditRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.reorderEventEditRules = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.reorderEventEditRules(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.reorderEventEditRules as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.reorderEventEditRules as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes reorderEventEditRules with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ReorderEventEditRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ReorderEventEditRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.reorderEventEditRules(request),
        expectedError
      );
    });
  });

  describe('updateDataRedactionSettings', () => {
    it('invokes updateDataRedactionSettings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDataRedactionSettingsRequest()
      );
      request.dataRedactionSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDataRedactionSettingsRequest',
        ['dataRedactionSettings', 'name']
      );
      request.dataRedactionSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `data_redaction_settings.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataRedactionSettings()
      );
      client.innerApiCalls.updateDataRedactionSettings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateDataRedactionSettings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateDataRedactionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateDataRedactionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateDataRedactionSettings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDataRedactionSettingsRequest()
      );
      request.dataRedactionSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDataRedactionSettingsRequest',
        ['dataRedactionSettings', 'name']
      );
      request.dataRedactionSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `data_redaction_settings.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataRedactionSettings()
      );
      client.innerApiCalls.updateDataRedactionSettings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateDataRedactionSettings(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDataRedactionSettings | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateDataRedactionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateDataRedactionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateDataRedactionSettings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDataRedactionSettingsRequest()
      );
      request.dataRedactionSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDataRedactionSettingsRequest',
        ['dataRedactionSettings', 'name']
      );
      request.dataRedactionSettings.name = defaultValue1;
      const expectedHeaderRequestParams = `data_redaction_settings.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateDataRedactionSettings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateDataRedactionSettings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateDataRedactionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateDataRedactionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateDataRedactionSettings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateDataRedactionSettingsRequest()
      );
      request.dataRedactionSettings ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateDataRedactionSettingsRequest',
        ['dataRedactionSettings', 'name']
      );
      request.dataRedactionSettings.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateDataRedactionSettings(request),
        expectedError
      );
    });
  });

  describe('getDataRedactionSettings', () => {
    it('invokes getDataRedactionSettings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataRedactionSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataRedactionSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataRedactionSettings()
      );
      client.innerApiCalls.getDataRedactionSettings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getDataRedactionSettings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getDataRedactionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDataRedactionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDataRedactionSettings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataRedactionSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataRedactionSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DataRedactionSettings()
      );
      client.innerApiCalls.getDataRedactionSettings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getDataRedactionSettings(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDataRedactionSettings | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getDataRedactionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDataRedactionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDataRedactionSettings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataRedactionSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataRedactionSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getDataRedactionSettings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.getDataRedactionSettings(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.getDataRedactionSettings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getDataRedactionSettings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getDataRedactionSettings with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetDataRedactionSettingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetDataRedactionSettingsRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.getDataRedactionSettings(request),
        expectedError
      );
    });
  });

  describe('getCalculatedMetric', () => {
    it('invokes getCalculatedMetric without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetCalculatedMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetCalculatedMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CalculatedMetric()
      );
      client.innerApiCalls.getCalculatedMetric =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getCalculatedMetric(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getCalculatedMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getCalculatedMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getCalculatedMetric without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetCalculatedMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetCalculatedMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CalculatedMetric()
      );
      client.innerApiCalls.getCalculatedMetric =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getCalculatedMetric(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ICalculatedMetric | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getCalculatedMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getCalculatedMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getCalculatedMetric with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetCalculatedMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetCalculatedMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getCalculatedMetric = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.getCalculatedMetric(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.getCalculatedMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getCalculatedMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getCalculatedMetric with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetCalculatedMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetCalculatedMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.getCalculatedMetric(request), expectedError);
    });
  });

  describe('createCalculatedMetric', () => {
    it('invokes createCalculatedMetric without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateCalculatedMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateCalculatedMetricRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CalculatedMetric()
      );
      client.innerApiCalls.createCalculatedMetric =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createCalculatedMetric(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createCalculatedMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createCalculatedMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createCalculatedMetric without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateCalculatedMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateCalculatedMetricRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CalculatedMetric()
      );
      client.innerApiCalls.createCalculatedMetric =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createCalculatedMetric(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ICalculatedMetric | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createCalculatedMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createCalculatedMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createCalculatedMetric with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateCalculatedMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateCalculatedMetricRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createCalculatedMetric = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.createCalculatedMetric(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.createCalculatedMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createCalculatedMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createCalculatedMetric with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateCalculatedMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateCalculatedMetricRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.createCalculatedMetric(request),
        expectedError
      );
    });
  });

  describe('updateCalculatedMetric', () => {
    it('invokes updateCalculatedMetric without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateCalculatedMetricRequest()
      );
      request.calculatedMetric ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateCalculatedMetricRequest',
        ['calculatedMetric', 'name']
      );
      request.calculatedMetric.name = defaultValue1;
      const expectedHeaderRequestParams = `calculated_metric.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CalculatedMetric()
      );
      client.innerApiCalls.updateCalculatedMetric =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateCalculatedMetric(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateCalculatedMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateCalculatedMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateCalculatedMetric without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateCalculatedMetricRequest()
      );
      request.calculatedMetric ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateCalculatedMetricRequest',
        ['calculatedMetric', 'name']
      );
      request.calculatedMetric.name = defaultValue1;
      const expectedHeaderRequestParams = `calculated_metric.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CalculatedMetric()
      );
      client.innerApiCalls.updateCalculatedMetric =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateCalculatedMetric(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ICalculatedMetric | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateCalculatedMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateCalculatedMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateCalculatedMetric with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateCalculatedMetricRequest()
      );
      request.calculatedMetric ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateCalculatedMetricRequest',
        ['calculatedMetric', 'name']
      );
      request.calculatedMetric.name = defaultValue1;
      const expectedHeaderRequestParams = `calculated_metric.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateCalculatedMetric = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateCalculatedMetric(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateCalculatedMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateCalculatedMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateCalculatedMetric with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateCalculatedMetricRequest()
      );
      request.calculatedMetric ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateCalculatedMetricRequest',
        ['calculatedMetric', 'name']
      );
      request.calculatedMetric.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateCalculatedMetric(request),
        expectedError
      );
    });
  });

  describe('deleteCalculatedMetric', () => {
    it('invokes deleteCalculatedMetric without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteCalculatedMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteCalculatedMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteCalculatedMetric =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteCalculatedMetric(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteCalculatedMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteCalculatedMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteCalculatedMetric without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteCalculatedMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteCalculatedMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteCalculatedMetric =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteCalculatedMetric(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteCalculatedMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteCalculatedMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteCalculatedMetric with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteCalculatedMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteCalculatedMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteCalculatedMetric = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.deleteCalculatedMetric(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.deleteCalculatedMetric as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteCalculatedMetric as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteCalculatedMetric with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteCalculatedMetricRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteCalculatedMetricRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.deleteCalculatedMetric(request),
        expectedError
      );
    });
  });

  describe('createRollupProperty', () => {
    it('invokes createRollupProperty without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateRollupPropertyRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateRollupPropertyResponse()
      );
      client.innerApiCalls.createRollupProperty =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createRollupProperty(request);
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes createRollupProperty without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateRollupPropertyRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateRollupPropertyResponse()
      );
      client.innerApiCalls.createRollupProperty =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createRollupProperty(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ICreateRollupPropertyResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes createRollupProperty with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateRollupPropertyRequest()
      );
      const expectedError = new Error('expected');
      client.innerApiCalls.createRollupProperty = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.createRollupProperty(request), expectedError);
    });

    it('invokes createRollupProperty with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateRollupPropertyRequest()
      );
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.createRollupProperty(request), expectedError);
    });
  });

  describe('getRollupPropertySourceLink', () => {
    it('invokes getRollupPropertySourceLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetRollupPropertySourceLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetRollupPropertySourceLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
      );
      client.innerApiCalls.getRollupPropertySourceLink =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getRollupPropertySourceLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getRollupPropertySourceLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getRollupPropertySourceLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getRollupPropertySourceLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetRollupPropertySourceLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetRollupPropertySourceLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
      );
      client.innerApiCalls.getRollupPropertySourceLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getRollupPropertySourceLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IRollupPropertySourceLink | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getRollupPropertySourceLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getRollupPropertySourceLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getRollupPropertySourceLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetRollupPropertySourceLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetRollupPropertySourceLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getRollupPropertySourceLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.getRollupPropertySourceLink(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.getRollupPropertySourceLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getRollupPropertySourceLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getRollupPropertySourceLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetRollupPropertySourceLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetRollupPropertySourceLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.getRollupPropertySourceLink(request),
        expectedError
      );
    });
  });

  describe('createRollupPropertySourceLink', () => {
    it('invokes createRollupPropertySourceLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateRollupPropertySourceLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateRollupPropertySourceLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
      );
      client.innerApiCalls.createRollupPropertySourceLink =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createRollupPropertySourceLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createRollupPropertySourceLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createRollupPropertySourceLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createRollupPropertySourceLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateRollupPropertySourceLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateRollupPropertySourceLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
      );
      client.innerApiCalls.createRollupPropertySourceLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createRollupPropertySourceLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IRollupPropertySourceLink | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createRollupPropertySourceLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createRollupPropertySourceLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createRollupPropertySourceLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateRollupPropertySourceLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateRollupPropertySourceLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createRollupPropertySourceLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.createRollupPropertySourceLink(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.createRollupPropertySourceLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createRollupPropertySourceLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createRollupPropertySourceLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateRollupPropertySourceLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateRollupPropertySourceLinkRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.createRollupPropertySourceLink(request),
        expectedError
      );
    });
  });

  describe('deleteRollupPropertySourceLink', () => {
    it('invokes deleteRollupPropertySourceLink without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteRollupPropertySourceLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteRollupPropertySourceLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteRollupPropertySourceLink =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteRollupPropertySourceLink(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteRollupPropertySourceLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteRollupPropertySourceLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteRollupPropertySourceLink without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteRollupPropertySourceLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteRollupPropertySourceLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteRollupPropertySourceLink =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteRollupPropertySourceLink(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteRollupPropertySourceLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteRollupPropertySourceLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteRollupPropertySourceLink with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteRollupPropertySourceLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteRollupPropertySourceLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteRollupPropertySourceLink = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.deleteRollupPropertySourceLink(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.deleteRollupPropertySourceLink as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteRollupPropertySourceLink as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteRollupPropertySourceLink with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteRollupPropertySourceLinkRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteRollupPropertySourceLinkRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.deleteRollupPropertySourceLink(request),
        expectedError
      );
    });
  });

  describe('provisionSubproperty', () => {
    it('invokes provisionSubproperty without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ProvisionSubpropertyRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ProvisionSubpropertyResponse()
      );
      client.innerApiCalls.provisionSubproperty =
        stubSimpleCall(expectedResponse);
      const [response] = await client.provisionSubproperty(request);
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes provisionSubproperty without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ProvisionSubpropertyRequest()
      );
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ProvisionSubpropertyResponse()
      );
      client.innerApiCalls.provisionSubproperty =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.provisionSubproperty(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IProvisionSubpropertyResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes provisionSubproperty with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ProvisionSubpropertyRequest()
      );
      const expectedError = new Error('expected');
      client.innerApiCalls.provisionSubproperty = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.provisionSubproperty(request), expectedError);
    });

    it('invokes provisionSubproperty with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ProvisionSubpropertyRequest()
      );
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.provisionSubproperty(request), expectedError);
    });
  });

  describe('createSubpropertyEventFilter', () => {
    it('invokes createSubpropertyEventFilter without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateSubpropertyEventFilterRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateSubpropertyEventFilterRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
      );
      client.innerApiCalls.createSubpropertyEventFilter =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createSubpropertyEventFilter(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createSubpropertyEventFilter as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createSubpropertyEventFilter as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createSubpropertyEventFilter without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateSubpropertyEventFilterRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateSubpropertyEventFilterRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
      );
      client.innerApiCalls.createSubpropertyEventFilter =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createSubpropertyEventFilter(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ISubpropertyEventFilter | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createSubpropertyEventFilter as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createSubpropertyEventFilter as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createSubpropertyEventFilter with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateSubpropertyEventFilterRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateSubpropertyEventFilterRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createSubpropertyEventFilter = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.createSubpropertyEventFilter(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.createSubpropertyEventFilter as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createSubpropertyEventFilter as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createSubpropertyEventFilter with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateSubpropertyEventFilterRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateSubpropertyEventFilterRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.createSubpropertyEventFilter(request),
        expectedError
      );
    });
  });

  describe('getSubpropertyEventFilter', () => {
    it('invokes getSubpropertyEventFilter without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetSubpropertyEventFilterRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetSubpropertyEventFilterRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
      );
      client.innerApiCalls.getSubpropertyEventFilter =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getSubpropertyEventFilter(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getSubpropertyEventFilter as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getSubpropertyEventFilter as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getSubpropertyEventFilter without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetSubpropertyEventFilterRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetSubpropertyEventFilterRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
      );
      client.innerApiCalls.getSubpropertyEventFilter =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getSubpropertyEventFilter(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ISubpropertyEventFilter | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getSubpropertyEventFilter as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getSubpropertyEventFilter as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getSubpropertyEventFilter with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetSubpropertyEventFilterRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetSubpropertyEventFilterRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getSubpropertyEventFilter = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.getSubpropertyEventFilter(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.getSubpropertyEventFilter as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getSubpropertyEventFilter as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getSubpropertyEventFilter with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetSubpropertyEventFilterRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetSubpropertyEventFilterRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.getSubpropertyEventFilter(request),
        expectedError
      );
    });
  });

  describe('updateSubpropertyEventFilter', () => {
    it('invokes updateSubpropertyEventFilter without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateSubpropertyEventFilterRequest()
      );
      request.subpropertyEventFilter ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateSubpropertyEventFilterRequest',
        ['subpropertyEventFilter', 'name']
      );
      request.subpropertyEventFilter.name = defaultValue1;
      const expectedHeaderRequestParams = `subproperty_event_filter.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
      );
      client.innerApiCalls.updateSubpropertyEventFilter =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateSubpropertyEventFilter(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateSubpropertyEventFilter as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateSubpropertyEventFilter as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateSubpropertyEventFilter without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateSubpropertyEventFilterRequest()
      );
      request.subpropertyEventFilter ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateSubpropertyEventFilterRequest',
        ['subpropertyEventFilter', 'name']
      );
      request.subpropertyEventFilter.name = defaultValue1;
      const expectedHeaderRequestParams = `subproperty_event_filter.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
      );
      client.innerApiCalls.updateSubpropertyEventFilter =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateSubpropertyEventFilter(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ISubpropertyEventFilter | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateSubpropertyEventFilter as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateSubpropertyEventFilter as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateSubpropertyEventFilter with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateSubpropertyEventFilterRequest()
      );
      request.subpropertyEventFilter ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateSubpropertyEventFilterRequest',
        ['subpropertyEventFilter', 'name']
      );
      request.subpropertyEventFilter.name = defaultValue1;
      const expectedHeaderRequestParams = `subproperty_event_filter.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateSubpropertyEventFilter = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateSubpropertyEventFilter(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateSubpropertyEventFilter as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateSubpropertyEventFilter as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateSubpropertyEventFilter with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateSubpropertyEventFilterRequest()
      );
      request.subpropertyEventFilter ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateSubpropertyEventFilterRequest',
        ['subpropertyEventFilter', 'name']
      );
      request.subpropertyEventFilter.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateSubpropertyEventFilter(request),
        expectedError
      );
    });
  });

  describe('deleteSubpropertyEventFilter', () => {
    it('invokes deleteSubpropertyEventFilter without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteSubpropertyEventFilterRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteSubpropertyEventFilterRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteSubpropertyEventFilter =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteSubpropertyEventFilter(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteSubpropertyEventFilter as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteSubpropertyEventFilter as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteSubpropertyEventFilter without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteSubpropertyEventFilterRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteSubpropertyEventFilterRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteSubpropertyEventFilter =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteSubpropertyEventFilter(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteSubpropertyEventFilter as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteSubpropertyEventFilter as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteSubpropertyEventFilter with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteSubpropertyEventFilterRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteSubpropertyEventFilterRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteSubpropertyEventFilter = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.deleteSubpropertyEventFilter(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.deleteSubpropertyEventFilter as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteSubpropertyEventFilter as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteSubpropertyEventFilter with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteSubpropertyEventFilterRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteSubpropertyEventFilterRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.deleteSubpropertyEventFilter(request),
        expectedError
      );
    });
  });

  describe('createReportingDataAnnotation', () => {
    it('invokes createReportingDataAnnotation without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateReportingDataAnnotationRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateReportingDataAnnotationRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
      );
      client.innerApiCalls.createReportingDataAnnotation =
        stubSimpleCall(expectedResponse);
      const [response] = await client.createReportingDataAnnotation(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createReportingDataAnnotation as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createReportingDataAnnotation as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createReportingDataAnnotation without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateReportingDataAnnotationRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateReportingDataAnnotationRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
      );
      client.innerApiCalls.createReportingDataAnnotation =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.createReportingDataAnnotation(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IReportingDataAnnotation | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.createReportingDataAnnotation as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createReportingDataAnnotation as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createReportingDataAnnotation with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateReportingDataAnnotationRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateReportingDataAnnotationRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.createReportingDataAnnotation = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.createReportingDataAnnotation(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.createReportingDataAnnotation as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.createReportingDataAnnotation as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes createReportingDataAnnotation with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.CreateReportingDataAnnotationRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.CreateReportingDataAnnotationRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.createReportingDataAnnotation(request),
        expectedError
      );
    });
  });

  describe('getReportingDataAnnotation', () => {
    it('invokes getReportingDataAnnotation without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetReportingDataAnnotationRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetReportingDataAnnotationRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
      );
      client.innerApiCalls.getReportingDataAnnotation =
        stubSimpleCall(expectedResponse);
      const [response] = await client.getReportingDataAnnotation(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getReportingDataAnnotation as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getReportingDataAnnotation as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getReportingDataAnnotation without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetReportingDataAnnotationRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetReportingDataAnnotationRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
      );
      client.innerApiCalls.getReportingDataAnnotation =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.getReportingDataAnnotation(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IReportingDataAnnotation | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.getReportingDataAnnotation as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getReportingDataAnnotation as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getReportingDataAnnotation with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetReportingDataAnnotationRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetReportingDataAnnotationRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.getReportingDataAnnotation = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.getReportingDataAnnotation(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.getReportingDataAnnotation as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.getReportingDataAnnotation as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes getReportingDataAnnotation with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.GetReportingDataAnnotationRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.GetReportingDataAnnotationRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.getReportingDataAnnotation(request),
        expectedError
      );
    });
  });

  describe('updateReportingDataAnnotation', () => {
    it('invokes updateReportingDataAnnotation without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateReportingDataAnnotationRequest()
      );
      request.reportingDataAnnotation ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateReportingDataAnnotationRequest',
        ['reportingDataAnnotation', 'name']
      );
      request.reportingDataAnnotation.name = defaultValue1;
      const expectedHeaderRequestParams = `reporting_data_annotation.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
      );
      client.innerApiCalls.updateReportingDataAnnotation =
        stubSimpleCall(expectedResponse);
      const [response] = await client.updateReportingDataAnnotation(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateReportingDataAnnotation as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateReportingDataAnnotation as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateReportingDataAnnotation without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateReportingDataAnnotationRequest()
      );
      request.reportingDataAnnotation ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateReportingDataAnnotationRequest',
        ['reportingDataAnnotation', 'name']
      );
      request.reportingDataAnnotation.name = defaultValue1;
      const expectedHeaderRequestParams = `reporting_data_annotation.name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
      );
      client.innerApiCalls.updateReportingDataAnnotation =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.updateReportingDataAnnotation(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IReportingDataAnnotation | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.updateReportingDataAnnotation as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateReportingDataAnnotation as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateReportingDataAnnotation with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateReportingDataAnnotationRequest()
      );
      request.reportingDataAnnotation ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateReportingDataAnnotationRequest',
        ['reportingDataAnnotation', 'name']
      );
      request.reportingDataAnnotation.name = defaultValue1;
      const expectedHeaderRequestParams = `reporting_data_annotation.name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.updateReportingDataAnnotation = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.updateReportingDataAnnotation(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.updateReportingDataAnnotation as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.updateReportingDataAnnotation as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes updateReportingDataAnnotation with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.UpdateReportingDataAnnotationRequest()
      );
      request.reportingDataAnnotation ??= {};
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.UpdateReportingDataAnnotationRequest',
        ['reportingDataAnnotation', 'name']
      );
      request.reportingDataAnnotation.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.updateReportingDataAnnotation(request),
        expectedError
      );
    });
  });

  describe('deleteReportingDataAnnotation', () => {
    it('invokes deleteReportingDataAnnotation without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteReportingDataAnnotationRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteReportingDataAnnotationRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteReportingDataAnnotation =
        stubSimpleCall(expectedResponse);
      const [response] = await client.deleteReportingDataAnnotation(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteReportingDataAnnotation as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteReportingDataAnnotation as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteReportingDataAnnotation without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteReportingDataAnnotationRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteReportingDataAnnotationRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.protobuf.Empty()
      );
      client.innerApiCalls.deleteReportingDataAnnotation =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.deleteReportingDataAnnotation(
          request,
          (
            err?: Error | null,
            result?: protos.google.protobuf.IEmpty | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.deleteReportingDataAnnotation as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteReportingDataAnnotation as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteReportingDataAnnotation with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteReportingDataAnnotationRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteReportingDataAnnotationRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.deleteReportingDataAnnotation = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.deleteReportingDataAnnotation(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.deleteReportingDataAnnotation as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.deleteReportingDataAnnotation as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes deleteReportingDataAnnotation with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.DeleteReportingDataAnnotationRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.DeleteReportingDataAnnotationRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(
        client.deleteReportingDataAnnotation(request),
        expectedError
      );
    });
  });

  describe('submitUserDeletion', () => {
    it('invokes submitUserDeletion without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SubmitUserDeletionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.SubmitUserDeletionRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SubmitUserDeletionResponse()
      );
      client.innerApiCalls.submitUserDeletion =
        stubSimpleCall(expectedResponse);
      const [response] = await client.submitUserDeletion(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.submitUserDeletion as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.submitUserDeletion as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes submitUserDeletion without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SubmitUserDeletionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.SubmitUserDeletionRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedResponse = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SubmitUserDeletionResponse()
      );
      client.innerApiCalls.submitUserDeletion =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.submitUserDeletion(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.ISubmitUserDeletionResponse | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.submitUserDeletion as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.submitUserDeletion as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes submitUserDeletion with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SubmitUserDeletionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.SubmitUserDeletionRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedHeaderRequestParams = `name=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.submitUserDeletion = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.submitUserDeletion(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.submitUserDeletion as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.submitUserDeletion as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes submitUserDeletion with closed client', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SubmitUserDeletionRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.SubmitUserDeletionRequest',
        ['name']
      );
      request.name = defaultValue1;
      const expectedError = new Error('The client has already been closed.');
      client.close().catch(err => {
        throw err;
      });
      await assert.rejects(client.submitUserDeletion(request), expectedError);
    });
  });

  describe('listAccounts', () => {
    it('invokes listAccounts without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccountsRequest()
      );
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Account()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Account()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Account()
        ),
      ];
      client.innerApiCalls.listAccounts = stubSimpleCall(expectedResponse);
      const [response] = await client.listAccounts(request);
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes listAccounts without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccountsRequest()
      );
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Account()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Account()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Account()
        ),
      ];
      client.innerApiCalls.listAccounts =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listAccounts(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAccount[] | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes listAccounts with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccountsRequest()
      );
      const expectedError = new Error('expected');
      client.innerApiCalls.listAccounts = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listAccounts(request), expectedError);
    });

    it('invokes listAccountsStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccountsRequest()
      );
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Account()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Account()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Account()
        ),
      ];
      client.descriptors.page.listAccounts.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listAccountsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.Account[] = [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.Account) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listAccounts.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listAccounts, request)
      );
    });

    it('invokes listAccountsStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccountsRequest()
      );
      const expectedError = new Error('expected');
      client.descriptors.page.listAccounts.createStream = stubPageStreamingCall(
        undefined,
        expectedError
      );
      const stream = client.listAccountsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.Account[] = [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.Account) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listAccounts.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listAccounts, request)
      );
    });

    it('uses async iteration with listAccounts without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccountsRequest()
      );
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Account()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Account()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Account()
        ),
      ];
      client.descriptors.page.listAccounts.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IAccount[] = [];
      const iterable = client.listAccountsAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listAccounts.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
    });

    it('uses async iteration with listAccounts with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccountsRequest()
      );
      const expectedError = new Error('expected');
      client.descriptors.page.listAccounts.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listAccountsAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IAccount[] = [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listAccounts.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
    });
  });

  describe('listAccountSummaries', () => {
    it('invokes listAccountSummaries without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccountSummariesRequest()
      );
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccountSummary()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccountSummary()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccountSummary()
        ),
      ];
      client.innerApiCalls.listAccountSummaries =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listAccountSummaries(request);
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes listAccountSummaries without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccountSummariesRequest()
      );
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccountSummary()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccountSummary()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccountSummary()
        ),
      ];
      client.innerApiCalls.listAccountSummaries =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listAccountSummaries(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IAccountSummary[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes listAccountSummaries with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccountSummariesRequest()
      );
      const expectedError = new Error('expected');
      client.innerApiCalls.listAccountSummaries = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listAccountSummaries(request), expectedError);
    });

    it('invokes listAccountSummariesStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccountSummariesRequest()
      );
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccountSummary()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccountSummary()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccountSummary()
        ),
      ];
      client.descriptors.page.listAccountSummaries.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listAccountSummariesStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.AccountSummary[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.AccountSummary) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listAccountSummaries.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listAccountSummaries, request)
      );
    });

    it('invokes listAccountSummariesStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccountSummariesRequest()
      );
      const expectedError = new Error('expected');
      client.descriptors.page.listAccountSummaries.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listAccountSummariesStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.AccountSummary[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.AccountSummary) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listAccountSummaries.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listAccountSummaries, request)
      );
    });

    it('uses async iteration with listAccountSummaries without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccountSummariesRequest()
      );
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccountSummary()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccountSummary()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccountSummary()
        ),
      ];
      client.descriptors.page.listAccountSummaries.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IAccountSummary[] =
        [];
      const iterable = client.listAccountSummariesAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listAccountSummaries.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
    });

    it('uses async iteration with listAccountSummaries with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccountSummariesRequest()
      );
      const expectedError = new Error('expected');
      client.descriptors.page.listAccountSummaries.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listAccountSummariesAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IAccountSummary[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listAccountSummaries.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
    });
  });

  describe('listProperties', () => {
    it('invokes listProperties without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListPropertiesRequest()
      );
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Property()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Property()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Property()
        ),
      ];
      client.innerApiCalls.listProperties = stubSimpleCall(expectedResponse);
      const [response] = await client.listProperties(request);
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes listProperties without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListPropertiesRequest()
      );
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Property()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Property()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Property()
        ),
      ];
      client.innerApiCalls.listProperties =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listProperties(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IProperty[] | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
    });

    it('invokes listProperties with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListPropertiesRequest()
      );
      const expectedError = new Error('expected');
      client.innerApiCalls.listProperties = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listProperties(request), expectedError);
    });

    it('invokes listPropertiesStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListPropertiesRequest()
      );
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Property()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Property()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Property()
        ),
      ];
      client.descriptors.page.listProperties.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listPropertiesStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.Property[] = [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.Property) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listProperties.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listProperties, request)
      );
    });

    it('invokes listPropertiesStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListPropertiesRequest()
      );
      const expectedError = new Error('expected');
      client.descriptors.page.listProperties.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listPropertiesStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.Property[] = [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.Property) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listProperties.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listProperties, request)
      );
    });

    it('uses async iteration with listProperties without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListPropertiesRequest()
      );
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Property()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Property()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Property()
        ),
      ];
      client.descriptors.page.listProperties.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IProperty[] = [];
      const iterable = client.listPropertiesAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listProperties.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
    });

    it('uses async iteration with listProperties with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListPropertiesRequest()
      );
      const expectedError = new Error('expected');
      client.descriptors.page.listProperties.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listPropertiesAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IProperty[] = [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listProperties.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
    });
  });

  describe('listFirebaseLinks', () => {
    it('invokes listFirebaseLinks without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListFirebaseLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListFirebaseLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.FirebaseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.FirebaseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.FirebaseLink()
        ),
      ];
      client.innerApiCalls.listFirebaseLinks = stubSimpleCall(expectedResponse);
      const [response] = await client.listFirebaseLinks(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listFirebaseLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listFirebaseLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listFirebaseLinks without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListFirebaseLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListFirebaseLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.FirebaseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.FirebaseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.FirebaseLink()
        ),
      ];
      client.innerApiCalls.listFirebaseLinks =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listFirebaseLinks(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IFirebaseLink[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listFirebaseLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listFirebaseLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listFirebaseLinks with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListFirebaseLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListFirebaseLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listFirebaseLinks = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listFirebaseLinks(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.listFirebaseLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listFirebaseLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listFirebaseLinksStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListFirebaseLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListFirebaseLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.FirebaseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.FirebaseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.FirebaseLink()
        ),
      ];
      client.descriptors.page.listFirebaseLinks.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listFirebaseLinksStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.FirebaseLink[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.FirebaseLink) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listFirebaseLinks.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listFirebaseLinks, request)
      );
      assert(
        (client.descriptors.page.listFirebaseLinks.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listFirebaseLinksStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListFirebaseLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListFirebaseLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listFirebaseLinks.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listFirebaseLinksStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.FirebaseLink[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.FirebaseLink) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listFirebaseLinks.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listFirebaseLinks, request)
      );
      assert(
        (client.descriptors.page.listFirebaseLinks.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listFirebaseLinks without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListFirebaseLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListFirebaseLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.FirebaseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.FirebaseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.FirebaseLink()
        ),
      ];
      client.descriptors.page.listFirebaseLinks.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IFirebaseLink[] =
        [];
      const iterable = client.listFirebaseLinksAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listFirebaseLinks.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listFirebaseLinks.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listFirebaseLinks with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListFirebaseLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListFirebaseLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listFirebaseLinks.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listFirebaseLinksAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IFirebaseLink[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listFirebaseLinks.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listFirebaseLinks.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listGoogleAdsLinks', () => {
    it('invokes listGoogleAdsLinks without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListGoogleAdsLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListGoogleAdsLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
        ),
      ];
      client.innerApiCalls.listGoogleAdsLinks =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listGoogleAdsLinks(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listGoogleAdsLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listGoogleAdsLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listGoogleAdsLinks without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListGoogleAdsLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListGoogleAdsLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
        ),
      ];
      client.innerApiCalls.listGoogleAdsLinks =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listGoogleAdsLinks(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IGoogleAdsLink[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listGoogleAdsLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listGoogleAdsLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listGoogleAdsLinks with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListGoogleAdsLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListGoogleAdsLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listGoogleAdsLinks = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listGoogleAdsLinks(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.listGoogleAdsLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listGoogleAdsLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listGoogleAdsLinksStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListGoogleAdsLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListGoogleAdsLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
        ),
      ];
      client.descriptors.page.listGoogleAdsLinks.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listGoogleAdsLinksStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.GoogleAdsLink[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.GoogleAdsLink) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listGoogleAdsLinks.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listGoogleAdsLinks, request)
      );
      assert(
        (client.descriptors.page.listGoogleAdsLinks.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listGoogleAdsLinksStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListGoogleAdsLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListGoogleAdsLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listGoogleAdsLinks.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listGoogleAdsLinksStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.GoogleAdsLink[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.GoogleAdsLink) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listGoogleAdsLinks.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listGoogleAdsLinks, request)
      );
      assert(
        (client.descriptors.page.listGoogleAdsLinks.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listGoogleAdsLinks without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListGoogleAdsLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListGoogleAdsLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.GoogleAdsLink()
        ),
      ];
      client.descriptors.page.listGoogleAdsLinks.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IGoogleAdsLink[] =
        [];
      const iterable = client.listGoogleAdsLinksAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listGoogleAdsLinks.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listGoogleAdsLinks.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listGoogleAdsLinks with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListGoogleAdsLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListGoogleAdsLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listGoogleAdsLinks.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listGoogleAdsLinksAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IGoogleAdsLink[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listGoogleAdsLinks.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listGoogleAdsLinks.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listMeasurementProtocolSecrets', () => {
    it('invokes listMeasurementProtocolSecrets without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListMeasurementProtocolSecretsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListMeasurementProtocolSecretsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
        ),
      ];
      client.innerApiCalls.listMeasurementProtocolSecrets =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listMeasurementProtocolSecrets(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listMeasurementProtocolSecrets as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listMeasurementProtocolSecrets as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listMeasurementProtocolSecrets without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListMeasurementProtocolSecretsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListMeasurementProtocolSecretsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
        ),
      ];
      client.innerApiCalls.listMeasurementProtocolSecrets =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listMeasurementProtocolSecrets(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IMeasurementProtocolSecret[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listMeasurementProtocolSecrets as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listMeasurementProtocolSecrets as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listMeasurementProtocolSecrets with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListMeasurementProtocolSecretsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListMeasurementProtocolSecretsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listMeasurementProtocolSecrets = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.listMeasurementProtocolSecrets(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.listMeasurementProtocolSecrets as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listMeasurementProtocolSecrets as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listMeasurementProtocolSecretsStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListMeasurementProtocolSecretsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListMeasurementProtocolSecretsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
        ),
      ];
      client.descriptors.page.listMeasurementProtocolSecrets.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listMeasurementProtocolSecretsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (
          client.descriptors.page.listMeasurementProtocolSecrets
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(
            client.innerApiCalls.listMeasurementProtocolSecrets,
            request
          )
      );
      assert(
        (
          client.descriptors.page.listMeasurementProtocolSecrets
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('invokes listMeasurementProtocolSecretsStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListMeasurementProtocolSecretsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListMeasurementProtocolSecretsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listMeasurementProtocolSecrets.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listMeasurementProtocolSecretsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (
          client.descriptors.page.listMeasurementProtocolSecrets
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(
            client.innerApiCalls.listMeasurementProtocolSecrets,
            request
          )
      );
      assert(
        (
          client.descriptors.page.listMeasurementProtocolSecrets
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listMeasurementProtocolSecrets without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListMeasurementProtocolSecretsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListMeasurementProtocolSecretsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.MeasurementProtocolSecret()
        ),
      ];
      client.descriptors.page.listMeasurementProtocolSecrets.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IMeasurementProtocolSecret[] =
        [];
      const iterable = client.listMeasurementProtocolSecretsAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listMeasurementProtocolSecrets
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listMeasurementProtocolSecrets
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listMeasurementProtocolSecrets with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListMeasurementProtocolSecretsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListMeasurementProtocolSecretsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listMeasurementProtocolSecrets.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listMeasurementProtocolSecretsAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IMeasurementProtocolSecret[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listMeasurementProtocolSecrets
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listMeasurementProtocolSecrets
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });
  });

  describe('listSKAdNetworkConversionValueSchemas', () => {
    it('invokes listSKAdNetworkConversionValueSchemas without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSKAdNetworkConversionValueSchemasRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSKAdNetworkConversionValueSchemasRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
        ),
      ];
      client.innerApiCalls.listSkAdNetworkConversionValueSchemas =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.listSKAdNetworkConversionValueSchemas(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listSkAdNetworkConversionValueSchemas as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listSkAdNetworkConversionValueSchemas as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listSKAdNetworkConversionValueSchemas without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSKAdNetworkConversionValueSchemasRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSKAdNetworkConversionValueSchemasRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
        ),
      ];
      client.innerApiCalls.listSkAdNetworkConversionValueSchemas =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listSKAdNetworkConversionValueSchemas(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.ISKAdNetworkConversionValueSchema[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listSkAdNetworkConversionValueSchemas as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listSkAdNetworkConversionValueSchemas as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listSKAdNetworkConversionValueSchemas with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSKAdNetworkConversionValueSchemasRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSKAdNetworkConversionValueSchemasRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listSkAdNetworkConversionValueSchemas =
        stubSimpleCall(undefined, expectedError);
      await assert.rejects(
        client.listSKAdNetworkConversionValueSchemas(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.listSkAdNetworkConversionValueSchemas as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listSkAdNetworkConversionValueSchemas as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listSKAdNetworkConversionValueSchemasStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSKAdNetworkConversionValueSchemasRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSKAdNetworkConversionValueSchemasRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
        ),
      ];
      client.descriptors.page.listSKAdNetworkConversionValueSchemas.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream =
        client.listSKAdNetworkConversionValueSchemasStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (
          client.descriptors.page.listSKAdNetworkConversionValueSchemas
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(
            client.innerApiCalls.listSkAdNetworkConversionValueSchemas,
            request
          )
      );
      assert(
        (
          client.descriptors.page.listSKAdNetworkConversionValueSchemas
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('invokes listSKAdNetworkConversionValueSchemasStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSKAdNetworkConversionValueSchemasRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSKAdNetworkConversionValueSchemasRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listSKAdNetworkConversionValueSchemas.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream =
        client.listSKAdNetworkConversionValueSchemasStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (
          client.descriptors.page.listSKAdNetworkConversionValueSchemas
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(
            client.innerApiCalls.listSkAdNetworkConversionValueSchemas,
            request
          )
      );
      assert(
        (
          client.descriptors.page.listSKAdNetworkConversionValueSchemas
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listSKAdNetworkConversionValueSchemas without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSKAdNetworkConversionValueSchemasRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSKAdNetworkConversionValueSchemasRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SKAdNetworkConversionValueSchema()
        ),
      ];
      client.descriptors.page.listSKAdNetworkConversionValueSchemas.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.ISKAdNetworkConversionValueSchema[] =
        [];
      const iterable =
        client.listSKAdNetworkConversionValueSchemasAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listSKAdNetworkConversionValueSchemas
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listSKAdNetworkConversionValueSchemas
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listSKAdNetworkConversionValueSchemas with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSKAdNetworkConversionValueSchemasRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSKAdNetworkConversionValueSchemasRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listSKAdNetworkConversionValueSchemas.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable =
        client.listSKAdNetworkConversionValueSchemasAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.ISKAdNetworkConversionValueSchema[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listSKAdNetworkConversionValueSchemas
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listSKAdNetworkConversionValueSchemas
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });
  });

  describe('searchChangeHistoryEvents', () => {
    it('invokes searchChangeHistoryEvents without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SearchChangeHistoryEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.SearchChangeHistoryEventsRequest',
        ['account']
      );
      request.account = defaultValue1;
      const expectedHeaderRequestParams = `account=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChangeHistoryEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChangeHistoryEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChangeHistoryEvent()
        ),
      ];
      client.innerApiCalls.searchChangeHistoryEvents =
        stubSimpleCall(expectedResponse);
      const [response] = await client.searchChangeHistoryEvents(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.searchChangeHistoryEvents as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.searchChangeHistoryEvents as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes searchChangeHistoryEvents without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SearchChangeHistoryEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.SearchChangeHistoryEventsRequest',
        ['account']
      );
      request.account = defaultValue1;
      const expectedHeaderRequestParams = `account=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChangeHistoryEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChangeHistoryEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChangeHistoryEvent()
        ),
      ];
      client.innerApiCalls.searchChangeHistoryEvents =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.searchChangeHistoryEvents(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IChangeHistoryEvent[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.searchChangeHistoryEvents as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.searchChangeHistoryEvents as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes searchChangeHistoryEvents with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SearchChangeHistoryEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.SearchChangeHistoryEventsRequest',
        ['account']
      );
      request.account = defaultValue1;
      const expectedHeaderRequestParams = `account=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.searchChangeHistoryEvents = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.searchChangeHistoryEvents(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.searchChangeHistoryEvents as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.searchChangeHistoryEvents as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes searchChangeHistoryEventsStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SearchChangeHistoryEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.SearchChangeHistoryEventsRequest',
        ['account']
      );
      request.account = defaultValue1;
      const expectedHeaderRequestParams = `account=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChangeHistoryEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChangeHistoryEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChangeHistoryEvent()
        ),
      ];
      client.descriptors.page.searchChangeHistoryEvents.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.searchChangeHistoryEventsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.ChangeHistoryEvent[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.ChangeHistoryEvent
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (
          client.descriptors.page.searchChangeHistoryEvents
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(client.innerApiCalls.searchChangeHistoryEvents, request)
      );
      assert(
        (
          client.descriptors.page.searchChangeHistoryEvents
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('invokes searchChangeHistoryEventsStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SearchChangeHistoryEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.SearchChangeHistoryEventsRequest',
        ['account']
      );
      request.account = defaultValue1;
      const expectedHeaderRequestParams = `account=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.searchChangeHistoryEvents.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.searchChangeHistoryEventsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.ChangeHistoryEvent[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.ChangeHistoryEvent
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (
          client.descriptors.page.searchChangeHistoryEvents
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(client.innerApiCalls.searchChangeHistoryEvents, request)
      );
      assert(
        (
          client.descriptors.page.searchChangeHistoryEvents
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with searchChangeHistoryEvents without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SearchChangeHistoryEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.SearchChangeHistoryEventsRequest',
        ['account']
      );
      request.account = defaultValue1;
      const expectedHeaderRequestParams = `account=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChangeHistoryEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChangeHistoryEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChangeHistoryEvent()
        ),
      ];
      client.descriptors.page.searchChangeHistoryEvents.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IChangeHistoryEvent[] =
        [];
      const iterable = client.searchChangeHistoryEventsAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.searchChangeHistoryEvents
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.searchChangeHistoryEvents
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with searchChangeHistoryEvents with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.SearchChangeHistoryEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.SearchChangeHistoryEventsRequest',
        ['account']
      );
      request.account = defaultValue1;
      const expectedHeaderRequestParams = `account=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.searchChangeHistoryEvents.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.searchChangeHistoryEventsAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IChangeHistoryEvent[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.searchChangeHistoryEvents
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.searchChangeHistoryEvents
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });
  });

  describe('listConversionEvents', () => {
    it('invokes listConversionEvents without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListConversionEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListConversionEventsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ConversionEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ConversionEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ConversionEvent()
        ),
      ];
      client.innerApiCalls.listConversionEvents =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listConversionEvents(request);
      assert(stub.calledOnce);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listConversionEvents as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listConversionEvents as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listConversionEvents without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListConversionEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListConversionEventsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ConversionEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ConversionEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ConversionEvent()
        ),
      ];
      client.innerApiCalls.listConversionEvents =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listConversionEvents(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IConversionEvent[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert(stub.calledOnce);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listConversionEvents as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listConversionEvents as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listConversionEvents with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListConversionEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListConversionEventsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listConversionEvents = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listConversionEvents(request), expectedError);
      assert(stub.calledOnce);
      const actualRequest = (
        client.innerApiCalls.listConversionEvents as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listConversionEvents as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listConversionEventsStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListConversionEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListConversionEventsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ConversionEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ConversionEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ConversionEvent()
        ),
      ];
      client.descriptors.page.listConversionEvents.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listConversionEventsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.ConversionEvent[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.ConversionEvent) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert(stub.calledOnce);
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listConversionEvents.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listConversionEvents, request)
      );
      assert(
        (client.descriptors.page.listConversionEvents.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listConversionEventsStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListConversionEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListConversionEventsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listConversionEvents.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listConversionEventsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.ConversionEvent[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.ConversionEvent) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(stub.calledOnce);
      assert(
        (client.descriptors.page.listConversionEvents.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listConversionEvents, request)
      );
      assert(
        (client.descriptors.page.listConversionEvents.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listConversionEvents without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListConversionEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListConversionEventsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ConversionEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ConversionEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ConversionEvent()
        ),
      ];
      client.descriptors.page.listConversionEvents.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IConversionEvent[] =
        [];
      const iterable = client.listConversionEventsAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert(stub.calledOnce);
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listConversionEvents.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listConversionEvents.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listConversionEvents with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      const stub = sinon.stub(client, 'warn');
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListConversionEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListConversionEventsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listConversionEvents.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listConversionEventsAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IConversionEvent[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert(stub.calledOnce);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listConversionEvents.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listConversionEvents.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listKeyEvents', () => {
    it('invokes listKeyEvents without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListKeyEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListKeyEventsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.KeyEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.KeyEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.KeyEvent()
        ),
      ];
      client.innerApiCalls.listKeyEvents = stubSimpleCall(expectedResponse);
      const [response] = await client.listKeyEvents(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listKeyEvents as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listKeyEvents as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listKeyEvents without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListKeyEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListKeyEventsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.KeyEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.KeyEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.KeyEvent()
        ),
      ];
      client.innerApiCalls.listKeyEvents =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listKeyEvents(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IKeyEvent[] | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listKeyEvents as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listKeyEvents as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listKeyEvents with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListKeyEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListKeyEventsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listKeyEvents = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listKeyEvents(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.listKeyEvents as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listKeyEvents as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listKeyEventsStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListKeyEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListKeyEventsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.KeyEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.KeyEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.KeyEvent()
        ),
      ];
      client.descriptors.page.listKeyEvents.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listKeyEventsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.KeyEvent[] = [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.KeyEvent) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listKeyEvents.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listKeyEvents, request)
      );
      assert(
        (client.descriptors.page.listKeyEvents.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listKeyEventsStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListKeyEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListKeyEventsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listKeyEvents.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listKeyEventsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.KeyEvent[] = [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.KeyEvent) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listKeyEvents.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listKeyEvents, request)
      );
      assert(
        (client.descriptors.page.listKeyEvents.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listKeyEvents without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListKeyEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListKeyEventsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.KeyEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.KeyEvent()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.KeyEvent()
        ),
      ];
      client.descriptors.page.listKeyEvents.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IKeyEvent[] = [];
      const iterable = client.listKeyEventsAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listKeyEvents.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listKeyEvents.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listKeyEvents with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListKeyEventsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListKeyEventsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listKeyEvents.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listKeyEventsAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IKeyEvent[] = [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listKeyEvents.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listKeyEvents.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listDisplayVideo360AdvertiserLinks', () => {
    it('invokes listDisplayVideo360AdvertiserLinks without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
        ),
      ];
      client.innerApiCalls.listDisplayVideo360AdvertiserLinks =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.listDisplayVideo360AdvertiserLinks(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listDisplayVideo360AdvertiserLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listDisplayVideo360AdvertiserLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listDisplayVideo360AdvertiserLinks without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
        ),
      ];
      client.innerApiCalls.listDisplayVideo360AdvertiserLinks =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listDisplayVideo360AdvertiserLinks(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IDisplayVideo360AdvertiserLink[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listDisplayVideo360AdvertiserLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listDisplayVideo360AdvertiserLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listDisplayVideo360AdvertiserLinks with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listDisplayVideo360AdvertiserLinks = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.listDisplayVideo360AdvertiserLinks(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.listDisplayVideo360AdvertiserLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listDisplayVideo360AdvertiserLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listDisplayVideo360AdvertiserLinksStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
        ),
      ];
      client.descriptors.page.listDisplayVideo360AdvertiserLinks.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listDisplayVideo360AdvertiserLinksStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinks
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(
            client.innerApiCalls.listDisplayVideo360AdvertiserLinks,
            request
          )
      );
      assert(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinks
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('invokes listDisplayVideo360AdvertiserLinksStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listDisplayVideo360AdvertiserLinks.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listDisplayVideo360AdvertiserLinksStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinks
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(
            client.innerApiCalls.listDisplayVideo360AdvertiserLinks,
            request
          )
      );
      assert(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinks
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listDisplayVideo360AdvertiserLinks without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLink()
        ),
      ];
      client.descriptors.page.listDisplayVideo360AdvertiserLinks.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IDisplayVideo360AdvertiserLink[] =
        [];
      const iterable = client.listDisplayVideo360AdvertiserLinksAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinks
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinks
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listDisplayVideo360AdvertiserLinks with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listDisplayVideo360AdvertiserLinks.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listDisplayVideo360AdvertiserLinksAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IDisplayVideo360AdvertiserLink[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinks
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinks
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });
  });

  describe('listDisplayVideo360AdvertiserLinkProposals', () => {
    it('invokes listDisplayVideo360AdvertiserLinkProposals without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinkProposalsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinkProposalsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
        ),
      ];
      client.innerApiCalls.listDisplayVideo360AdvertiserLinkProposals =
        stubSimpleCall(expectedResponse);
      const [response] =
        await client.listDisplayVideo360AdvertiserLinkProposals(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls
          .listDisplayVideo360AdvertiserLinkProposals as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .listDisplayVideo360AdvertiserLinkProposals as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listDisplayVideo360AdvertiserLinkProposals without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinkProposalsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinkProposalsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
        ),
      ];
      client.innerApiCalls.listDisplayVideo360AdvertiserLinkProposals =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listDisplayVideo360AdvertiserLinkProposals(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IDisplayVideo360AdvertiserLinkProposal[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls
          .listDisplayVideo360AdvertiserLinkProposals as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .listDisplayVideo360AdvertiserLinkProposals as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listDisplayVideo360AdvertiserLinkProposals with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinkProposalsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinkProposalsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listDisplayVideo360AdvertiserLinkProposals =
        stubSimpleCall(undefined, expectedError);
      await assert.rejects(
        client.listDisplayVideo360AdvertiserLinkProposals(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls
          .listDisplayVideo360AdvertiserLinkProposals as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls
          .listDisplayVideo360AdvertiserLinkProposals as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listDisplayVideo360AdvertiserLinkProposalsStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinkProposalsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinkProposalsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
        ),
      ];
      client.descriptors.page.listDisplayVideo360AdvertiserLinkProposals.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream =
        client.listDisplayVideo360AdvertiserLinkProposalsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinkProposals
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(
            client.innerApiCalls.listDisplayVideo360AdvertiserLinkProposals,
            request
          )
      );
      assert(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinkProposals
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('invokes listDisplayVideo360AdvertiserLinkProposalsStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinkProposalsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinkProposalsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listDisplayVideo360AdvertiserLinkProposals.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream =
        client.listDisplayVideo360AdvertiserLinkProposalsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinkProposals
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(
            client.innerApiCalls.listDisplayVideo360AdvertiserLinkProposals,
            request
          )
      );
      assert(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinkProposals
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listDisplayVideo360AdvertiserLinkProposals without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinkProposalsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinkProposalsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DisplayVideo360AdvertiserLinkProposal()
        ),
      ];
      client.descriptors.page.listDisplayVideo360AdvertiserLinkProposals.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IDisplayVideo360AdvertiserLinkProposal[] =
        [];
      const iterable =
        client.listDisplayVideo360AdvertiserLinkProposalsAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinkProposals
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinkProposals
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listDisplayVideo360AdvertiserLinkProposals with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinkProposalsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDisplayVideo360AdvertiserLinkProposalsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listDisplayVideo360AdvertiserLinkProposals.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable =
        client.listDisplayVideo360AdvertiserLinkProposalsAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IDisplayVideo360AdvertiserLinkProposal[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinkProposals
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listDisplayVideo360AdvertiserLinkProposals
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });
  });

  describe('listCustomDimensions', () => {
    it('invokes listCustomDimensions without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCustomDimensionsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCustomDimensionsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomDimension()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomDimension()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomDimension()
        ),
      ];
      client.innerApiCalls.listCustomDimensions =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listCustomDimensions(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listCustomDimensions as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listCustomDimensions as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listCustomDimensions without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCustomDimensionsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCustomDimensionsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomDimension()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomDimension()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomDimension()
        ),
      ];
      client.innerApiCalls.listCustomDimensions =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listCustomDimensions(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.ICustomDimension[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listCustomDimensions as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listCustomDimensions as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listCustomDimensions with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCustomDimensionsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCustomDimensionsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listCustomDimensions = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listCustomDimensions(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.listCustomDimensions as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listCustomDimensions as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listCustomDimensionsStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCustomDimensionsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCustomDimensionsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomDimension()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomDimension()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomDimension()
        ),
      ];
      client.descriptors.page.listCustomDimensions.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listCustomDimensionsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.CustomDimension[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.CustomDimension) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listCustomDimensions.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listCustomDimensions, request)
      );
      assert(
        (client.descriptors.page.listCustomDimensions.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listCustomDimensionsStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCustomDimensionsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCustomDimensionsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listCustomDimensions.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listCustomDimensionsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.CustomDimension[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.CustomDimension) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listCustomDimensions.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listCustomDimensions, request)
      );
      assert(
        (client.descriptors.page.listCustomDimensions.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listCustomDimensions without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCustomDimensionsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCustomDimensionsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomDimension()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomDimension()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomDimension()
        ),
      ];
      client.descriptors.page.listCustomDimensions.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.ICustomDimension[] =
        [];
      const iterable = client.listCustomDimensionsAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listCustomDimensions.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listCustomDimensions.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listCustomDimensions with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCustomDimensionsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCustomDimensionsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listCustomDimensions.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listCustomDimensionsAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.ICustomDimension[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listCustomDimensions.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listCustomDimensions.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listCustomMetrics', () => {
    it('invokes listCustomMetrics without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCustomMetricsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCustomMetricsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomMetric()
        ),
      ];
      client.innerApiCalls.listCustomMetrics = stubSimpleCall(expectedResponse);
      const [response] = await client.listCustomMetrics(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listCustomMetrics as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listCustomMetrics as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listCustomMetrics without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCustomMetricsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCustomMetricsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomMetric()
        ),
      ];
      client.innerApiCalls.listCustomMetrics =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listCustomMetrics(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.ICustomMetric[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listCustomMetrics as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listCustomMetrics as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listCustomMetrics with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCustomMetricsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCustomMetricsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listCustomMetrics = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listCustomMetrics(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.listCustomMetrics as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listCustomMetrics as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listCustomMetricsStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCustomMetricsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCustomMetricsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomMetric()
        ),
      ];
      client.descriptors.page.listCustomMetrics.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listCustomMetricsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.CustomMetric[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.CustomMetric) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listCustomMetrics.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listCustomMetrics, request)
      );
      assert(
        (client.descriptors.page.listCustomMetrics.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listCustomMetricsStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCustomMetricsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCustomMetricsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listCustomMetrics.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listCustomMetricsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.CustomMetric[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.CustomMetric) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listCustomMetrics.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listCustomMetrics, request)
      );
      assert(
        (client.descriptors.page.listCustomMetrics.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listCustomMetrics without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCustomMetricsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCustomMetricsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CustomMetric()
        ),
      ];
      client.descriptors.page.listCustomMetrics.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.ICustomMetric[] =
        [];
      const iterable = client.listCustomMetricsAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listCustomMetrics.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listCustomMetrics.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listCustomMetrics with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCustomMetricsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCustomMetricsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listCustomMetrics.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listCustomMetricsAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.ICustomMetric[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listCustomMetrics.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listCustomMetrics.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listDataStreams', () => {
    it('invokes listDataStreams without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDataStreamsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDataStreamsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DataStream()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DataStream()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DataStream()
        ),
      ];
      client.innerApiCalls.listDataStreams = stubSimpleCall(expectedResponse);
      const [response] = await client.listDataStreams(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listDataStreams as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listDataStreams as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listDataStreams without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDataStreamsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDataStreamsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DataStream()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DataStream()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DataStream()
        ),
      ];
      client.innerApiCalls.listDataStreams =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listDataStreams(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IDataStream[] | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listDataStreams as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listDataStreams as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listDataStreams with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDataStreamsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDataStreamsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listDataStreams = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listDataStreams(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.listDataStreams as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listDataStreams as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listDataStreamsStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDataStreamsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDataStreamsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DataStream()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DataStream()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DataStream()
        ),
      ];
      client.descriptors.page.listDataStreams.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listDataStreamsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.DataStream[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.DataStream) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listDataStreams.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listDataStreams, request)
      );
      assert(
        (client.descriptors.page.listDataStreams.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listDataStreamsStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDataStreamsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDataStreamsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listDataStreams.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listDataStreamsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.DataStream[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.DataStream) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listDataStreams.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listDataStreams, request)
      );
      assert(
        (client.descriptors.page.listDataStreams.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listDataStreams without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDataStreamsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDataStreamsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DataStream()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DataStream()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.DataStream()
        ),
      ];
      client.descriptors.page.listDataStreams.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IDataStream[] = [];
      const iterable = client.listDataStreamsAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listDataStreams.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listDataStreams.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listDataStreams with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListDataStreamsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListDataStreamsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listDataStreams.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listDataStreamsAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IDataStream[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listDataStreams.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listDataStreams.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listAudiences', () => {
    it('invokes listAudiences without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAudiencesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAudiencesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Audience()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Audience()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Audience()
        ),
      ];
      client.innerApiCalls.listAudiences = stubSimpleCall(expectedResponse);
      const [response] = await client.listAudiences(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listAudiences as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listAudiences as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listAudiences without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAudiencesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAudiencesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Audience()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Audience()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Audience()
        ),
      ];
      client.innerApiCalls.listAudiences =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listAudiences(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAudience[] | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listAudiences as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listAudiences as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listAudiences with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAudiencesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAudiencesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listAudiences = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listAudiences(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.listAudiences as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listAudiences as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listAudiencesStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAudiencesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAudiencesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Audience()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Audience()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Audience()
        ),
      ];
      client.descriptors.page.listAudiences.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listAudiencesStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.Audience[] = [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.Audience) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listAudiences.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listAudiences, request)
      );
      assert(
        (client.descriptors.page.listAudiences.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listAudiencesStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAudiencesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAudiencesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listAudiences.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listAudiencesStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.Audience[] = [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.Audience) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listAudiences.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listAudiences, request)
      );
      assert(
        (client.descriptors.page.listAudiences.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listAudiences without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAudiencesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAudiencesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Audience()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Audience()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.Audience()
        ),
      ];
      client.descriptors.page.listAudiences.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IAudience[] = [];
      const iterable = client.listAudiencesAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listAudiences.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listAudiences.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listAudiences with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAudiencesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAudiencesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listAudiences.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listAudiencesAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IAudience[] = [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listAudiences.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listAudiences.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listSearchAds360Links', () => {
    it('invokes listSearchAds360Links without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSearchAds360LinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSearchAds360LinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SearchAds360Link()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SearchAds360Link()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SearchAds360Link()
        ),
      ];
      client.innerApiCalls.listSearchAds360Links =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listSearchAds360Links(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listSearchAds360Links as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listSearchAds360Links as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listSearchAds360Links without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSearchAds360LinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSearchAds360LinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SearchAds360Link()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SearchAds360Link()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SearchAds360Link()
        ),
      ];
      client.innerApiCalls.listSearchAds360Links =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listSearchAds360Links(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.ISearchAds360Link[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listSearchAds360Links as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listSearchAds360Links as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listSearchAds360Links with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSearchAds360LinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSearchAds360LinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listSearchAds360Links = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.listSearchAds360Links(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.listSearchAds360Links as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listSearchAds360Links as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listSearchAds360LinksStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSearchAds360LinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSearchAds360LinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SearchAds360Link()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SearchAds360Link()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SearchAds360Link()
        ),
      ];
      client.descriptors.page.listSearchAds360Links.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listSearchAds360LinksStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.SearchAds360Link[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.SearchAds360Link
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (
          client.descriptors.page.listSearchAds360Links
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(client.innerApiCalls.listSearchAds360Links, request)
      );
      assert(
        (
          client.descriptors.page.listSearchAds360Links
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('invokes listSearchAds360LinksStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSearchAds360LinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSearchAds360LinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listSearchAds360Links.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listSearchAds360LinksStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.SearchAds360Link[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.SearchAds360Link
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (
          client.descriptors.page.listSearchAds360Links
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(client.innerApiCalls.listSearchAds360Links, request)
      );
      assert(
        (
          client.descriptors.page.listSearchAds360Links
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listSearchAds360Links without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSearchAds360LinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSearchAds360LinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SearchAds360Link()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SearchAds360Link()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SearchAds360Link()
        ),
      ];
      client.descriptors.page.listSearchAds360Links.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.ISearchAds360Link[] =
        [];
      const iterable = client.listSearchAds360LinksAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listSearchAds360Links
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listSearchAds360Links
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listSearchAds360Links with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSearchAds360LinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSearchAds360LinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listSearchAds360Links.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listSearchAds360LinksAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.ISearchAds360Link[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listSearchAds360Links
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listSearchAds360Links
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });
  });

  describe('listAccessBindings', () => {
    it('invokes listAccessBindings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccessBinding()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccessBinding()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccessBinding()
        ),
      ];
      client.innerApiCalls.listAccessBindings =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listAccessBindings(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listAccessBindings without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccessBinding()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccessBinding()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccessBinding()
        ),
      ];
      client.innerApiCalls.listAccessBindings =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listAccessBindings(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IAccessBinding[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listAccessBindings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listAccessBindings = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listAccessBindings(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.listAccessBindings as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listAccessBindings as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listAccessBindingsStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccessBinding()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccessBinding()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccessBinding()
        ),
      ];
      client.descriptors.page.listAccessBindings.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listAccessBindingsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.AccessBinding[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.AccessBinding) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listAccessBindings.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listAccessBindings, request)
      );
      assert(
        (client.descriptors.page.listAccessBindings.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listAccessBindingsStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listAccessBindings.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listAccessBindingsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.AccessBinding[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.AccessBinding) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listAccessBindings.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listAccessBindings, request)
      );
      assert(
        (client.descriptors.page.listAccessBindings.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listAccessBindings without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccessBinding()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccessBinding()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AccessBinding()
        ),
      ];
      client.descriptors.page.listAccessBindings.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IAccessBinding[] =
        [];
      const iterable = client.listAccessBindingsAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listAccessBindings.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listAccessBindings.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listAccessBindings with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAccessBindingsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAccessBindingsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listAccessBindings.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listAccessBindingsAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IAccessBinding[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listAccessBindings.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listAccessBindings.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listExpandedDataSets', () => {
    it('invokes listExpandedDataSets without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListExpandedDataSetsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListExpandedDataSetsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
        ),
      ];
      client.innerApiCalls.listExpandedDataSets =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listExpandedDataSets(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listExpandedDataSets as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listExpandedDataSets as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listExpandedDataSets without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListExpandedDataSetsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListExpandedDataSetsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
        ),
      ];
      client.innerApiCalls.listExpandedDataSets =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listExpandedDataSets(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IExpandedDataSet[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listExpandedDataSets as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listExpandedDataSets as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listExpandedDataSets with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListExpandedDataSetsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListExpandedDataSetsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listExpandedDataSets = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listExpandedDataSets(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.listExpandedDataSets as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listExpandedDataSets as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listExpandedDataSetsStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListExpandedDataSetsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListExpandedDataSetsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
        ),
      ];
      client.descriptors.page.listExpandedDataSets.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listExpandedDataSetsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.ExpandedDataSet[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.ExpandedDataSet) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listExpandedDataSets.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listExpandedDataSets, request)
      );
      assert(
        (client.descriptors.page.listExpandedDataSets.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listExpandedDataSetsStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListExpandedDataSetsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListExpandedDataSetsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listExpandedDataSets.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listExpandedDataSetsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.ExpandedDataSet[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.ExpandedDataSet) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listExpandedDataSets.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listExpandedDataSets, request)
      );
      assert(
        (client.descriptors.page.listExpandedDataSets.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listExpandedDataSets without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListExpandedDataSetsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListExpandedDataSetsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ExpandedDataSet()
        ),
      ];
      client.descriptors.page.listExpandedDataSets.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IExpandedDataSet[] =
        [];
      const iterable = client.listExpandedDataSetsAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listExpandedDataSets.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listExpandedDataSets.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listExpandedDataSets with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListExpandedDataSetsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListExpandedDataSetsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listExpandedDataSets.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listExpandedDataSetsAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IExpandedDataSet[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listExpandedDataSets.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listExpandedDataSets.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listChannelGroups', () => {
    it('invokes listChannelGroups without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListChannelGroupsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListChannelGroupsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChannelGroup()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChannelGroup()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChannelGroup()
        ),
      ];
      client.innerApiCalls.listChannelGroups = stubSimpleCall(expectedResponse);
      const [response] = await client.listChannelGroups(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listChannelGroups as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listChannelGroups as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listChannelGroups without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListChannelGroupsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListChannelGroupsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChannelGroup()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChannelGroup()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChannelGroup()
        ),
      ];
      client.innerApiCalls.listChannelGroups =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listChannelGroups(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IChannelGroup[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listChannelGroups as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listChannelGroups as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listChannelGroups with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListChannelGroupsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListChannelGroupsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listChannelGroups = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listChannelGroups(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.listChannelGroups as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listChannelGroups as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listChannelGroupsStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListChannelGroupsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListChannelGroupsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChannelGroup()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChannelGroup()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChannelGroup()
        ),
      ];
      client.descriptors.page.listChannelGroups.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listChannelGroupsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.ChannelGroup[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.ChannelGroup) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listChannelGroups.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listChannelGroups, request)
      );
      assert(
        (client.descriptors.page.listChannelGroups.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listChannelGroupsStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListChannelGroupsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListChannelGroupsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listChannelGroups.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listChannelGroupsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.ChannelGroup[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.ChannelGroup) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listChannelGroups.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listChannelGroups, request)
      );
      assert(
        (client.descriptors.page.listChannelGroups.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listChannelGroups without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListChannelGroupsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListChannelGroupsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChannelGroup()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChannelGroup()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ChannelGroup()
        ),
      ];
      client.descriptors.page.listChannelGroups.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IChannelGroup[] =
        [];
      const iterable = client.listChannelGroupsAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listChannelGroups.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listChannelGroups.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listChannelGroups with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListChannelGroupsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListChannelGroupsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listChannelGroups.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listChannelGroupsAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IChannelGroup[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listChannelGroups.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listChannelGroups.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listBigQueryLinks', () => {
    it('invokes listBigQueryLinks without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListBigQueryLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListBigQueryLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.BigQueryLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.BigQueryLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.BigQueryLink()
        ),
      ];
      client.innerApiCalls.listBigQueryLinks = stubSimpleCall(expectedResponse);
      const [response] = await client.listBigQueryLinks(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listBigQueryLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listBigQueryLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listBigQueryLinks without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListBigQueryLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListBigQueryLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.BigQueryLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.BigQueryLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.BigQueryLink()
        ),
      ];
      client.innerApiCalls.listBigQueryLinks =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listBigQueryLinks(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IBigQueryLink[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listBigQueryLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listBigQueryLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listBigQueryLinks with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListBigQueryLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListBigQueryLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listBigQueryLinks = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listBigQueryLinks(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.listBigQueryLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listBigQueryLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listBigQueryLinksStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListBigQueryLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListBigQueryLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.BigQueryLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.BigQueryLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.BigQueryLink()
        ),
      ];
      client.descriptors.page.listBigQueryLinks.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listBigQueryLinksStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.BigQueryLink[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.BigQueryLink) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listBigQueryLinks.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listBigQueryLinks, request)
      );
      assert(
        (client.descriptors.page.listBigQueryLinks.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listBigQueryLinksStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListBigQueryLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListBigQueryLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listBigQueryLinks.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listBigQueryLinksStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.BigQueryLink[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.BigQueryLink) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listBigQueryLinks.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listBigQueryLinks, request)
      );
      assert(
        (client.descriptors.page.listBigQueryLinks.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listBigQueryLinks without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListBigQueryLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListBigQueryLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.BigQueryLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.BigQueryLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.BigQueryLink()
        ),
      ];
      client.descriptors.page.listBigQueryLinks.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IBigQueryLink[] =
        [];
      const iterable = client.listBigQueryLinksAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listBigQueryLinks.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listBigQueryLinks.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listBigQueryLinks with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListBigQueryLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListBigQueryLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listBigQueryLinks.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listBigQueryLinksAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IBigQueryLink[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listBigQueryLinks.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listBigQueryLinks.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listAdSenseLinks', () => {
    it('invokes listAdSenseLinks without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAdSenseLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAdSenseLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AdSenseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AdSenseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AdSenseLink()
        ),
      ];
      client.innerApiCalls.listAdSenseLinks = stubSimpleCall(expectedResponse);
      const [response] = await client.listAdSenseLinks(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listAdSenseLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listAdSenseLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listAdSenseLinks without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAdSenseLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAdSenseLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AdSenseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AdSenseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AdSenseLink()
        ),
      ];
      client.innerApiCalls.listAdSenseLinks =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listAdSenseLinks(
          request,
          (
            err?: Error | null,
            result?: protos.google.analytics.admin.v1alpha.IAdSenseLink[] | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listAdSenseLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listAdSenseLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listAdSenseLinks with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAdSenseLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAdSenseLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listAdSenseLinks = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listAdSenseLinks(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.listAdSenseLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listAdSenseLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listAdSenseLinksStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAdSenseLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAdSenseLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AdSenseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AdSenseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AdSenseLink()
        ),
      ];
      client.descriptors.page.listAdSenseLinks.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listAdSenseLinksStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.AdSenseLink[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.AdSenseLink) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listAdSenseLinks.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listAdSenseLinks, request)
      );
      assert(
        (client.descriptors.page.listAdSenseLinks.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listAdSenseLinksStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAdSenseLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAdSenseLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listAdSenseLinks.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listAdSenseLinksStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.AdSenseLink[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.AdSenseLink) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listAdSenseLinks.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listAdSenseLinks, request)
      );
      assert(
        (client.descriptors.page.listAdSenseLinks.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listAdSenseLinks without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAdSenseLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAdSenseLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AdSenseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AdSenseLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.AdSenseLink()
        ),
      ];
      client.descriptors.page.listAdSenseLinks.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IAdSenseLink[] =
        [];
      const iterable = client.listAdSenseLinksAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listAdSenseLinks.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listAdSenseLinks.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listAdSenseLinks with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListAdSenseLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListAdSenseLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listAdSenseLinks.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listAdSenseLinksAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IAdSenseLink[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listAdSenseLinks.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listAdSenseLinks.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listEventCreateRules', () => {
    it('invokes listEventCreateRules without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListEventCreateRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListEventCreateRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventCreateRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventCreateRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventCreateRule()
        ),
      ];
      client.innerApiCalls.listEventCreateRules =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listEventCreateRules(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listEventCreateRules as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listEventCreateRules as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listEventCreateRules without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListEventCreateRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListEventCreateRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventCreateRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventCreateRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventCreateRule()
        ),
      ];
      client.innerApiCalls.listEventCreateRules =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listEventCreateRules(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IEventCreateRule[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listEventCreateRules as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listEventCreateRules as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listEventCreateRules with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListEventCreateRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListEventCreateRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listEventCreateRules = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listEventCreateRules(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.listEventCreateRules as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listEventCreateRules as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listEventCreateRulesStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListEventCreateRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListEventCreateRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventCreateRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventCreateRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventCreateRule()
        ),
      ];
      client.descriptors.page.listEventCreateRules.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listEventCreateRulesStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.EventCreateRule[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.EventCreateRule) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listEventCreateRules.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listEventCreateRules, request)
      );
      assert(
        (client.descriptors.page.listEventCreateRules.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listEventCreateRulesStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListEventCreateRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListEventCreateRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listEventCreateRules.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listEventCreateRulesStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.EventCreateRule[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.EventCreateRule) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listEventCreateRules.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listEventCreateRules, request)
      );
      assert(
        (client.descriptors.page.listEventCreateRules.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listEventCreateRules without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListEventCreateRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListEventCreateRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventCreateRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventCreateRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventCreateRule()
        ),
      ];
      client.descriptors.page.listEventCreateRules.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IEventCreateRule[] =
        [];
      const iterable = client.listEventCreateRulesAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listEventCreateRules.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listEventCreateRules.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listEventCreateRules with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListEventCreateRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListEventCreateRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listEventCreateRules.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listEventCreateRulesAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IEventCreateRule[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listEventCreateRules.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listEventCreateRules.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listEventEditRules', () => {
    it('invokes listEventEditRules without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListEventEditRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListEventEditRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventEditRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventEditRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventEditRule()
        ),
      ];
      client.innerApiCalls.listEventEditRules =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listEventEditRules(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listEventEditRules as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listEventEditRules as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listEventEditRules without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListEventEditRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListEventEditRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventEditRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventEditRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventEditRule()
        ),
      ];
      client.innerApiCalls.listEventEditRules =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listEventEditRules(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IEventEditRule[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listEventEditRules as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listEventEditRules as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listEventEditRules with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListEventEditRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListEventEditRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listEventEditRules = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(client.listEventEditRules(request), expectedError);
      const actualRequest = (
        client.innerApiCalls.listEventEditRules as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listEventEditRules as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listEventEditRulesStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListEventEditRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListEventEditRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventEditRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventEditRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventEditRule()
        ),
      ];
      client.descriptors.page.listEventEditRules.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listEventEditRulesStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.EventEditRule[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.EventEditRule) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (client.descriptors.page.listEventEditRules.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listEventEditRules, request)
      );
      assert(
        (client.descriptors.page.listEventEditRules.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('invokes listEventEditRulesStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListEventEditRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListEventEditRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listEventEditRules.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listEventEditRulesStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.EventEditRule[] =
          [];
        stream.on(
          'data',
          (response: protos.google.analytics.admin.v1alpha.EventEditRule) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (client.descriptors.page.listEventEditRules.createStream as SinonStub)
          .getCall(0)
          .calledWith(client.innerApiCalls.listEventEditRules, request)
      );
      assert(
        (client.descriptors.page.listEventEditRules.createStream as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listEventEditRules without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListEventEditRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListEventEditRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventEditRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventEditRule()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.EventEditRule()
        ),
      ];
      client.descriptors.page.listEventEditRules.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IEventEditRule[] =
        [];
      const iterable = client.listEventEditRulesAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listEventEditRules.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listEventEditRules.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });

    it('uses async iteration with listEventEditRules with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListEventEditRulesRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListEventEditRulesRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listEventEditRules.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listEventEditRulesAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IEventEditRule[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listEventEditRules.asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (client.descriptors.page.listEventEditRules.asyncIterate as SinonStub)
          .getCall(0)
          .args[2].otherArgs.headers[
            'x-goog-request-params'
          ].includes(expectedHeaderRequestParams)
      );
    });
  });

  describe('listCalculatedMetrics', () => {
    it('invokes listCalculatedMetrics without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCalculatedMetricsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCalculatedMetricsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CalculatedMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CalculatedMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CalculatedMetric()
        ),
      ];
      client.innerApiCalls.listCalculatedMetrics =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listCalculatedMetrics(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listCalculatedMetrics as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listCalculatedMetrics as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listCalculatedMetrics without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCalculatedMetricsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCalculatedMetricsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CalculatedMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CalculatedMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CalculatedMetric()
        ),
      ];
      client.innerApiCalls.listCalculatedMetrics =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listCalculatedMetrics(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.ICalculatedMetric[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listCalculatedMetrics as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listCalculatedMetrics as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listCalculatedMetrics with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCalculatedMetricsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCalculatedMetricsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listCalculatedMetrics = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.listCalculatedMetrics(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.listCalculatedMetrics as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listCalculatedMetrics as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listCalculatedMetricsStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCalculatedMetricsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCalculatedMetricsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CalculatedMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CalculatedMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CalculatedMetric()
        ),
      ];
      client.descriptors.page.listCalculatedMetrics.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listCalculatedMetricsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.CalculatedMetric[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.CalculatedMetric
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (
          client.descriptors.page.listCalculatedMetrics
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(client.innerApiCalls.listCalculatedMetrics, request)
      );
      assert(
        (
          client.descriptors.page.listCalculatedMetrics
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('invokes listCalculatedMetricsStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCalculatedMetricsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCalculatedMetricsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listCalculatedMetrics.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listCalculatedMetricsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.CalculatedMetric[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.CalculatedMetric
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (
          client.descriptors.page.listCalculatedMetrics
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(client.innerApiCalls.listCalculatedMetrics, request)
      );
      assert(
        (
          client.descriptors.page.listCalculatedMetrics
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listCalculatedMetrics without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCalculatedMetricsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCalculatedMetricsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CalculatedMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CalculatedMetric()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.CalculatedMetric()
        ),
      ];
      client.descriptors.page.listCalculatedMetrics.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.ICalculatedMetric[] =
        [];
      const iterable = client.listCalculatedMetricsAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listCalculatedMetrics
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listCalculatedMetrics
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listCalculatedMetrics with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListCalculatedMetricsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListCalculatedMetricsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listCalculatedMetrics.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listCalculatedMetricsAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.ICalculatedMetric[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listCalculatedMetrics
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listCalculatedMetrics
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });
  });

  describe('listRollupPropertySourceLinks', () => {
    it('invokes listRollupPropertySourceLinks without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListRollupPropertySourceLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListRollupPropertySourceLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
        ),
      ];
      client.innerApiCalls.listRollupPropertySourceLinks =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listRollupPropertySourceLinks(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listRollupPropertySourceLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listRollupPropertySourceLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listRollupPropertySourceLinks without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListRollupPropertySourceLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListRollupPropertySourceLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
        ),
      ];
      client.innerApiCalls.listRollupPropertySourceLinks =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listRollupPropertySourceLinks(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IRollupPropertySourceLink[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listRollupPropertySourceLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listRollupPropertySourceLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listRollupPropertySourceLinks with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListRollupPropertySourceLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListRollupPropertySourceLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listRollupPropertySourceLinks = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.listRollupPropertySourceLinks(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.listRollupPropertySourceLinks as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listRollupPropertySourceLinks as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listRollupPropertySourceLinksStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListRollupPropertySourceLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListRollupPropertySourceLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
        ),
      ];
      client.descriptors.page.listRollupPropertySourceLinks.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listRollupPropertySourceLinksStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.RollupPropertySourceLink[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.RollupPropertySourceLink
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (
          client.descriptors.page.listRollupPropertySourceLinks
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(
            client.innerApiCalls.listRollupPropertySourceLinks,
            request
          )
      );
      assert(
        (
          client.descriptors.page.listRollupPropertySourceLinks
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('invokes listRollupPropertySourceLinksStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListRollupPropertySourceLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListRollupPropertySourceLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listRollupPropertySourceLinks.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listRollupPropertySourceLinksStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.RollupPropertySourceLink[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.RollupPropertySourceLink
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (
          client.descriptors.page.listRollupPropertySourceLinks
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(
            client.innerApiCalls.listRollupPropertySourceLinks,
            request
          )
      );
      assert(
        (
          client.descriptors.page.listRollupPropertySourceLinks
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listRollupPropertySourceLinks without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListRollupPropertySourceLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListRollupPropertySourceLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.RollupPropertySourceLink()
        ),
      ];
      client.descriptors.page.listRollupPropertySourceLinks.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IRollupPropertySourceLink[] =
        [];
      const iterable = client.listRollupPropertySourceLinksAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listRollupPropertySourceLinks
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listRollupPropertySourceLinks
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listRollupPropertySourceLinks with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListRollupPropertySourceLinksRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListRollupPropertySourceLinksRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listRollupPropertySourceLinks.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listRollupPropertySourceLinksAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IRollupPropertySourceLink[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listRollupPropertySourceLinks
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listRollupPropertySourceLinks
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });
  });

  describe('listSubpropertyEventFilters', () => {
    it('invokes listSubpropertyEventFilters without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSubpropertyEventFiltersRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSubpropertyEventFiltersRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
        ),
      ];
      client.innerApiCalls.listSubpropertyEventFilters =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listSubpropertyEventFilters(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listSubpropertyEventFilters as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listSubpropertyEventFilters as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listSubpropertyEventFilters without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSubpropertyEventFiltersRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSubpropertyEventFiltersRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
        ),
      ];
      client.innerApiCalls.listSubpropertyEventFilters =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listSubpropertyEventFilters(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.ISubpropertyEventFilter[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listSubpropertyEventFilters as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listSubpropertyEventFilters as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listSubpropertyEventFilters with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSubpropertyEventFiltersRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSubpropertyEventFiltersRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listSubpropertyEventFilters = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.listSubpropertyEventFilters(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.listSubpropertyEventFilters as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listSubpropertyEventFilters as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listSubpropertyEventFiltersStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSubpropertyEventFiltersRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSubpropertyEventFiltersRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
        ),
      ];
      client.descriptors.page.listSubpropertyEventFilters.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listSubpropertyEventFiltersStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.SubpropertyEventFilter[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.SubpropertyEventFilter
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (
          client.descriptors.page.listSubpropertyEventFilters
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(client.innerApiCalls.listSubpropertyEventFilters, request)
      );
      assert(
        (
          client.descriptors.page.listSubpropertyEventFilters
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('invokes listSubpropertyEventFiltersStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSubpropertyEventFiltersRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSubpropertyEventFiltersRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listSubpropertyEventFilters.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listSubpropertyEventFiltersStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.SubpropertyEventFilter[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.SubpropertyEventFilter
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (
          client.descriptors.page.listSubpropertyEventFilters
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(client.innerApiCalls.listSubpropertyEventFilters, request)
      );
      assert(
        (
          client.descriptors.page.listSubpropertyEventFilters
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listSubpropertyEventFilters without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSubpropertyEventFiltersRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSubpropertyEventFiltersRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.SubpropertyEventFilter()
        ),
      ];
      client.descriptors.page.listSubpropertyEventFilters.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.ISubpropertyEventFilter[] =
        [];
      const iterable = client.listSubpropertyEventFiltersAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listSubpropertyEventFilters
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listSubpropertyEventFilters
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listSubpropertyEventFilters with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListSubpropertyEventFiltersRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListSubpropertyEventFiltersRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listSubpropertyEventFilters.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listSubpropertyEventFiltersAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.ISubpropertyEventFilter[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listSubpropertyEventFilters
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listSubpropertyEventFilters
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });
  });

  describe('listReportingDataAnnotations', () => {
    it('invokes listReportingDataAnnotations without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListReportingDataAnnotationsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListReportingDataAnnotationsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
        ),
      ];
      client.innerApiCalls.listReportingDataAnnotations =
        stubSimpleCall(expectedResponse);
      const [response] = await client.listReportingDataAnnotations(request);
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listReportingDataAnnotations as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listReportingDataAnnotations as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listReportingDataAnnotations without error using callback', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListReportingDataAnnotationsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListReportingDataAnnotationsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
        ),
      ];
      client.innerApiCalls.listReportingDataAnnotations =
        stubSimpleCallWithCallback(expectedResponse);
      const promise = new Promise((resolve, reject) => {
        client.listReportingDataAnnotations(
          request,
          (
            err?: Error | null,
            result?:
              | protos.google.analytics.admin.v1alpha.IReportingDataAnnotation[]
              | null
          ) => {
            if (err) {
              reject(err);
            } else {
              resolve(result);
            }
          }
        );
      });
      const response = await promise;
      assert.deepStrictEqual(response, expectedResponse);
      const actualRequest = (
        client.innerApiCalls.listReportingDataAnnotations as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listReportingDataAnnotations as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listReportingDataAnnotations with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListReportingDataAnnotationsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListReportingDataAnnotationsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.innerApiCalls.listReportingDataAnnotations = stubSimpleCall(
        undefined,
        expectedError
      );
      await assert.rejects(
        client.listReportingDataAnnotations(request),
        expectedError
      );
      const actualRequest = (
        client.innerApiCalls.listReportingDataAnnotations as SinonStub
      ).getCall(0).args[0];
      assert.deepStrictEqual(actualRequest, request);
      const actualHeaderRequestParams = (
        client.innerApiCalls.listReportingDataAnnotations as SinonStub
      ).getCall(0).args[1].otherArgs.headers['x-goog-request-params'];
      assert(actualHeaderRequestParams.includes(expectedHeaderRequestParams));
    });

    it('invokes listReportingDataAnnotationsStream without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListReportingDataAnnotationsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListReportingDataAnnotationsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
        ),
      ];
      client.descriptors.page.listReportingDataAnnotations.createStream =
        stubPageStreamingCall(expectedResponse);
      const stream = client.listReportingDataAnnotationsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.ReportingDataAnnotation[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.ReportingDataAnnotation
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      const responses = await promise;
      assert.deepStrictEqual(responses, expectedResponse);
      assert(
        (
          client.descriptors.page.listReportingDataAnnotations
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(
            client.innerApiCalls.listReportingDataAnnotations,
            request
          )
      );
      assert(
        (
          client.descriptors.page.listReportingDataAnnotations
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('invokes listReportingDataAnnotationsStream with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListReportingDataAnnotationsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListReportingDataAnnotationsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listReportingDataAnnotations.createStream =
        stubPageStreamingCall(undefined, expectedError);
      const stream = client.listReportingDataAnnotationsStream(request);
      const promise = new Promise((resolve, reject) => {
        const responses: protos.google.analytics.admin.v1alpha.ReportingDataAnnotation[] =
          [];
        stream.on(
          'data',
          (
            response: protos.google.analytics.admin.v1alpha.ReportingDataAnnotation
          ) => {
            responses.push(response);
          }
        );
        stream.on('end', () => {
          resolve(responses);
        });
        stream.on('error', (err: Error) => {
          reject(err);
        });
      });
      await assert.rejects(promise, expectedError);
      assert(
        (
          client.descriptors.page.listReportingDataAnnotations
            .createStream as SinonStub
        )
          .getCall(0)
          .calledWith(
            client.innerApiCalls.listReportingDataAnnotations,
            request
          )
      );
      assert(
        (
          client.descriptors.page.listReportingDataAnnotations
            .createStream as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listReportingDataAnnotations without error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListReportingDataAnnotationsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListReportingDataAnnotationsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedResponse = [
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
        ),
        generateSampleMessage(
          new protos.google.analytics.admin.v1alpha.ReportingDataAnnotation()
        ),
      ];
      client.descriptors.page.listReportingDataAnnotations.asyncIterate =
        stubAsyncIterationCall(expectedResponse);
      const responses: protos.google.analytics.admin.v1alpha.IReportingDataAnnotation[] =
        [];
      const iterable = client.listReportingDataAnnotationsAsync(request);
      for await (const resource of iterable) {
        responses.push(resource!);
      }
      assert.deepStrictEqual(responses, expectedResponse);
      assert.deepStrictEqual(
        (
          client.descriptors.page.listReportingDataAnnotations
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listReportingDataAnnotations
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });

    it('uses async iteration with listReportingDataAnnotations with error', async () => {
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      const request = generateSampleMessage(
        new protos.google.analytics.admin.v1alpha.ListReportingDataAnnotationsRequest()
      );
      const defaultValue1 = getTypeDefaultValue(
        '.google.analytics.admin.v1alpha.ListReportingDataAnnotationsRequest',
        ['parent']
      );
      request.parent = defaultValue1;
      const expectedHeaderRequestParams = `parent=${defaultValue1 ?? ''}`;
      const expectedError = new Error('expected');
      client.descriptors.page.listReportingDataAnnotations.asyncIterate =
        stubAsyncIterationCall(undefined, expectedError);
      const iterable = client.listReportingDataAnnotationsAsync(request);
      await assert.rejects(async () => {
        const responses: protos.google.analytics.admin.v1alpha.IReportingDataAnnotation[] =
          [];
        for await (const resource of iterable) {
          responses.push(resource!);
        }
      });
      assert.deepStrictEqual(
        (
          client.descriptors.page.listReportingDataAnnotations
            .asyncIterate as SinonStub
        ).getCall(0).args[1],
        request
      );
      assert(
        (
          client.descriptors.page.listReportingDataAnnotations
            .asyncIterate as SinonStub
        )
          .getCall(0)
          .args[2].otherArgs.headers['x-goog-request-params'].includes(
            expectedHeaderRequestParams
          )
      );
    });
  });

  describe('Path templates', () => {
    describe('account', async () => {
      const fakePath = '/rendered/path/account';
      const expectedParameters = {
        account: 'accountValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.accountPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.accountPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('accountPath', () => {
        const result = client.accountPath('accountValue');
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.accountPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchAccountFromAccountName', () => {
        const result = client.matchAccountFromAccountName(fakePath);
        assert.strictEqual(result, 'accountValue');
        assert(
          (client.pathTemplates.accountPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('accountAccessBinding', async () => {
      const fakePath = '/rendered/path/accountAccessBinding';
      const expectedParameters = {
        account: 'accountValue',
        access_binding: 'accessBindingValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.accountAccessBindingPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.accountAccessBindingPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('accountAccessBindingPath', () => {
        const result = client.accountAccessBindingPath(
          'accountValue',
          'accessBindingValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.accountAccessBindingPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchAccountFromAccountAccessBindingName', () => {
        const result =
          client.matchAccountFromAccountAccessBindingName(fakePath);
        assert.strictEqual(result, 'accountValue');
        assert(
          (
            client.pathTemplates.accountAccessBindingPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchAccessBindingFromAccountAccessBindingName', () => {
        const result =
          client.matchAccessBindingFromAccountAccessBindingName(fakePath);
        assert.strictEqual(result, 'accessBindingValue');
        assert(
          (
            client.pathTemplates.accountAccessBindingPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('accountSummary', async () => {
      const fakePath = '/rendered/path/accountSummary';
      const expectedParameters = {
        account_summary: 'accountSummaryValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.accountSummaryPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.accountSummaryPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('accountSummaryPath', () => {
        const result = client.accountSummaryPath('accountSummaryValue');
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.accountSummaryPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchAccountSummaryFromAccountSummaryName', () => {
        const result =
          client.matchAccountSummaryFromAccountSummaryName(fakePath);
        assert.strictEqual(result, 'accountSummaryValue');
        assert(
          (client.pathTemplates.accountSummaryPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('adSenseLink', async () => {
      const fakePath = '/rendered/path/adSenseLink';
      const expectedParameters = {
        property: 'propertyValue',
        adsense_link: 'adsenseLinkValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.adSenseLinkPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.adSenseLinkPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('adSenseLinkPath', () => {
        const result = client.adSenseLinkPath(
          'propertyValue',
          'adsenseLinkValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.adSenseLinkPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromAdSenseLinkName', () => {
        const result = client.matchPropertyFromAdSenseLinkName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.adSenseLinkPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchAdsenseLinkFromAdSenseLinkName', () => {
        const result = client.matchAdsenseLinkFromAdSenseLinkName(fakePath);
        assert.strictEqual(result, 'adsenseLinkValue');
        assert(
          (client.pathTemplates.adSenseLinkPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('attributionSettings', async () => {
      const fakePath = '/rendered/path/attributionSettings';
      const expectedParameters = {
        property: 'propertyValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.attributionSettingsPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.attributionSettingsPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('attributionSettingsPath', () => {
        const result = client.attributionSettingsPath('propertyValue');
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.attributionSettingsPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromAttributionSettingsName', () => {
        const result =
          client.matchPropertyFromAttributionSettingsName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (
            client.pathTemplates.attributionSettingsPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('audience', async () => {
      const fakePath = '/rendered/path/audience';
      const expectedParameters = {
        property: 'propertyValue',
        audience: 'audienceValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.audiencePathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.audiencePathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('audiencePath', () => {
        const result = client.audiencePath('propertyValue', 'audienceValue');
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.audiencePathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromAudienceName', () => {
        const result = client.matchPropertyFromAudienceName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.audiencePathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchAudienceFromAudienceName', () => {
        const result = client.matchAudienceFromAudienceName(fakePath);
        assert.strictEqual(result, 'audienceValue');
        assert(
          (client.pathTemplates.audiencePathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('bigQueryLink', async () => {
      const fakePath = '/rendered/path/bigQueryLink';
      const expectedParameters = {
        property: 'propertyValue',
        bigquery_link: 'bigqueryLinkValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.bigQueryLinkPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.bigQueryLinkPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('bigQueryLinkPath', () => {
        const result = client.bigQueryLinkPath(
          'propertyValue',
          'bigqueryLinkValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.bigQueryLinkPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromBigQueryLinkName', () => {
        const result = client.matchPropertyFromBigQueryLinkName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.bigQueryLinkPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchBigqueryLinkFromBigQueryLinkName', () => {
        const result = client.matchBigqueryLinkFromBigQueryLinkName(fakePath);
        assert.strictEqual(result, 'bigqueryLinkValue');
        assert(
          (client.pathTemplates.bigQueryLinkPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('calculatedMetric', async () => {
      const fakePath = '/rendered/path/calculatedMetric';
      const expectedParameters = {
        property: 'propertyValue',
        calculated_metric: 'calculatedMetricValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.calculatedMetricPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.calculatedMetricPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('calculatedMetricPath', () => {
        const result = client.calculatedMetricPath(
          'propertyValue',
          'calculatedMetricValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.calculatedMetricPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromCalculatedMetricName', () => {
        const result = client.matchPropertyFromCalculatedMetricName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.calculatedMetricPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchCalculatedMetricFromCalculatedMetricName', () => {
        const result =
          client.matchCalculatedMetricFromCalculatedMetricName(fakePath);
        assert.strictEqual(result, 'calculatedMetricValue');
        assert(
          (client.pathTemplates.calculatedMetricPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('channelGroup', async () => {
      const fakePath = '/rendered/path/channelGroup';
      const expectedParameters = {
        property: 'propertyValue',
        channel_group: 'channelGroupValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.channelGroupPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.channelGroupPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('channelGroupPath', () => {
        const result = client.channelGroupPath(
          'propertyValue',
          'channelGroupValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.channelGroupPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromChannelGroupName', () => {
        const result = client.matchPropertyFromChannelGroupName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.channelGroupPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchChannelGroupFromChannelGroupName', () => {
        const result = client.matchChannelGroupFromChannelGroupName(fakePath);
        assert.strictEqual(result, 'channelGroupValue');
        assert(
          (client.pathTemplates.channelGroupPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('conversionEvent', async () => {
      const fakePath = '/rendered/path/conversionEvent';
      const expectedParameters = {
        property: 'propertyValue',
        conversion_event: 'conversionEventValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.conversionEventPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.conversionEventPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('conversionEventPath', () => {
        const result = client.conversionEventPath(
          'propertyValue',
          'conversionEventValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.conversionEventPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromConversionEventName', () => {
        const result = client.matchPropertyFromConversionEventName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.conversionEventPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchConversionEventFromConversionEventName', () => {
        const result =
          client.matchConversionEventFromConversionEventName(fakePath);
        assert.strictEqual(result, 'conversionEventValue');
        assert(
          (client.pathTemplates.conversionEventPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('customDimension', async () => {
      const fakePath = '/rendered/path/customDimension';
      const expectedParameters = {
        property: 'propertyValue',
        custom_dimension: 'customDimensionValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.customDimensionPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.customDimensionPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('customDimensionPath', () => {
        const result = client.customDimensionPath(
          'propertyValue',
          'customDimensionValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.customDimensionPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromCustomDimensionName', () => {
        const result = client.matchPropertyFromCustomDimensionName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.customDimensionPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchCustomDimensionFromCustomDimensionName', () => {
        const result =
          client.matchCustomDimensionFromCustomDimensionName(fakePath);
        assert.strictEqual(result, 'customDimensionValue');
        assert(
          (client.pathTemplates.customDimensionPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('customMetric', async () => {
      const fakePath = '/rendered/path/customMetric';
      const expectedParameters = {
        property: 'propertyValue',
        custom_metric: 'customMetricValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.customMetricPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.customMetricPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('customMetricPath', () => {
        const result = client.customMetricPath(
          'propertyValue',
          'customMetricValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.customMetricPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromCustomMetricName', () => {
        const result = client.matchPropertyFromCustomMetricName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.customMetricPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchCustomMetricFromCustomMetricName', () => {
        const result = client.matchCustomMetricFromCustomMetricName(fakePath);
        assert.strictEqual(result, 'customMetricValue');
        assert(
          (client.pathTemplates.customMetricPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('dataRedactionSettings', async () => {
      const fakePath = '/rendered/path/dataRedactionSettings';
      const expectedParameters = {
        property: 'propertyValue',
        data_stream: 'dataStreamValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.dataRedactionSettingsPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.dataRedactionSettingsPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('dataRedactionSettingsPath', () => {
        const result = client.dataRedactionSettingsPath(
          'propertyValue',
          'dataStreamValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.dataRedactionSettingsPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromDataRedactionSettingsName', () => {
        const result =
          client.matchPropertyFromDataRedactionSettingsName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (
            client.pathTemplates.dataRedactionSettingsPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchDataStreamFromDataRedactionSettingsName', () => {
        const result =
          client.matchDataStreamFromDataRedactionSettingsName(fakePath);
        assert.strictEqual(result, 'dataStreamValue');
        assert(
          (
            client.pathTemplates.dataRedactionSettingsPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('dataRetentionSettings', async () => {
      const fakePath = '/rendered/path/dataRetentionSettings';
      const expectedParameters = {
        property: 'propertyValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.dataRetentionSettingsPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.dataRetentionSettingsPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('dataRetentionSettingsPath', () => {
        const result = client.dataRetentionSettingsPath('propertyValue');
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.dataRetentionSettingsPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromDataRetentionSettingsName', () => {
        const result =
          client.matchPropertyFromDataRetentionSettingsName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (
            client.pathTemplates.dataRetentionSettingsPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('dataSharingSettings', async () => {
      const fakePath = '/rendered/path/dataSharingSettings';
      const expectedParameters = {
        account: 'accountValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.dataSharingSettingsPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.dataSharingSettingsPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('dataSharingSettingsPath', () => {
        const result = client.dataSharingSettingsPath('accountValue');
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.dataSharingSettingsPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchAccountFromDataSharingSettingsName', () => {
        const result = client.matchAccountFromDataSharingSettingsName(fakePath);
        assert.strictEqual(result, 'accountValue');
        assert(
          (
            client.pathTemplates.dataSharingSettingsPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('dataStream', async () => {
      const fakePath = '/rendered/path/dataStream';
      const expectedParameters = {
        property: 'propertyValue',
        data_stream: 'dataStreamValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.dataStreamPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.dataStreamPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('dataStreamPath', () => {
        const result = client.dataStreamPath(
          'propertyValue',
          'dataStreamValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.dataStreamPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromDataStreamName', () => {
        const result = client.matchPropertyFromDataStreamName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.dataStreamPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchDataStreamFromDataStreamName', () => {
        const result = client.matchDataStreamFromDataStreamName(fakePath);
        assert.strictEqual(result, 'dataStreamValue');
        assert(
          (client.pathTemplates.dataStreamPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('displayVideo360AdvertiserLink', async () => {
      const fakePath = '/rendered/path/displayVideo360AdvertiserLink';
      const expectedParameters = {
        property: 'propertyValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.displayVideo360AdvertiserLinkPathTemplate.render =
        sinon.stub().returns(fakePath);
      client.pathTemplates.displayVideo360AdvertiserLinkPathTemplate.match =
        sinon.stub().returns(expectedParameters);

      it('displayVideo360AdvertiserLinkPath', () => {
        const result =
          client.displayVideo360AdvertiserLinkPath('propertyValue');
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.displayVideo360AdvertiserLinkPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromDisplayVideo360AdvertiserLinkName', () => {
        const result =
          client.matchPropertyFromDisplayVideo360AdvertiserLinkName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (
            client.pathTemplates.displayVideo360AdvertiserLinkPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('displayVideo360AdvertiserLinkProposal', async () => {
      const fakePath = '/rendered/path/displayVideo360AdvertiserLinkProposal';
      const expectedParameters = {
        property: 'propertyValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.displayVideo360AdvertiserLinkProposalPathTemplate.render =
        sinon.stub().returns(fakePath);
      client.pathTemplates.displayVideo360AdvertiserLinkProposalPathTemplate.match =
        sinon.stub().returns(expectedParameters);

      it('displayVideo360AdvertiserLinkProposalPath', () => {
        const result =
          client.displayVideo360AdvertiserLinkProposalPath('propertyValue');
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates
              .displayVideo360AdvertiserLinkProposalPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromDisplayVideo360AdvertiserLinkProposalName', () => {
        const result =
          client.matchPropertyFromDisplayVideo360AdvertiserLinkProposalName(
            fakePath
          );
        assert.strictEqual(result, 'propertyValue');
        assert(
          (
            client.pathTemplates
              .displayVideo360AdvertiserLinkProposalPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('enhancedMeasurementSettings', async () => {
      const fakePath = '/rendered/path/enhancedMeasurementSettings';
      const expectedParameters = {
        property: 'propertyValue',
        data_stream: 'dataStreamValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.enhancedMeasurementSettingsPathTemplate.render =
        sinon.stub().returns(fakePath);
      client.pathTemplates.enhancedMeasurementSettingsPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('enhancedMeasurementSettingsPath', () => {
        const result = client.enhancedMeasurementSettingsPath(
          'propertyValue',
          'dataStreamValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.enhancedMeasurementSettingsPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromEnhancedMeasurementSettingsName', () => {
        const result =
          client.matchPropertyFromEnhancedMeasurementSettingsName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (
            client.pathTemplates.enhancedMeasurementSettingsPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchDataStreamFromEnhancedMeasurementSettingsName', () => {
        const result =
          client.matchDataStreamFromEnhancedMeasurementSettingsName(fakePath);
        assert.strictEqual(result, 'dataStreamValue');
        assert(
          (
            client.pathTemplates.enhancedMeasurementSettingsPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('eventCreateRule', async () => {
      const fakePath = '/rendered/path/eventCreateRule';
      const expectedParameters = {
        property: 'propertyValue',
        data_stream: 'dataStreamValue',
        event_create_rule: 'eventCreateRuleValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.eventCreateRulePathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.eventCreateRulePathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('eventCreateRulePath', () => {
        const result = client.eventCreateRulePath(
          'propertyValue',
          'dataStreamValue',
          'eventCreateRuleValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.eventCreateRulePathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromEventCreateRuleName', () => {
        const result = client.matchPropertyFromEventCreateRuleName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.eventCreateRulePathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchDataStreamFromEventCreateRuleName', () => {
        const result = client.matchDataStreamFromEventCreateRuleName(fakePath);
        assert.strictEqual(result, 'dataStreamValue');
        assert(
          (client.pathTemplates.eventCreateRulePathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchEventCreateRuleFromEventCreateRuleName', () => {
        const result =
          client.matchEventCreateRuleFromEventCreateRuleName(fakePath);
        assert.strictEqual(result, 'eventCreateRuleValue');
        assert(
          (client.pathTemplates.eventCreateRulePathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('eventEditRule', async () => {
      const fakePath = '/rendered/path/eventEditRule';
      const expectedParameters = {
        property: 'propertyValue',
        data_stream: 'dataStreamValue',
        event_edit_rule: 'eventEditRuleValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.eventEditRulePathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.eventEditRulePathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('eventEditRulePath', () => {
        const result = client.eventEditRulePath(
          'propertyValue',
          'dataStreamValue',
          'eventEditRuleValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.eventEditRulePathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromEventEditRuleName', () => {
        const result = client.matchPropertyFromEventEditRuleName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.eventEditRulePathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchDataStreamFromEventEditRuleName', () => {
        const result = client.matchDataStreamFromEventEditRuleName(fakePath);
        assert.strictEqual(result, 'dataStreamValue');
        assert(
          (client.pathTemplates.eventEditRulePathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchEventEditRuleFromEventEditRuleName', () => {
        const result = client.matchEventEditRuleFromEventEditRuleName(fakePath);
        assert.strictEqual(result, 'eventEditRuleValue');
        assert(
          (client.pathTemplates.eventEditRulePathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('expandedDataSet', async () => {
      const fakePath = '/rendered/path/expandedDataSet';
      const expectedParameters = {
        property: 'propertyValue',
        expanded_data_set: 'expandedDataSetValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.expandedDataSetPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.expandedDataSetPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('expandedDataSetPath', () => {
        const result = client.expandedDataSetPath(
          'propertyValue',
          'expandedDataSetValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.expandedDataSetPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromExpandedDataSetName', () => {
        const result = client.matchPropertyFromExpandedDataSetName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.expandedDataSetPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchExpandedDataSetFromExpandedDataSetName', () => {
        const result =
          client.matchExpandedDataSetFromExpandedDataSetName(fakePath);
        assert.strictEqual(result, 'expandedDataSetValue');
        assert(
          (client.pathTemplates.expandedDataSetPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('firebaseLink', async () => {
      const fakePath = '/rendered/path/firebaseLink';
      const expectedParameters = {
        property: 'propertyValue',
        firebase_link: 'firebaseLinkValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.firebaseLinkPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.firebaseLinkPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('firebaseLinkPath', () => {
        const result = client.firebaseLinkPath(
          'propertyValue',
          'firebaseLinkValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.firebaseLinkPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromFirebaseLinkName', () => {
        const result = client.matchPropertyFromFirebaseLinkName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.firebaseLinkPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchFirebaseLinkFromFirebaseLinkName', () => {
        const result = client.matchFirebaseLinkFromFirebaseLinkName(fakePath);
        assert.strictEqual(result, 'firebaseLinkValue');
        assert(
          (client.pathTemplates.firebaseLinkPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('globalSiteTag', async () => {
      const fakePath = '/rendered/path/globalSiteTag';
      const expectedParameters = {
        property: 'propertyValue',
        data_stream: 'dataStreamValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.globalSiteTagPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.globalSiteTagPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('globalSiteTagPath', () => {
        const result = client.globalSiteTagPath(
          'propertyValue',
          'dataStreamValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.globalSiteTagPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromGlobalSiteTagName', () => {
        const result = client.matchPropertyFromGlobalSiteTagName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.globalSiteTagPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchDataStreamFromGlobalSiteTagName', () => {
        const result = client.matchDataStreamFromGlobalSiteTagName(fakePath);
        assert.strictEqual(result, 'dataStreamValue');
        assert(
          (client.pathTemplates.globalSiteTagPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('googleAdsLink', async () => {
      const fakePath = '/rendered/path/googleAdsLink';
      const expectedParameters = {
        property: 'propertyValue',
        google_ads_link: 'googleAdsLinkValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.googleAdsLinkPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.googleAdsLinkPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('googleAdsLinkPath', () => {
        const result = client.googleAdsLinkPath(
          'propertyValue',
          'googleAdsLinkValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.googleAdsLinkPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromGoogleAdsLinkName', () => {
        const result = client.matchPropertyFromGoogleAdsLinkName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.googleAdsLinkPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchGoogleAdsLinkFromGoogleAdsLinkName', () => {
        const result = client.matchGoogleAdsLinkFromGoogleAdsLinkName(fakePath);
        assert.strictEqual(result, 'googleAdsLinkValue');
        assert(
          (client.pathTemplates.googleAdsLinkPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('googleSignalsSettings', async () => {
      const fakePath = '/rendered/path/googleSignalsSettings';
      const expectedParameters = {
        property: 'propertyValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.googleSignalsSettingsPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.googleSignalsSettingsPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('googleSignalsSettingsPath', () => {
        const result = client.googleSignalsSettingsPath('propertyValue');
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.googleSignalsSettingsPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromGoogleSignalsSettingsName', () => {
        const result =
          client.matchPropertyFromGoogleSignalsSettingsName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (
            client.pathTemplates.googleSignalsSettingsPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('keyEvent', async () => {
      const fakePath = '/rendered/path/keyEvent';
      const expectedParameters = {
        property: 'propertyValue',
        key_event: 'keyEventValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.keyEventPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.keyEventPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('keyEventPath', () => {
        const result = client.keyEventPath('propertyValue', 'keyEventValue');
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.keyEventPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromKeyEventName', () => {
        const result = client.matchPropertyFromKeyEventName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.keyEventPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchKeyEventFromKeyEventName', () => {
        const result = client.matchKeyEventFromKeyEventName(fakePath);
        assert.strictEqual(result, 'keyEventValue');
        assert(
          (client.pathTemplates.keyEventPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('measurementProtocolSecret', async () => {
      const fakePath = '/rendered/path/measurementProtocolSecret';
      const expectedParameters = {
        property: 'propertyValue',
        data_stream: 'dataStreamValue',
        measurement_protocol_secret: 'measurementProtocolSecretValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.measurementProtocolSecretPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.measurementProtocolSecretPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('measurementProtocolSecretPath', () => {
        const result = client.measurementProtocolSecretPath(
          'propertyValue',
          'dataStreamValue',
          'measurementProtocolSecretValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.measurementProtocolSecretPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromMeasurementProtocolSecretName', () => {
        const result =
          client.matchPropertyFromMeasurementProtocolSecretName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (
            client.pathTemplates.measurementProtocolSecretPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchDataStreamFromMeasurementProtocolSecretName', () => {
        const result =
          client.matchDataStreamFromMeasurementProtocolSecretName(fakePath);
        assert.strictEqual(result, 'dataStreamValue');
        assert(
          (
            client.pathTemplates.measurementProtocolSecretPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchMeasurementProtocolSecretFromMeasurementProtocolSecretName', () => {
        const result =
          client.matchMeasurementProtocolSecretFromMeasurementProtocolSecretName(
            fakePath
          );
        assert.strictEqual(result, 'measurementProtocolSecretValue');
        assert(
          (
            client.pathTemplates.measurementProtocolSecretPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('property', async () => {
      const fakePath = '/rendered/path/property';
      const expectedParameters = {
        property: 'propertyValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.propertyPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.propertyPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('propertyPath', () => {
        const result = client.propertyPath('propertyValue');
        assert.strictEqual(result, fakePath);
        assert(
          (client.pathTemplates.propertyPathTemplate.render as SinonStub)
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromPropertyName', () => {
        const result = client.matchPropertyFromPropertyName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.propertyPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('propertyAccessBinding', async () => {
      const fakePath = '/rendered/path/propertyAccessBinding';
      const expectedParameters = {
        property: 'propertyValue',
        access_binding: 'accessBindingValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.propertyAccessBindingPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.propertyAccessBindingPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('propertyAccessBindingPath', () => {
        const result = client.propertyAccessBindingPath(
          'propertyValue',
          'accessBindingValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.propertyAccessBindingPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromPropertyAccessBindingName', () => {
        const result =
          client.matchPropertyFromPropertyAccessBindingName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (
            client.pathTemplates.propertyAccessBindingPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchAccessBindingFromPropertyAccessBindingName', () => {
        const result =
          client.matchAccessBindingFromPropertyAccessBindingName(fakePath);
        assert.strictEqual(result, 'accessBindingValue');
        assert(
          (
            client.pathTemplates.propertyAccessBindingPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('reportingDataAnnotation', async () => {
      const fakePath = '/rendered/path/reportingDataAnnotation';
      const expectedParameters = {
        property: 'propertyValue',
        reporting_data_annotation: 'reportingDataAnnotationValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.reportingDataAnnotationPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.reportingDataAnnotationPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('reportingDataAnnotationPath', () => {
        const result = client.reportingDataAnnotationPath(
          'propertyValue',
          'reportingDataAnnotationValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.reportingDataAnnotationPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromReportingDataAnnotationName', () => {
        const result =
          client.matchPropertyFromReportingDataAnnotationName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (
            client.pathTemplates.reportingDataAnnotationPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchReportingDataAnnotationFromReportingDataAnnotationName', () => {
        const result =
          client.matchReportingDataAnnotationFromReportingDataAnnotationName(
            fakePath
          );
        assert.strictEqual(result, 'reportingDataAnnotationValue');
        assert(
          (
            client.pathTemplates.reportingDataAnnotationPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('rollupPropertySourceLink', async () => {
      const fakePath = '/rendered/path/rollupPropertySourceLink';
      const expectedParameters = {
        property: 'propertyValue',
        rollup_property_source_link: 'rollupPropertySourceLinkValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.rollupPropertySourceLinkPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.rollupPropertySourceLinkPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('rollupPropertySourceLinkPath', () => {
        const result = client.rollupPropertySourceLinkPath(
          'propertyValue',
          'rollupPropertySourceLinkValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.rollupPropertySourceLinkPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromRollupPropertySourceLinkName', () => {
        const result =
          client.matchPropertyFromRollupPropertySourceLinkName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (
            client.pathTemplates.rollupPropertySourceLinkPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchRollupPropertySourceLinkFromRollupPropertySourceLinkName', () => {
        const result =
          client.matchRollupPropertySourceLinkFromRollupPropertySourceLinkName(
            fakePath
          );
        assert.strictEqual(result, 'rollupPropertySourceLinkValue');
        assert(
          (
            client.pathTemplates.rollupPropertySourceLinkPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('sKAdNetworkConversionValueSchema', async () => {
      const fakePath = '/rendered/path/sKAdNetworkConversionValueSchema';
      const expectedParameters = {
        property: 'propertyValue',
        data_stream: 'dataStreamValue',
        skadnetwork_conversion_value_schema:
          'skadnetworkConversionValueSchemaValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.sKAdNetworkConversionValueSchemaPathTemplate.render =
        sinon.stub().returns(fakePath);
      client.pathTemplates.sKAdNetworkConversionValueSchemaPathTemplate.match =
        sinon.stub().returns(expectedParameters);

      it('sKAdNetworkConversionValueSchemaPath', () => {
        const result = client.sKAdNetworkConversionValueSchemaPath(
          'propertyValue',
          'dataStreamValue',
          'skadnetworkConversionValueSchemaValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.sKAdNetworkConversionValueSchemaPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromSKAdNetworkConversionValueSchemaName', () => {
        const result =
          client.matchPropertyFromSKAdNetworkConversionValueSchemaName(
            fakePath
          );
        assert.strictEqual(result, 'propertyValue');
        assert(
          (
            client.pathTemplates.sKAdNetworkConversionValueSchemaPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchDataStreamFromSKAdNetworkConversionValueSchemaName', () => {
        const result =
          client.matchDataStreamFromSKAdNetworkConversionValueSchemaName(
            fakePath
          );
        assert.strictEqual(result, 'dataStreamValue');
        assert(
          (
            client.pathTemplates.sKAdNetworkConversionValueSchemaPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchSkadnetworkConversionValueSchemaFromSKAdNetworkConversionValueSchemaName', () => {
        const result =
          client.matchSkadnetworkConversionValueSchemaFromSKAdNetworkConversionValueSchemaName(
            fakePath
          );
        assert.strictEqual(result, 'skadnetworkConversionValueSchemaValue');
        assert(
          (
            client.pathTemplates.sKAdNetworkConversionValueSchemaPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('searchAds360Link', async () => {
      const fakePath = '/rendered/path/searchAds360Link';
      const expectedParameters = {
        property: 'propertyValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.searchAds360LinkPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.searchAds360LinkPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('searchAds360LinkPath', () => {
        const result = client.searchAds360LinkPath('propertyValue');
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.searchAds360LinkPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromSearchAds360LinkName', () => {
        const result = client.matchPropertyFromSearchAds360LinkName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (client.pathTemplates.searchAds360LinkPathTemplate.match as SinonStub)
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });

    describe('subpropertyEventFilter', async () => {
      const fakePath = '/rendered/path/subpropertyEventFilter';
      const expectedParameters = {
        property: 'propertyValue',
        sub_property_event_filter: 'subPropertyEventFilterValue',
      };
      const client =
        new analyticsadminserviceModule.v1alpha.AnalyticsAdminServiceClient({
          credentials: {client_email: 'bogus', private_key: 'bogus'},
          projectId: 'bogus',
        });
      await client.initialize();
      client.pathTemplates.subpropertyEventFilterPathTemplate.render = sinon
        .stub()
        .returns(fakePath);
      client.pathTemplates.subpropertyEventFilterPathTemplate.match = sinon
        .stub()
        .returns(expectedParameters);

      it('subpropertyEventFilterPath', () => {
        const result = client.subpropertyEventFilterPath(
          'propertyValue',
          'subPropertyEventFilterValue'
        );
        assert.strictEqual(result, fakePath);
        assert(
          (
            client.pathTemplates.subpropertyEventFilterPathTemplate
              .render as SinonStub
          )
            .getCall(-1)
            .calledWith(expectedParameters)
        );
      });

      it('matchPropertyFromSubpropertyEventFilterName', () => {
        const result =
          client.matchPropertyFromSubpropertyEventFilterName(fakePath);
        assert.strictEqual(result, 'propertyValue');
        assert(
          (
            client.pathTemplates.subpropertyEventFilterPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });

      it('matchSubPropertyEventFilterFromSubpropertyEventFilterName', () => {
        const result =
          client.matchSubPropertyEventFilterFromSubpropertyEventFilterName(
            fakePath
          );
        assert.strictEqual(result, 'subPropertyEventFilterValue');
        assert(
          (
            client.pathTemplates.subpropertyEventFilterPathTemplate
              .match as SinonStub
          )
            .getCall(-1)
            .calledWith(fakePath)
        );
      });
    });
  });
});
