{"id":"pubsub/snapshot","type":"class","name":"Snapshot","overview":"<p>\n  This class allows you interact with Cloud Pub/Sub.\n</p>\n\n\n\n<p>\n  First, install <code>@google-cloud/pubsub</code> with npm:\n</p>\n\n<div hljs language=\"bash\">$ npm install --save @google-cloud/pubsub</div>\n\n<p>\n  If you are running your app on Google Compute Engine, you won't need to worry about supplying connection configuration options to <code>@google-cloud/pubsub</code>â€” we figure that out for you.\n</p>\n\n<p>\n  However, if you're running your app elsewhere, you will need to provide project details to authenticate API requests.\n</p>\n\n<h4>Google Cloud Platform</h4>\n<div hljs language=\"javascript\">\nvar pubsub = require('@google-cloud/pubsub')();\n</div>\n\n<h4>Elsewhere</h4>\n<div hljs language=\"javascript\">\nvar pubsub = require('@google-cloud/pubsub')({\n  projectId: 'grape-spaceship-123',\n  keyFilename: '/path/to/keyfile.json'\n});\n</div>\n\n<p>\n  The full set of options which can be passed to <code>@google-cloud/pubsub</code> are outlined in our <a href=\"#/docs/pubsub/v0.14.1/guides/authentication\">Authentication guide</a>.\n</p>\n","description":"","source":"packages/pubsub/src/snapshot.js","parent":"pubsub","children":[],"methods":[{"id":"Snapshot","name":"Snapshot","type":"constructor","description":"<p>A Snapshot object will give you access to your Cloud Pub/Sub snapshot.</p><p>Snapshots are sometimes retrieved when using various methods:</p><ul> <li><a data-custom-type=\"pubsub\" data-method=\"getSnapshots\">pubsub#getSnapshots</a></li> <li><a data-custom-type=\"pubsub\" data-method=\"getSnapshotsStream\">pubsub#getSnapshotsStream</a></li> <li><a data-custom-type=\"pubsub\" data-method=\"snapshot\">pubsub#snapshot</a></li> </ul> <p>Snapshots may be created with:</p><ul> <li><a data-custom-type=\"pubsub/subscription\" data-method=\"createSnapshot\">pubsub/subscription#createSnapshot</a></li> </ul> <p>You can use snapshots to seek a subscription to a specific point in time.</p><ul> <li><a data-custom-type=\"pubsub/subscription\" data-method=\"seek\">pubsub/subscription#seek</a></li> </ul> ","source":"packages/pubsub/src/snapshot.js#L91","resources":[],"examples":[{"caption":"<p>From <a data-custom-type=\"pubsub\" data-method=\"getSnapshots\">pubsub#getSnapshots</a>:</p>","code":"pubsub.getSnapshots(function(err, snapshots) {\n  // `snapshots` is an array of Snapshot objects.\n});"},{"caption":"<p>From <a data-custom-type=\"pubsub\" data-method=\"getSnapshotsStream\">pubsub#getSnapshotsStream</a>:</p>","code":"pubsub.getSnapshotsStream()\n  .on('error', console.error)\n  .on('data', function(snapshot) {\n    // `snapshot` is a Snapshot object.\n  });"},{"caption":"<p>From <a data-custom-type=\"pubsub\" data-method=\"snapshot\">pubsub#snapshot</a>:</p>","code":"var snapshot = pubsub.snapshot('my-snapshot');\n// snapshot is a Snapshot object."},{"caption":"<p>Create a snapshot with <a data-custom-type=\"pubsub/subscription\" data-method=\"createSnapshot\">pubsub/subscription#createSnapshot</a>:</p>","code":"var subscription = pubsub.subscription('my-subscription');\n\nsubscription.createSnapshot('my-snapshot', function(err, snapshot) {\n  if (!err) {\n    // `snapshot` is a Snapshot object.\n  }\n});"},{"caption":"<p>Seek to your snapshot:</p>","code":"var subscription = pubsub.subscription('my-subscription');\n\nsubscription.seek('my-snapshot', function(err) {\n  if (err) {\n    // Error handling omitted.\n  }\n});"}],"params":[],"exceptions":[],"returns":[]},{"id":"create","name":"create","type":"instance","description":"<p>Create a snapshot with the given name.</p><p><strong>This is only available if you accessed this object through <a data-custom-type=\"pubsub/subscription\" data-method=\"snapshot\">pubsub/subscription#snapshot</a>.</strong></p>","source":"packages/pubsub/src/snapshot.js#L130","resources":[],"examples":[{"code":"var subscription = pubsub.subscription('my-subscription');\nvar snapshot = subscription.snapshot('my-snapshot');\n\nvar callback = function(err, snapshot, apiResponse) {\n  if (!err) {\n    // The snapshot was created successfully.\n  }\n};\n\nsnapshot.create('my-snapshot', callback);"},{"caption":"<p>If the callback is omitted, we'll return a Promise.</p>","code":"snapshot.create('my-snapshot').then(function(data) {\n  var snapshot = data[0];\n  var apiResponse = data[1];\n});"}],"params":[{"name":"name","description":"<ul> <li>Name of the snapshot.</li> </ul> ","types":["string"],"optional":false,"nullable":false},{"name":"callback","description":"<ul> <li>The callback function.</li> </ul> ","types":["function"],"optional":true,"nullable":false},{"name":"callback.err","description":"<ul> <li>An error from the API call, may be null.</li> </ul> ","types":["error"],"optional":false,"nullable":true},{"name":"callback.snapshot","description":"<ul> <li>The newly created snapshot.</li> </ul> ","types":["<a data-custom-type=\"pubsub/snapshot\" data-method=\"\">pubsub/snapshot</a>"],"optional":false,"nullable":false},{"name":"callback.apiResponse","description":"<ul> <li>The full API response from the service.</li> </ul> ","types":["object"],"optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"seek","name":"seek","type":"instance","description":"<p>Seeks an existing subscription to the snapshot.</p><p><strong>This is only available if you accessed this object through <a data-custom-type=\"pubsub/subscription\" data-method=\"snapshot\">pubsub/subscription#snapshot</a>.</strong></p>","source":"packages/pubsub/src/snapshot.js#L158","resources":[],"examples":[{"code":"var subscription = pubsub.subscription('my-subscription');\nvar snapshot = subscription.snapshot('my-snapshot');\n\nsnapshot.seek(function(err, apiResponse) {});"},{"caption":"<p>If the callback is omitted, we'll return a Promise.</p>","code":"snapshot.seek().then(function(data) {\n  var apiResponse = data[0];\n});"}],"params":[{"name":"callback","description":"<ul> <li>The callback function.</li> </ul> ","types":["function"],"optional":false,"nullable":false},{"name":"callback.err","description":"<ul> <li>An error from the API call, may be null.</li> </ul> ","types":["error"],"optional":false,"nullable":true},{"name":"callback.apiResponse","description":"<ul> <li>The full API response from the service.</li> </ul> ","types":["object"],"optional":false,"nullable":false}],"exceptions":[],"returns":[]},{"id":"delete","name":"delete","type":"instance","description":"<p>Delete the snapshot.</p>","source":"packages/pubsub/src/snapshot.js#L191","resources":[],"examples":[{"code":"snapshot.delete(function(err, apiResponse) {});"},{"caption":"<p>If the callback is omitted, we'll return a Promise.</p>","code":"snapshot.delete().then(function(data) {\n  var apiResponse = data[0];\n});"}],"params":[{"name":"callback","description":"<ul> <li>The callback function.</li> </ul> ","types":["function"],"optional":true,"nullable":false},{"name":"callback.err","description":"<ul> <li>An error returned while making this request.</li> </ul> ","types":["error"],"optional":false,"nullable":true},{"name":"callback.apiResponse","description":"<ul> <li>The full API response from the service.</li> </ul> ","types":["object"],"optional":false,"nullable":false}],"exceptions":[],"returns":[]}],"path":"snapshot.json"}